{"version":3,"sources":["utils/history.js","reducers/list.js","constants/actionTypes.js","constants/defaults.js","reducers/filter.js","reducers/pager.js","reducers/currentItem.js","reducers/currentUser.js","reducers/popups/snackbar.js","reducers/popups/dialog.js","reducers/popups/sharing.js","reducers/popups/index.js","store.js","theme.js","components/AppWithD2ContextAndTheme.js","constants/queryFields.js","utils/asArray.js","utils/getNestedProp.js","components/ErrorMessage.js","utils/createHumanErrorMessage.js","components/SearchableGroupEditor.js","components/AsyncAutoComplete.js","components/SearchableOrgUnitTree.js","components/AuthorityEditor/AuthorityFilter.js","components/AuthorityEditor/utils/filterAuthorities.js","components/AuthorityEditor/HighlightableText.js","components/AuthorityEditor/AuthorityItem.js","components/AuthorityEditor/utils/authorityGroupNames.js","components/AuthorityEditor/utils/groupAuthorities.js","components/AuthorityEditor/AuthorityGroup.js","components/AuthorityEditor/AuthoritySection.js","components/AuthorityEditor/FilteredAuthoritySections.js","components/AuthorityEditor/AuthorityEditor.js","components/AuthorityEditor/index.js","utils/fieldRenderers.js","containers/GroupForm/config.js","selectors/index.js","containers/UserForm/config.js","constants/entityTypes.js","utils/validators.js","utils/browserHasDateInputSupport.js","utils/attributeFieldHelpers.js","api/utils.js","api/index.js","actions/index.js","utils/navigateTo.js","components/List/booleanValueRenderer.js","components/List/List.js","components/List/index.js","utils/detectCurrentUserChanges.js","utils/sharedActions.js","utils/validatorsAsync.js","components/ReplicateUserForm.js","containers/UserList/UserContextMenuActions.js","components/OrganisationUnitFilter.js","components/OrganisationUnitInput.js","constants/filterFieldNames.js","components/SearchFilter.js","containers/UserList/UserFilter.js","containers/UserList/index.js","containers/UserList/UserList.js","components/IconLink.js","containers/RoleForm/config.js","containers/RoleForm/RoleForm.js","containers/RoleForm/index.js","containers/GroupForm/GroupForm.js","containers/GroupForm/collectValidators.js","containers/GroupForm/index.js","containers/UserForm/collectValidators.js","containers/UserForm/UserForm.js","containers/UserForm/index.js","components/FormLoader.js","utils/parseDateFromUTCString.js","components/DetailSummary.js","constants/detailFieldConfigs.js","containers/UserProfile.js","components/PageNotFound.js","components/CardLinks.js","containers/RoleList/RoleContextMenuActions.js","containers/RoleList/RoleList.js","containers/RoleList/index.js","containers/RoleDetails.js","containers/GroupList/GroupContextMenuActions.js","containers/GroupList/index.js","containers/GroupList/GroupList.js","containers/GroupDetails.js","constants/routeConfig.js","components/SideNav.js","components/SectionLoader.js","components/SnackbarContainer.js","components/DialogContainer.js","components/SharingDialogContainer.js","App.js","serviceWorker.js","locales/index.js","index.js"],"names":["createHashHistory","initialState","type","items","listReducer","state","arguments","length","undefined","_ref","payload","message","LIST_FILTER","query","inactiveMonths","selfRegistered","invitationStatus","organisationUnits","INITIAL_SNACKBAR_STATE","show","props","INITIAL_DIALOG_STATE","content","INITIAL_SHARING_STATE","id","filterReducer","DEFAULT_FILTER","updateKey","updateValue","Object","objectSpread","defineProperty","pagerReducer","pager","currentItemReducer","currentUserReducer","snackbarReducer","dialogReducer","sharingReducer","popupsReducer","combineReducers","snackbar","dialog","sharing","middlewares","ReduxThunk","rootReducer","list","filter","currentItem","currentUser","popups","form","formReducer","createStore","applyMiddleware","apply","theme","spacing","Spacing","fontFamily","palette","primary1Color","blue500","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","orangeA200","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","assign","forms","minWidth","maxWidth","formInput","fontWeight","AppWithD2ContextAndTheme","getChildContext","d2","_this","render","react_default","a","createElement","MuiThemeProvider_default","children","Component","childContextTypes","PropTypes","object","USER_GROUP_LIST","USER_ROLE_LIST","concat","CURRENT_USER_ORG_UNITS_FIELDS","fields","ORG_UNITS_QUERY_CONFIG","paging","FIELDS","USER_LIST","USER_DETAILS","USER_GROUP_DETAILS","USER_ROLE_DETAILS","asArray","input","toArray","getNestedProp","propertyPathStr","parent","split","reduce","currentLevel","propName","style","clear","color","backgroundColor","padding","fontSize","width","ErrorMessage","introText","errorMessage","createHumanErrorMessage","fallbackMsg","messages","httpStatusCode","fallback","i18n","t","useMessage","map","_ref2","join","styles","outerWrap","paddingTop","paddingBottom","headerWrap","display","headerSpacer","flex","header","error","red500","errorText","marginLeft","SearchableGroupEditor","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","availableItemsReceivedHandler","response","_this$props","initiallyAssignedItems","returnModelsOnUpdate","_this$state","itemStore","assignedItemStore","modelLookup","Map","assignedItems","availableItems","item","set","text","displayName","name","value","setState","onAssignItems","assigned","update","onRemoveItems","indexOf","updateFilterText","event","filterText","target","Store","create","fetchErrorMsg","availableItemsQuery","_context","t0","assignedItemIds","_this2","_this$props2","onChange","onBlur","get","Promise","resolve","_this$props3","availableItemsHeader","assignedItemsHeader","assignedStyle","Heading_component","level","TextField_default","fullWidth","floatingLabelText","hintText","marginTop","_this$state2","components_ErrorMessage","GroupEditor_component","height","renderHeader","renderSearchInput","renderGroupEditor","info","warning","loaderDataSource","MenuItem_default","textAlign","CircularProgress_default","baseState","filteredItems","searchWarning","errorStyle","AsyncAutoComplete","onAutoCompleteChange","autoCompleteText","getItems","asyncToGenerator","regenerator_default","mark","_callee","minCharLength","queryParam","filteredResults","wrap","prev","next","minCharCount","trashableQuery","makeTrashable","sent","model","stop","_x","onItemSelect","dataSourceItem","selectHandler","debounceTime","queryDebounceTime","debounce","trash","autoCompleteProps","mergedAutoCompleteProps","marginBottom","mergedProps","onUpdateInput","onNewRequest","searchText","dataSource","floatingLabelShrinkStyle","menuStyle","maxHeight","AutoComplete_default","defaultProps","wrapper","minHeight","position","scrollBox","overflowY","borderRadius","loader","top","left","transform","buttonStrip","buttonMargin","marginRight","headerError","SearchableOrgUnitTree","toggleSelectedOrgUnits","_","orgUnit","selectedOrgUnits","orgUnitIndex","getIndexOfOrgUnit","newOrgUnits","toConsumableArray","slice","selectAndShowFilteredOrgUnit","initiallyExpanded","removeLastPathSegment","clearSelection","defer","applySelection","confirmSelection","roots","orgUnitFilter","getInitiallyExpandedItems","orgUnits","expandedUnits","strippedPath","push","selectedUnit","find","unit","path","substr","lastIndexOf","updateObject","cancel","orgUnitType","headerText","wrapperStyle","selected","headerStyle","components_AsyncAutoComplete","api","queryOrgUnits","Paper_default","OrgUnitTreeMultipleRoots_component","onSelectClick","orgUnitsPathsToInclude","RaisedButton_default","label","primary","onClick","disabled","secondary","connect","orgUnitRootsSelector","AuthorityFilter","onSelectedOnlyChange","selectedOnly","onFilterChange","searchStr","onSearchStrChange","className","index_es","checked","onCheck","filterAuthorities","allAuthorities","selectedItemsLookup","searchChunks","keys","filtered","key","section","allowedBySearchStr","strToMatch","toLowerCase","some","chunk","matchesSearchStr","allowedBySelectedSetting","lookup","subItem","Boolean","matchesSelectedSetting","HighlightableText","main_default","highlightClassName","searchWords","autoEscape","textToHighlight","AuthorityItem","onChecked","authSubject","onCheckedCallBack","withLabel","context","empty","implicit","AuthorityEditor_HighlightableText","contextTypes","array","authorityGroupNames","getEmptyGroupedAuthorities","emptyGroupedAuthorities","metadata","headers","apps","tracker","importExport","system","ALL_METADATA_SUFFIXES","EMPTY_GROUP_ITEM","IMPLICIT_GROUP_ITEM","AUTHS_WITH_IMPLICIT_ADD_PRIVATE_AND_DELETE","Set","AUTHORITY_GROUPS","sortGroupedAuthorities","groupedAuthories","forEach","group","sortBy","hasNoGroupSuffix","auth","suffix","endsWith","createMetadataGroup","authSuffix","baseName","replace","genericAdd","externalAccess","hasImplicitAddPrivateAndDelete","has","publicAddAuth","privateAddAuth","deleteAuth","externalAccessAuth","delete","getNameLookup","addToAuthoritySection","groupedAuthorities","groupKey","groupAuthorities","authorities","groupedBase","startsWith","metadataGroup","AuthorityGroup","onAuthGroupChanged","onAuthChange","isPublicAdd","forceUpdate","publicAddSelected","_this$context","shouldSelect","authGroup","index","isPrivateAdd","implicitSelect","AuthorityEditor_AuthorityItem","func","isRequired","AuthoritySection","onTableHeadCheck","_event","ids","authSection","renderAuthRow","AuthorityEditor_AuthorityGroup","size","errorMsg","msg","renderInfoRow","renderLoaderRow","allItemsSelected","Array","isArray","every","_ref3","sectionKey","wrapperClassName","tableClassName","renderTableHead","renderContent","FilteredAuthoritySections","filteredAuthorities","allGroupedAuthorities","updateFilter","nextProps","updateFilteredAuthorities","all","AuthorityEditor_AuthoritySection","AuthorityEditor","filteredAuthSections","reduxFormOnChange","authorityIds","initiallySelected","groupedAuthoritiesPromise","getGroupedAuthorities","handleAuthorityFetchError","total","AuthorityEditor_AuthorityFilter","AuthorityEditor_FilteredAuthoritySections","ref","comp","checkbox","renderTextField","_ref$meta","meta","touched","asyncValidating","other","objectWithoutProperties","renderAuthorityEditor","components_AuthorityEditor","reduxFormOnBlur","renderCheckbox","Checkbox_default","renderSelectField","_ref4","_ref4$meta","options","SelectField_default","setTimeout","_ref5","i","primaryText","renderSearchableGroupEditor","_ref6","_ref6$meta","availableItemsLabel","assignedItemsLabel","initialValues","components_SearchableGroupEditor","renderSearchableOrgUnitTree","_ref7","_ref7$meta","components_SearchableOrgUnitTree","renderText","_ref8","FORM_NAME","NAME","CODE","MANAGED_GROUPS","STYLES","loaderWrap","getFields","fieldRenderer","isRequiredField","border","initialItemsSelector","pagerSelector","memoize","pageCount","page","pageSize","pageCalculationValue","startItem","endItem","currentlyShown","listSelector","groupMemberships","listType","modelDefinition","listMappings","user","userName","userCredentials","username","lastLogin","userRole","userGroup","currentUserIsMember","includes","orgUnitsAsStringSelector","count","addInitialValueFrom","sourceObject","DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS","catDimensionConstraints","cogsDimensionConstraints","isUndefined","userFormInitialValuesSelector","locales","attributeFields","INVITE","SET_PASSWORD","USER_PROPS","USER_CRED_PROPS","field","INTERFACE_LANGUAGE","ui","DATABASE_LANGUAGE","db","userGroupFormInitialValuesSelector","getUserGroupFields","analyticsDimensionsRestrictionsSelector","catConstraints","cogsConstraints","shortItemSelector","systemOrgRoots","systemOrganisationUnitRoots","requestedOrgUnitRoots","fallBackOrgUnitRoots","DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS","orgUnitRoots","inviteUserValueSelector","formState","registeredFields","values","INVITE_USER","toggler","blue600","orgUnitTree","float","togglerWrap","additionalFieldsWrap","USERNAME","EXTERNAL_AUTH","PASSWORD","REPEAT_PASSWORD","OPEN_ID","LDAP_ID","USE_DB_LOCALE","getBaseCaption","fontStyle","getInviteFields","getBaseFields","autoComplete","optionsSelector","paddingRight","paddingLeft","getAdditionalFields","userGroups","USER","USER_ROLE","USER_GROUP","EMAIL_ADDRESS_PATTERN","INTERNATIONAL_PHONE_NUMBER_PATTERN","DATE_PATTERN","LOWER_CASE_PATTERN","UPPER_CASE_PATTERN","DIGIT_PATTERN","SPECIAL_CHARACTER_PATTERN","code","hasValue","date","test","email","integer","isInteger","negativeInteger","parseInt","number","isNaN","password","allValues","inviteUser","shouldValidatePassword","passwordError","checkPasswordForErrors","positiveInteger","repeatPassword","required","requiredArray","whatsApp","x","parseFloat","hasDateInputSupport","notADateValue","browserHasDateInputSupport","document","setAttribute","USER_ATTRIBUTE_FIELD_PREFIX","NO_VALUE_OPTION","generateAttributeFields","attributes","userAttributeValues","attribute","valueType","mandatory","unique","optionSet","userAttribute","attributeValue","valueTypeProps","valueTypeMapping","getValueTypeMapping","OPTION_SET","option","TEXT","getValueTypeProps","isAttributeField","shouldBeUnique","attributeId","generateAttributeField","addUniqueAttributesToAsyncBlurFields","asyncBlurFields","parseAttributeValues","fieldTypeLookup","attributeValues","LONG_TEXT","multiLine","rows","rowsMax","DATE","floatingLabelFixed","fieldValidators","BOOLEAN","TRUE_ONLY","NUMBER","INTEGER","INTEGER_POSITIVE","INTEGER_NEGATIVE","getQueryFields","entityName","detailFields","formattedEntityName","snakeCase","toUpperCase","varName","createListRequestData","requestData","order","isSuperUser","userOrgUnits","includeChildren","addValueAsProp","data","parseUserSaveData","isNewUser","userId","generateUid","userCredId","userModelOwnedProperties","getOwnedPropertyNames","userInfo","cred","catCogsDimensionConstraints","constraint","dimensionType","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","ownedPropName","err","return","parseLocaleUrl","val","mapLocale","locale","getRestrictedOrgUnits","store","getState","availableOrgUnits","isAvailableUnit","hasAvailableAncestor","ancestors","ancestor","appendUsernameToDisplayName","userModelCollection","parse200Error","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","typeReports","typeReport","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","objectReports","objectReport","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","errorReports","errorReport","Api","getD2","getContextPath","systemInfo","contextPath","getList","getCurrentUser","models","getItem","genericFind","propertyName","on","equals","replicateUser","url","d2Api","post","listConfig","then","getAvailableUserRoles","userRoles","canIssue","getAvailableDataAnalyticsDimensionRestrictions","dimensions","updateDisabledState","patch","disable2FA","twoFA","getSelectedAndAvailableLocales","encodeURIComponent","useDbLocaleOption","dbLocales","uiLocales","uiLocale","settings","dbLocale","slicedToArray","available","saveOrInviteUser","initialUiLocale","initialDbLocale","userData","postUrl","status","reject","localePromises","dbLocalePromise","getManagedUsers","getAvailableUserGroups","groupedAuths","request","systemAuthorities","getCurrentUserGroupsAndRoles","res","userGroupIds","userRoleIds","initCurrentUser","getCurrentUserOrgUnits","getSystemOrgUnitRoots","_ref8$","_ref8$2","dataViewOrganisationUnits","teiSearchOrganisationUnits","refreshCurrentUser","CurrentUserClass","constructor","_ref9","_ref10","me","userSettings","users","modelCollection","updateCurrentUserGroupMembership","groupId","deleteMembership","method","getInstance","getApi","entityType","resp","modelId","notEqual","userCollection","getAttributesWithValueAndId","createAction","createListActionSequence","dispatch","promise","silent","_x2","_x3","_x4","_getState","createAsyncActionSequence","_callee2","actionTypes","_context2","requested","received","errored","_x5","_x6","_x7","currentUserActions","clearItem","showSnackbar","hideSnackbar","showDialog","hideDialog","navigateTo","history","addValueRenderer","check_default","dataTableWrap","clearBoth","filterBar","headerBarPagination","headerBarFilterWrap","pagination","userSelect","List","executeEditIfAllowed","isContextActionAllowed","primaryAction","action","autoHideDuration","onActionClick","resetFilter","resetPager","incrementPage","decrementPage","_this$getPagerConfig","getPagerConfig","visibility","paginationProps","hasNextPage","hasPreviousPage","onNextPageClick","onPreviousPageClick","Pagination_component","_this$props4","FilterComponent","renderPagination","_this$props5","columns","contextMenuActions","contextMenuIcons","LoadingMask_component","DataTable_component","_this$props6","sectionName","newItemPath","renderHeaderBar","renderDataTable","FloatingActionButton_default","add_default","getNextPage","getPreviousPage","refresh","logout","logoutUrl","window","location","detectCurrentUserChanges","disable","deleteModel","interpolator","confirmMsg","successMsg","snackbarProps","onRemoveConfirm","openSharingSettings","asyncValidatorSwitch","_asyncValidatorSwitch","blurredField","priorErrors","newError","errors","asyncErrors","abrupt","USER_FORM","getUserNameError","GROUP_FORM","getGenericUniquenessError","getAttributeUniquenessError","asyncSingleFieldValidator","_callee3","_context3","_callee4","apiMethod","_context4","_callee5","newUserName","editingExistingUser","_context5","REPLICATE_USER_FORM","_callee6","fieldName","role","fieldValue","fieldDisplayName","fallBackMsg","_context6","capitalize","_callee7","_context7","isAttributeUnique","ReplicateUserForm","replicateSuccesHandler","replicateErrorHandler","submitting","pristine","valid","handleSubmit","disableSubmit","onSubmit","Field","component","validate","ReduxFormWrapped","reduxForm","asyncValidate","_x8","_asyncValidateUsername","isUserContextActionAllowed","access","_model$userCredential","read","userContextMenuIcons","_userContextMenuIcons","userContextMenuActions","Action","createActionsFromNames","profile","subscribe","edit","remove","replicate","components_ReplicateUserForm","onRequestClose","title","enable","disable_2fa","showDisable2FAConfirmation","baseMsg","onDisable2FAConfirm","shouldDisable","onDisableConfirm","OrganisationUnitFilter","applyFilter","newSelectedOrgUnits","isEqual","fallbackOrgUnits","lineHeight","cursor","icon","right","textField","whiteSpace","overflow","textOverflow","OrganisationUnitInput","focusOrgUnitInput","refs","orgUnitInput","focus","showOrgTreeInDialog","components_OrganisationUnitFilter","contentStyle","open_in_new_default","material_ui_TextField_default","onFocus","inputStyle","QUERY","SearchFilter","updateSearchFilter","newValue","onQueryStrChange","localQueryStr","selfRegisteredStyle","UserFilter","month","months","fill","config","mergedConfig","includeEmpty","emptyLabel","DropDown_component","dropDownConfig","menuItems","createInactiveMonthsOptions","renderDropDown","_this3","_this4","checkedClassName","components_SearchFilter","components_OrganisationUnitInput","renderInactiveMonthsFilter","renderInvitationStatusFilter","renderSelfRegisteredFilter","UserList","components_List","IconLink","to","tooltip","iconButton","IconButton_default","iconClassName","react_router_dom","DESCRIPTION","AUTHORITIES","RoleForm","saveRole","_objectSpread2","toJSON","backToList","renderFields","fieldConfig","conf","labelText","validators","ReduxFormWrappedRoleForm","_x9","_x10","_x11","_x12","_asyncValidateUniqueness","_initialValues","GroupForm","saveGroup","createIdValueObject","saveUserGroup","trashableAttributesPromise","initialize","getAttributes","console","validatorsToApply","isRequiredAttributeField","collectValidators","CONFIG","ReduxFormWrappedGroupForm","validatorLookup","CREATE_REQUIRED_FIELDS","INVITE_REQUIRED_FIELDS","EDIT_REQUIRED_FIELDS","UserForm","toggleShowMore","showMore","firstName","surname","trashableLocalePromise","inviteFields","baseFields","additionalFields","getLabelText","externalAuthOnly","emailConfigured","filteredFields","exludeField","prepareGroupEditor","isEditingUser","fieldSpecificValidator","isRequiredStaticField","togglerText","keyboard_arrow_up_default","keyboard_arrow_down_default","FlatButton_default","submitText","renderCreateOrInviteField","renderBaseFields","renderAttributeFields","renderAdditionalFields","renderToggler","selector","formValueSelector","ReduxFormWrappedUserForm","main","heading","paper","FormLoader","match","params","initNewItem","formNotFoundErrorMsg","containers_UserForm","containers_RoleForm","containers_GroupForm","shortItem","baseItem","entityTxt","updateMsg","createMsg","link","kebabCase","plural","linkTooltip","components_IconLink","renderForm","newItem","parseDateFromUTCString","utcString","includeTime","keyUiLocale","Date","dateOptions","day","year","hour","minute","Intl","DateTimeFormat","format","raisedButton","cell","verticalAlign","valueCell","DetailSummary","routeId","containerElement","href","send_default","summaryObject","labelCellStyle","removeText","parseDate","parseDateTime","nestedPropselector","parseArrayAsCommaDelimitedString","baseRoute","backTooltip","editLink","editLabel","getLabelForEntity","edit_default","renderSendMessageBtn","renderPropertyFields","UserProfile","components_DetailSummary","PageNotFound","pathname","cardStyle","margin","borderBottom","textStyle","actionStyle","CardLinks","renderCard","card","_this$context$d","canCreate","canDelete","canList","Card_default","CardHeader_default","CardText_default","description","CardActions_default","renderActionButtons","actionButtons","createPath","IconButton_IconButton_default","tooltipPosition","cards","getSections","isRoleContextActionAllowed","manage","roleContextMenuIcons","_roleContextMenuIcons","roleContextMenuActions","show_details","sharing_settings","RoleList","RoleDetails","isGroupContextActionAllowed","groupContextMenuIcons","_groupContextMenuIcon","groupContextMenuActions","updateGroupMembership","join_group","leave_group","GroupList","GroupDetails","getUserSection","getUserRoleSection","getUserGroupSection","sections","routeConfig","components_FormLoader","SideNav","changeSectionHandler","sectionForPath","onLandingPage","Sidebar_component","onChangeSection","currentSection","withRouter","SectionLoader","setRouteConfig","pathHasAvailableSection","getRouteConfig","configItem","routes","userHasAuthorities","react_router","exact","strict","_this$routeConfig","components_SideNav","renderRoutes","open","defaults","bodyStyle","finalProps","Snackbar_default","dialogProps","Dialog_default","hideSharingDialog","d2_ui_sharing_dialog_default","App","baseUrl","es_lib","apiVersion","es","components_AppWithD2ContextAndTheme","CssReset","build_es_lib","appName","hashType","components_SectionLoader","components_SnackbarContainer","components_DialogContainer","components_SharingDialogContainer","hostname","moment","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","setDefaultNamespace","changeLanguage","configI18n","sources","add","process","initConfig","schemas","getUserSettings","init","setupD2","rootEl","getElementById","src_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.62f6f2ef.chunk.js","sourcesContent":["import { createHashHistory } from 'history'\n\n/**\n * Creates and exports an empty hash history object that will be used by the Router\n * This history object can be imported and addressed directly outside of components\n * For example, it is used by navigateTo in ../utils/index\n * @name history\n * @memberof module:utils\n */\n\nexport default createHashHistory()\n","import {\n    LIST_REQUESTED,\n    LIST_RECEIVED,\n    LIST_ERRORED,\n} from '../constants/actionTypes'\n\nconst initialState = {\n    type: null,\n    items: null,\n}\n\n/**\n * Reducer to control the list state\n * @memberof module:reducers\n * @param {Object} state - The list state\n * @param {String|null} state.type=null - The list type, either one of 'user', 'userGroup', 'userRole', or `null` after error.\n * @param {Object|String|null} state.items=null - Can have the following forms:\n * - A d2 ModelCollection instance of type User, UserGroup, or UserRole\n * - A string in case of an error\n * - `null` while the API request is pending\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object|String|null} action.payload - Input for the new state\n * @returns {Object|String|null} - A new state object\n * @function\n */\nconst listReducer = (state = initialState, { type, payload }) => {\n    switch (type) {\n        case LIST_REQUESTED:\n            return {\n                type: payload,\n                items: null,\n            }\n        case LIST_RECEIVED:\n            return state.type === payload.type\n                ? {\n                      type: payload.type,\n                      items: payload.items,\n                  }\n                : state\n        case LIST_ERRORED:\n            return {\n                type: null,\n                items: payload.message,\n            }\n        default:\n            return state\n    }\n}\n\nexport default listReducer\n","// LISTS\nexport const LIST_REQUESTED = 'LIST_REQUESTED'\nexport const LIST_RECEIVED = 'LIST_RECEIVED'\nexport const LIST_ERRORED = 'LIST_ERRORED'\n\n// ITEMS\nexport const CLEAR_ITEM = 'CLEAR_ITEM'\nexport const INIT_NEW_ITEM = 'INIT_NEW_ITEM'\nexport const ITEM_REQUESTED = 'ITEM_REQUESTED'\nexport const ITEM_RECEIVED = 'ITEM_RECEIVED'\nexport const ITEM_ERRORED = 'ITEM_ERRORED'\n\nexport const SHOW_SNACKBAR = 'SHOW_SNACKBAR'\nexport const HIDE_SNACKBAR = 'HIDE_SNACKBAR'\nexport const SHOW_DIALOG = 'SHOW_DIALOG'\nexport const HIDE_DIALOG = 'HIDE_DIALOG'\nexport const SHOW_SHARING_DIALOG = 'SHOW_SHARING_DIALOG'\nexport const HIDE_SHARING_DIALOG = 'HIDE_SHARING_DIALOG'\n\n// PAGER\nexport const PAGER_RESET = 'PAGER_RESET'\n\n// FILTER\nexport const FILTER_UPDATED = 'FILTER_UPDATED'\nexport const FILTER_RESET = 'FILTER_RESET'\n\n// CURRENT USER\nexport const CURRENT_USER_REQUESTED = 'CURRENT_USER_REQUESTED'\nexport const CURRENT_USER_RECEIVED = 'CURRENT_USER_RECEIVED'\nexport const CURRENT_USER_ERRORED = 'CURRENT_USER_ERRORED'\n","export const PAGE_SIZE = 50\nexport const PAGE = 1\n\nexport const LIST_FILTER = {\n    query: '', // string\n    inactiveMonths: null, // Number\n    selfRegistered: false, // Bool\n    invitationStatus: null, // 'all' || 'expired',\n    organisationUnits: [], // Array\n}\n\nexport const INITIAL_SNACKBAR_STATE = {\n    show: false,\n    props: {\n        message: '',\n    },\n}\n\nexport const INITIAL_DIALOG_STATE = {\n    show: false,\n    props: {},\n    content: null,\n}\n\nexport const INITIAL_SHARING_STATE = {\n    show: false,\n    id: null,\n    type: null,\n}\n","import { FILTER_UPDATED, FILTER_RESET } from '../constants/actionTypes'\nimport { LIST_FILTER as DEFAULT_FILTER } from '../constants/defaults'\n\n/**\n * Reducer to control the filter state that is used to GET filtered lists\n * @memberof module:reducers\n * @param {Object} state - Object containing values\n * @param {String} state.query='' - Query string to filter results by\n * @param {Number|null} state.inactiveMonths=null - Filter by number of inactive months (USER only)\n * @param {Bool} state.selfRegistered=false - Show self registered users only (USER only)\n * @param {String|null} state.invitationStatus=null - Filter by invitation status, possible values: 'all' or 'expired', (USER only)\n * @param {Array} state.organisationUnits=[]] - IDs of the organisation units to filter by (USER only)\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object} action.payload - Input for the new state\n * @param {String} action.payload.updateKey - Filter property key to update\n * @param {*} action.payload.updateValue - Value to set property to\n * @returns {Object} - A new filter state object\n * @function\n */\nconst filterReducer = (state = DEFAULT_FILTER, { type, payload }) => {\n    switch (type) {\n        case FILTER_UPDATED:\n            const { updateKey, updateValue } = payload\n            return {\n                ...state,\n                [updateKey]: updateValue,\n            }\n        case FILTER_RESET:\n            return { ...DEFAULT_FILTER }\n        default:\n            return state\n    }\n}\n\nexport default filterReducer\n","import { LIST_RECEIVED, PAGER_RESET } from '../constants/actionTypes'\n\n/**\n * Reducer to control the pager state. The pager state is used as a query parameter when fetching lists from the API.\n * @memberof module:reducers\n * @param {Object|null} state=null - Either an instance of a d2 Pager, or null incase the pager is being reset.\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object} action.payload - Input for the new state\n * @returns {Object|null} - A new state object\n * @function\n */\nconst pagerReducer = (state = null, { type, payload }) => {\n    switch (type) {\n        case PAGER_RESET:\n            return null\n        case LIST_RECEIVED:\n            return payload.items.pager\n        default:\n            return state\n    }\n}\n\nexport default pagerReducer\n","import {\n    CLEAR_ITEM,\n    INIT_NEW_ITEM,\n    ITEM_REQUESTED,\n    ITEM_RECEIVED,\n    ITEM_ERRORED,\n} from '../constants/actionTypes'\n\n/**\n * @module reducers\n */\n\n/**\n * Reducer to control the current item state\n * @memberof module:reducers\n * @param {Object|String|null} state=null - Can have the following forms:\n * - A d2 model instance of type User, UserGroup, or UserRole\n * - A string in case of an error\n * - `null` while the API request is pending.\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object|String|null} action.payload - Input for the new state\n * @returns {Object|String|null} - A new state object\n * @function\n */\nconst currentItemReducer = (state = null, { type, payload }) => {\n    switch (type) {\n        case CLEAR_ITEM:\n        case ITEM_REQUESTED:\n            return null\n        case INIT_NEW_ITEM:\n        case ITEM_RECEIVED:\n            return payload\n        case ITEM_ERRORED:\n            return payload\n        default:\n            return state\n    }\n}\n\nexport default currentItemReducer\n","import {\n    CURRENT_USER_REQUESTED,\n    CURRENT_USER_RECEIVED,\n    CURRENT_USER_ERRORED,\n} from '../constants/actionTypes'\n\n/**\n * Reducer to control the current user state, initialized from the sectionLoader,\n * Can also be reloaded if certain changes take place that influence the current user.\n * @memberof module:reducers\n * @param {Object|null} state=null - An object containing relevant properties of the current user.\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object|String|null} action.payload - Input for the new state\n * @returns {Object} - A new state object\n * @function\n */\nconst currentUserReducer = (state = null, { type, payload }) => {\n    switch (type) {\n        case CURRENT_USER_REQUESTED:\n            return null\n        case CURRENT_USER_RECEIVED:\n        case CURRENT_USER_ERRORED:\n            return payload\n        default:\n            return state\n    }\n}\n\nexport default currentUserReducer\n","import { SHOW_SNACKBAR, HIDE_SNACKBAR } from '../../constants/actionTypes'\nimport { INITIAL_SNACKBAR_STATE } from '../../constants/defaults'\n\n/**\n * Reducer to show / hide the SnackbarContainer\n * @memberof module:reducers/popups\n * @param {Object} state\n * @param {Boolean} state.show=false - Flag to show or hide the Snackbar\n * @param {Object} state.props={message:''} - Props to pass to the MUI Snackbar component\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object} action.payload - Props for the new state\n * @returns {Object} - A new state object\n * @function\n */\nconst snackbarReducer = (state = INITIAL_SNACKBAR_STATE, { type, payload }) => {\n    switch (type) {\n        case SHOW_SNACKBAR:\n            return {\n                show: true,\n                props: payload,\n            }\n        case HIDE_SNACKBAR:\n            return { ...INITIAL_SNACKBAR_STATE }\n        default:\n            return state\n    }\n}\n\nexport default snackbarReducer\n","import { SHOW_DIALOG, HIDE_DIALOG } from '../../constants/actionTypes'\nimport { INITIAL_DIALOG_STATE } from '../../constants/defaults'\n\n/**\n * Reducer to show / hide the DialogContainer\n * @memberof module:reducers/popups\n * @param {Object} state\n * @param {Boolean} state.show=false - Flag to show or hide the dialog\n * @param {Object} state.props={} - Props to pass to the MUI Dialog component\n * @param {Object|null} state.content=null - The content to be rendered by the MUI Dialog component\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object} action.payload - The content and props for the new state\n * @returns {Object} - A new state object\n * @function\n */\nconst dialogReducer = (state = INITIAL_DIALOG_STATE, { type, payload }) => {\n    switch (type) {\n        case SHOW_DIALOG:\n            return {\n                show: true,\n                ...payload,\n            }\n        case HIDE_DIALOG:\n            return { ...INITIAL_DIALOG_STATE }\n        default:\n            return state\n    }\n}\n\nexport default dialogReducer\n","import {\n    SHOW_SHARING_DIALOG,\n    HIDE_SHARING_DIALOG,\n} from '../../constants/actionTypes'\nimport { INITIAL_SHARING_STATE } from '../../constants/defaults'\n\n/**\n * Reducer to show / hide the SharingDialogContainer\n * @memberof module:reducers/popups\n * @param {Object} state\n * @param {Boolean} state.show=false - Flag to show or hide the SharingDialog\n * @param {String|null} state.id=null - The model instance ID for which to open the sharing settings\n * @param {String|null} state.type=null - The model instance name\n * @param {Object} action\n * @param {String} action.type - Indicator of action to switch to\n * @param {Object} action.payload - The ID and type for the new state\n * @returns {Object} - A new state object\n * @function\n */\nconst sharingReducer = (state = INITIAL_SHARING_STATE, { type, payload }) => {\n    switch (type) {\n        case SHOW_SHARING_DIALOG:\n            return {\n                show: true,\n                ...payload,\n            }\n        case HIDE_SHARING_DIALOG:\n            return { ...INITIAL_SHARING_STATE }\n        default:\n            return state\n    }\n}\n\nexport default sharingReducer\n","import { combineReducers } from 'redux'\nimport snackbarReducer from './snackbar'\nimport dialogReducer from './dialog'\nimport sharingReducer from './sharing'\n\n/**\n * @module reducers/popups\n */\nconst popupsReducer = combineReducers({\n    snackbar: snackbarReducer,\n    dialog: dialogReducer,\n    sharing: sharingReducer,\n})\n\nexport default popupsReducer\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\nimport ReduxThunk from 'redux-thunk'\nimport logger from 'redux-logger'\nimport { reducer as formReducer } from 'redux-form'\nimport listReducer from './reducers/list'\nimport filterReducer from './reducers/filter'\nimport pagerReducer from './reducers/pager'\nimport currentItemReducer from './reducers/currentItem'\nimport currentUserReducer from './reducers/currentUser'\nimport popupsReducer from './reducers/popups/'\n\nconst middlewares = [ReduxThunk]\n\nconst shouldLog = false\n\nif (process.env.NODE_ENV === 'development' && shouldLog) {\n    middlewares.push(logger)\n}\n\nconst rootReducer = combineReducers({\n    list: listReducer,\n    filter: filterReducer,\n    pager: pagerReducer,\n    currentItem: currentItemReducer,\n    currentUser: currentUserReducer,\n    popups: popupsReducer,\n    form: formReducer,\n})\n\nexport default createStore(rootReducer, applyMiddleware(...middlewares))\n","import Spacing from 'material-ui/styles/spacing'\nimport getMuiTheme from 'material-ui/styles/getMuiTheme'\n\nimport {\n    blue100,\n    blue500,\n    blue700,\n    grey100,\n    grey400,\n    orange500,\n    orangeA200,\n    darkBlack,\n    white,\n} from 'material-ui/styles/colors'\nimport { fade } from 'material-ui/utils/colorManipulator'\n\nconst theme = {\n    spacing: Spacing,\n    fontFamily: 'Roboto, sans-serif',\n    palette: {\n        primary1Color: blue500,\n        primary2Color: blue700,\n        primary3Color: blue100,\n        accent1Color: orange500,\n        accent2Color: grey100,\n        accent3Color: orangeA200,\n        textColor: darkBlack,\n        alternateTextColor: white,\n        canvasColor: white,\n        borderColor: grey400,\n        disabledColor: fade(darkBlack, 0.3),\n    },\n}\n\nconst muiTheme = getMuiTheme(theme)\n\nexport default Object.assign({}, muiTheme, {\n    forms: {\n        minWidth: 350,\n        maxWidth: 750,\n    },\n    formInput: {\n        fontWeight: 100,\n    },\n})\n","import React, { Component } from 'react'\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\nimport PropTypes from 'prop-types'\nimport theme from '../theme'\n\n/**\n * Component that adds d2 to the context and applies the dhis2 theme\n * @param {Object} props\n * @param {Object} props.d2 - The d2 instance to add to the context of children\n * @class\n */\nclass AppWithD2ContextAndTheme extends Component {\n    getChildContext = () => ({\n        d2: this.props.d2,\n    })\n\n    render = () => (\n        <MuiThemeProvider muiTheme={theme}>\n            {this.props.children}\n        </MuiThemeProvider>\n    )\n}\n\nAppWithD2ContextAndTheme.childContextTypes = {\n    d2: PropTypes.object,\n}\n\nAppWithD2ContextAndTheme.propTypes = {\n    d2: PropTypes.object.isRequired,\n    children: PropTypes.object.isRequired,\n}\n\nexport default AppWithD2ContextAndTheme\n","// LISTS\nexport const USER_LIST = [\n    'displayName',\n    'id',\n    'access',\n    'userCredentials[username,disabled,lastLogin,twoFA]',\n    'teiSearchOrganisationUnits[id,path]',\n]\nexport const USER_GROUP_LIST = [\n    'displayName',\n    'id',\n    'access',\n    'user[displayName,id]',\n    'publicAccess',\n    'userGroupAccesses',\n]\nexport const USER_ROLE_LIST = [...USER_GROUP_LIST, 'description']\n\n// DETAILS\nexport const USER_DETAILS = [\n    ':owner',\n    'access',\n    'displayName',\n    'userGroups',\n    'organisationUnits[id,displayName,path]',\n    'dataViewOrganisationUnits[id,displayName,path]',\n    'userCredentials[id,username,lastLogin,externalAuth,userRoles[id,displayName],cogsDimensionConstraints[id,displayName,dimensionType],catDimensionConstraints[id,displayName,dimensionType],openId,ldapId,disabled]',\n    'teiSearchOrganisationUnits[id,path]',\n    'whatsApp',\n    'facebookMessenger',\n    'skype',\n    'telegram',\n    'twitter',\n]\n\nexport const USER_ROLE_DETAILS = [\n    ':owner',\n    'access',\n    'authorities',\n    'displayName',\n]\n\nexport const USER_GROUP_DETAILS = [':owner', 'access', 'displayName', '!users']\n\nexport const CURRENT_USER_ORG_UNITS_FIELDS = {\n    fields: [\n        'organisationUnits[id,path,displayName,children::isNotEmpty]',\n        'dataViewOrganisationUnits[id,path,displayName,children::isNotEmpty]',\n        'teiSearchOrganisationUnits[id,path,displayName,children::isNotEmpty]',\n    ],\n}\n\nexport const ORG_UNITS_QUERY_CONFIG = {\n    paging: false,\n    // userDataViewFallback: true\n    fields: ['id', 'path', 'displayName', 'children::isNotEmpty', 'ancestors'],\n}\n\nexport const USER_GROUP_QUERY_CONFIG = {\n    paging: false,\n    fields: ['id', 'displayName'],\n}\n\nconst FIELDS = {\n    USER_LIST,\n    USER_GROUP_LIST,\n    USER_ROLE_LIST,\n    USER_DETAILS,\n    USER_GROUP_DETAILS,\n    USER_ROLE_DETAILS,\n}\nexport default FIELDS\n","/**\n * @module utils\n */\n\n/**\n * It is not always clear when d2 will return an array or a ModelCollection instance.\n * This function is used to work with both in the same way.\n * @param {Array|Object} input - Either an array of d2 model instances or a ModelCollection instance\n * @returns {Array} An array of model instances\n * @memberof module:utils\n * @function\n */\nconst asArray = input => {\n    if (!input) {\n        return []\n    }\n    return typeof input.toArray === 'function' ? input.toArray() : input\n}\n\nexport default asArray\n","/**\n * Helper function for form components (UserForm, GroupForm, RoleForm).\n * This function can receive a string representation of a property path, i.e. 'userCredentials.username'\n * and an object to pick from and will return the nested property's value.\n * This works recursively so it can be as many levels deep as required.\n * @param {String} propertyPathStr - String representation of a property path\n * @param {*} parent - The base object to pick from\n * @returns {*} The value of the nested property\n * @memberof module:utils\n * @function\n */\nconst getNestedProp = (propertyPathStr, parent) => {\n    return propertyPathStr.split('.').reduce((currentLevel, propName) => {\n        return currentLevel && currentLevel[propName]\n            ? currentLevel[propName]\n            : null\n    }, parent)\n}\n\nexport default getNestedProp\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst style = {\n    clear: 'both',\n    color: '#c33017',\n    backgroundColor: '#ffe3de',\n    padding: '1.5rem 1.5rem 1rem',\n    fontSize: '1rem',\n    width: '100%',\n}\n\n/**\n * A simple component that can display an error message\n * @class\n */\nconst ErrorMessage = ({ introText, errorMessage }) => (\n    <div style={style}>\n        {introText}\n        <pre>{errorMessage}</pre>\n    </div>\n)\n\nErrorMessage.propTypes = {\n    introText: PropTypes.string.isRequired,\n    errorMessage: PropTypes.string.isRequired,\n}\n\nexport default ErrorMessage\n","import i18n from '@dhis2/d2-i18n'\n/**\n * It is preffered to show the error message from the server it is a 401-499 code\n * @param {Object} error - The error object\n * @param {Number} error.httpStatusCode - The error status code\n * @param {Number} error.message - The error message\n * @param {String} fallbackMsg - The message to show in case the actual message is\n * likely to be useless for normal users\n * @memberof module:utils\n * @function\n */\n\nconst createHumanErrorMessage = (\n    { message, messages, httpStatusCode },\n    fallbackMsg\n) => {\n    const fallback =\n        fallbackMsg ||\n        i18n.t('Something went wrong when processing your request.')\n    const useMessage =\n        (httpStatusCode && httpStatusCode >= 400 && httpStatusCode < 500) ||\n        (!httpStatusCode && messages && messages.length > 0)\n\n    if (!message && messages && messages.length > 0) {\n        message = messages.map(({ message }) => message).join(', ')\n    }\n\n    return useMessage ? message : fallback\n}\n\nexport default createHumanErrorMessage\n","import React, { Component } from 'react'\nimport GroupEditor from 'd2-ui/lib/group-editor/GroupEditor.component'\nimport Store from 'd2-ui/lib/store/Store'\nimport PropTypes from 'prop-types'\nimport { red500 } from 'material-ui/styles/colors'\nimport TextField from 'material-ui/TextField/TextField'\nimport Heading from 'd2-ui/lib/headings/Heading.component'\nimport asArray from '../utils/asArray'\nimport ErrorMessage from './ErrorMessage'\nimport createHumanErrorMessage from '../utils/createHumanErrorMessage'\nimport i18n from '@dhis2/d2-i18n'\n\nconst styles = {\n    outerWrap: {\n        paddingTop: 0,\n        paddingBottom: '2.5rem',\n    },\n    headerWrap: {\n        display: 'flex',\n    },\n    headerSpacer: {\n        flex: '0 0 120px',\n    },\n    header: {\n        flex: '1 0 120px',\n        paddingBottom: 0,\n        fontSize: '1.2rem',\n    },\n    error: {\n        color: red500,\n    },\n    errorText: {\n        fontSize: '0.8rem',\n        marginLeft: '0.8rem',\n    },\n}\n\n/**\n * A component that renders the d2-ui GroupEditor with a search input above it.\n * It can fetch its own items and has been made compliant with redux form.\n * On update it can return an array of either IDs or d2-models\n */\nclass SearchableGroupEditor extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            itemStore: Store.create(),\n            assignedItemStore: Store.create(),\n            filterText: '',\n            fetchErrorMsg: null,\n        }\n    }\n\n    async componentDidMount() {\n        try {\n            const availableItems = await this.props.availableItemsQuery()\n            this.availableItemsReceivedHandler(availableItems)\n        } catch (error) {\n            const fetchErrorMsg = createHumanErrorMessage(\n                error,\n                i18n.t('Could not load available items')\n            )\n            this.setState({ fetchErrorMsg })\n        }\n    }\n\n    availableItemsReceivedHandler = response => {\n        // On update we want to be able to return an array of IDs or models\n        const { initiallyAssignedItems, returnModelsOnUpdate } = this.props\n        const { itemStore, assignedItemStore } = this.state\n\n        if (returnModelsOnUpdate) {\n            this.modelLookup = new Map()\n        }\n\n        const assignedItems = asArray(initiallyAssignedItems).map(\n            ({ id }) => id\n        )\n        const availableItems = asArray(response).map(item => {\n            if (returnModelsOnUpdate) {\n                this.modelLookup.set(item.id, item)\n            }\n            const text = item.displayName || item.name\n            return {\n                value: item.id,\n                text: text,\n            }\n        })\n\n        itemStore.setState(availableItems)\n        assignedItemStore.setState(assignedItems)\n    }\n\n    onAssignItems = items => {\n        const { assignedItemStore } = this.state\n        const assigned = assignedItemStore.state.concat(items)\n\n        return this.update(assigned)\n    }\n\n    onRemoveItems = items => {\n        const { assignedItemStore } = this.state\n        const assigned = assignedItemStore.state.filter(\n            item => items.indexOf(item) === -1\n        )\n\n        return this.update(assigned)\n    }\n\n    update(assignedItemIds) {\n        const { onChange, returnModelsOnUpdate, onBlur } = this.props\n        const { assignedItemStore } = this.state\n        const assignedItems = returnModelsOnUpdate\n            ? assignedItemIds.map(id => this.modelLookup.get(id))\n            : assignedItemIds\n\n        assignedItemStore.setState(assignedItemIds)\n        onChange(assignedItems)\n        // Also call onBlur if this is available. In a redux-form the component will be 'touched' by it\n        onBlur && onBlur()\n        return Promise.resolve()\n    }\n\n    updateFilterText = event => {\n        this.setState({ filterText: event.target.value })\n    }\n\n    renderHeader() {\n        const {\n            availableItemsHeader,\n            assignedItemsHeader,\n            errorText,\n        } = this.props\n        const assignedStyle = errorText\n            ? { ...styles.header, ...styles.error }\n            : styles.header\n\n        return (\n            <div style={styles.headerWrap}>\n                <Heading level={4} style={styles.header}>\n                    {availableItemsHeader}\n                </Heading>\n                <div style={styles.headerSpacer} />\n                <Heading level={4} style={assignedStyle}>\n                    {assignedItemsHeader}\n                    {errorText ? (\n                        <span style={styles.errorText}>{errorText}</span>\n                    ) : null}\n                </Heading>\n            </div>\n        )\n    }\n\n    renderSearchInput() {\n        return (\n            <TextField\n                fullWidth={true}\n                type=\"search\"\n                onChange={this.updateFilterText}\n                value={this.state.filterText}\n                floatingLabelText={i18n.t('Filter')}\n                hintText={i18n.t('Filter available and selected items')}\n                style={{ marginTop: '-16px' }}\n            />\n        )\n    }\n    renderGroupEditor() {\n        const {\n            itemStore,\n            assignedItemStore,\n            filterText,\n            fetchErrorMsg,\n        } = this.state\n\n        if (fetchErrorMsg) {\n            const introText = i18n.t(\n                'There was a problem displaying the GroupEditor'\n            )\n            return (\n                <ErrorMessage\n                    introText={introText}\n                    errorMessage={fetchErrorMsg}\n                />\n            )\n        }\n\n        return (\n            <GroupEditor\n                itemStore={itemStore}\n                assignedItemStore={assignedItemStore}\n                onAssignItems={this.onAssignItems}\n                onRemoveItems={this.onRemoveItems}\n                height={250}\n                filterText={filterText}\n            />\n        )\n    }\n\n    render() {\n        return (\n            <div style={styles.outerWrap}>\n                {this.renderHeader()}\n                {this.renderSearchInput()}\n                {this.renderGroupEditor()}\n            </div>\n        )\n    }\n}\n\nSearchableGroupEditor.propTypes = {\n    availableItemsQuery: PropTypes.func.isRequired,\n    initiallyAssignedItems: PropTypes.oneOfType([\n        PropTypes.object.isRequired,\n        PropTypes.array.isRequired,\n    ]),\n    onChange: PropTypes.func.isRequired,\n    availableItemsHeader: PropTypes.string.isRequired,\n    assignedItemsHeader: PropTypes.string.isRequired,\n    returnModelsOnUpdate: PropTypes.bool,\n    errorText: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n    onBlur: PropTypes.func,\n}\n\nexport default SearchableGroupEditor\n","import React, { Component } from 'react'\nimport CircularProgress from 'material-ui/CircularProgress'\nimport AutoComplete from 'material-ui/AutoComplete'\nimport MenuItem from 'material-ui/MenuItem'\nimport { orange500, blue500, red500 } from 'material-ui/styles/colors'\nimport i18n from '@dhis2/d2-i18n'\nimport makeTrashable from 'trashable'\nimport createHumanErrorMessage from '../utils/createHumanErrorMessage'\nimport debounce from 'lodash.debounce'\nimport PropTypes from 'prop-types'\nimport asArray from '../utils/asArray'\n\nconst styles = {\n    error: {\n        info: {\n            color: blue500,\n        },\n        warning: {\n            color: orange500,\n        },\n        error: {\n            color: red500,\n        },\n    },\n}\n\nconst loaderDataSource = [\n    {\n        text: 'loading...',\n        value: (\n            <MenuItem style={{ textAlign: 'center' }}>\n                <CircularProgress style={{ marginTop: '12px' }} />\n            </MenuItem>\n        ),\n    },\n]\n\nconst baseState = {\n    filteredItems: [],\n    searchWarning: null,\n    errorStyle: styles.error.info,\n}\n\nconst getDefaultAutoCompleteProps = () => ({\n    floatingLabelText: i18n.t('Search'),\n    hintText: i18n.t('Enter search term'),\n    fullWidth: true,\n    type: 'search',\n    filter: () => true,\n})\n\n/**\n * Generic component that renders a MUI AutoComplete. It can execute an async query and show a list of results.\n * Which query to execute and what happens when a list item is clicked should be defined in the parent component.\n */\nclass AsyncAutoComplete extends Component {\n    constructor(props) {\n        super(props)\n        const debounceTime = props.queryDebounceTime || 375\n        this.state = { ...baseState }\n        this.getItems = debounce(this.getItems, debounceTime)\n        this.trashableQuery = null\n    }\n\n    componentWillUnmount() {\n        this.trashableQuery && this.trashableQuery.trash()\n    }\n\n    onAutoCompleteChange = value => {\n        this.setState({ autoCompleteText: value })\n        this.getItems(value)\n    }\n\n    getItems = async value => {\n        const { minCharLength, query, queryParam } = this.props\n\n        if (!value || value.length < minCharLength) {\n            // Don't query if too few characters were entered\n            const searchWarning = value\n                ? i18n.t(\n                      'Please enter at least {{ minCharCount }} characters',\n                      {\n                          minCharCount: minCharLength,\n                      }\n                  )\n                : null\n            this.setState({ ...baseState, searchWarning })\n        } else {\n            // Set loading state\n            this.setState({ ...baseState, filteredItems: loaderDataSource })\n\n            // Then query\n            this.trashableQuery = makeTrashable(query(value, queryParam))\n            try {\n                let filteredResults = await this.trashableQuery\n                filteredResults = asArray(filteredResults)\n                if (filteredResults.length > 0) {\n                    // Display results if any were returned\n                    const filteredItems = filteredResults.map(model => ({\n                        text: model.displayName,\n                        value: model,\n                    }))\n                    this.setState({\n                        ...baseState,\n                        filteredItems: filteredItems,\n                    })\n                } else {\n                    // Otherwise show warning\n                    this.setState({\n                        ...baseState,\n                        errorStyle: styles.error.warning,\n                        searchWarning: i18n.t('No matches found'),\n                    })\n                }\n            } catch (error) {\n                // Show error on input\n                this.setState({\n                    ...baseState,\n                    errorStyle: styles.error.warning,\n                    searchWarning: createHumanErrorMessage(\n                        error,\n                        i18n.t(\n                            'There was a problem retreiving your search results'\n                        )\n                    ),\n                })\n            }\n        }\n    }\n\n    onItemSelect = dataSourceItem => {\n        const { selectHandler } = this.props\n        this.setState({ autoCompleteText: '' })\n        selectHandler(dataSourceItem)\n    }\n\n    render() {\n        const { autoCompleteProps } = this.props\n        const mergedAutoCompleteProps = {\n            ...getDefaultAutoCompleteProps(),\n            ...autoCompleteProps,\n        }\n        const {\n            filteredItems,\n            searchWarning,\n            errorStyle,\n            autoCompleteText,\n        } = this.state\n        const marginBottom = searchWarning ? 0 : 28\n        const mergedProps = {\n            ...mergedAutoCompleteProps,\n            onUpdateInput: this.onAutoCompleteChange,\n            onNewRequest: this.onItemSelect,\n            searchText: autoCompleteText,\n            dataSource: filteredItems,\n            errorText: searchWarning,\n            errorStyle: errorStyle,\n            floatingLabelShrinkStyle: errorStyle,\n            style: { marginBottom: marginBottom },\n            menuStyle: { maxHeight: '600px' },\n        }\n\n        return <AutoComplete {...mergedProps} />\n    }\n}\n\nAsyncAutoComplete.propTypes = {\n    queryDebounceTime: PropTypes.number,\n    minCharLength: PropTypes.number,\n    query: PropTypes.func.isRequired,\n    queryParam: PropTypes.any,\n    selectHandler: PropTypes.func.isRequired,\n    autoCompleteProps: PropTypes.object,\n}\n\nAsyncAutoComplete.defaultProps = {\n    queryDebounceTime: 375,\n    minCharLength: 3,\n}\n\nexport default AsyncAutoComplete\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport OrgUnitTreeMultipleRoots from 'd2-ui/lib/org-unit-tree/OrgUnitTreeMultipleRoots.component'\nimport Paper from 'material-ui/Paper'\nimport CircularProgress from 'material-ui/CircularProgress'\nimport { red500 } from 'material-ui/styles/colors'\nimport AsyncAutoComplete from './AsyncAutoComplete'\nimport RaisedButton from 'material-ui/RaisedButton'\nimport Heading from 'd2-ui/lib/headings/Heading.component'\nimport i18n from '@dhis2/d2-i18n'\nimport defer from 'lodash.defer'\nimport PropTypes from 'prop-types'\nimport api from '../api'\nimport { orgUnitRootsSelector } from '../selectors'\n\nconst styles = {\n    wrapper: {\n        minHeight: '300px',\n        maxHeight: '60vh',\n        position: 'relative',\n    },\n    scrollBox: {\n        position: 'relative',\n        marginTop: '-12px',\n        maxHeight: 'calc(60vh - 154px)',\n        minHeight: 'calc(300px - 154px)',\n        overflowY: 'auto',\n        paddingTop: '8px',\n        paddingBottom: '8px',\n        borderRadius: '2px',\n    },\n    loader: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n    },\n    buttonStrip: {\n        paddingTop: '16px',\n        height: '36px',\n    },\n    buttonMargin: {\n        marginRight: '8px',\n    },\n    header: {\n        paddingBottom: 0,\n        fontSize: '1.2rem',\n        marginBottom: '-16px',\n    },\n    headerError: {\n        color: red500,\n    },\n    errorText: {\n        fontSize: '0.8rem',\n        marginLeft: '0.8rem',\n    },\n}\n\n/**\n * Renders a d2-ui OrgUnitTreeMultipleRoots with an asyncAutoComplete above it and a button strip below\n * This component will only show buttons if you pass it a confirmSelection (func) property\n * It has been made compliant with redux form\n */\nclass SearchableOrgUnitTree extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            roots: null,\n            selectedOrgUnits: [...props.selectedOrgUnits],\n            orgUnitFilter: null,\n            initiallyExpanded: this.getInitiallyExpandedItems(\n                props.selectedOrgUnits\n            ),\n        }\n    }\n\n    getInitiallyExpandedItems(orgUnits) {\n        return orgUnits.reduce((expandedUnits, orgUnit) => {\n            const strippedPath = this.removeLastPathSegment(orgUnit)\n            if (strippedPath) {\n                expandedUnits.push(strippedPath)\n            }\n            return expandedUnits\n        }, [])\n    }\n\n    getIndexOfOrgUnit(orgUnit) {\n        const { selectedOrgUnits } = this.state\n        const selectedUnit = selectedOrgUnits.find(\n            unit => unit.path === orgUnit.path\n        )\n        return selectedOrgUnits.indexOf(selectedUnit)\n    }\n\n    removeLastPathSegment({ path }) {\n        return path.substr(0, path.lastIndexOf('/'))\n    }\n\n    update(selectedOrgUnits, initiallyExpanded) {\n        const { onChange, onBlur } = this.props\n        const updateObject = initiallyExpanded\n            ? { selectedOrgUnits, initiallyExpanded }\n            : { selectedOrgUnits }\n\n        if (onChange) {\n            onChange(selectedOrgUnits.map(unit => unit.id))\n        }\n\n        this.setState(updateObject)\n        // Also call onBlur if this is available. In a redux-form the component will be 'touched' by it\n        onBlur && onBlur()\n    }\n\n    toggleSelectedOrgUnits = (_, orgUnit) => {\n        const { selectedOrgUnits } = this.state\n        const orgUnitIndex = this.getIndexOfOrgUnit(orgUnit)\n        const newOrgUnits =\n            orgUnitIndex === -1\n                ? [...selectedOrgUnits, orgUnit]\n                : [\n                      ...selectedOrgUnits.slice(0, orgUnitIndex),\n                      ...selectedOrgUnits.slice(orgUnitIndex + 1),\n                  ]\n\n        this.update(newOrgUnits, [])\n    }\n\n    selectAndShowFilteredOrgUnit = dataSourceItem => {\n        const orgUnit = dataSourceItem.value\n        const { selectedOrgUnits } = this.state\n        const initiallyExpanded = [this.removeLastPathSegment(orgUnit)]\n        const newOrgUnits = [...selectedOrgUnits, orgUnit]\n\n        this.update(newOrgUnits, initiallyExpanded)\n    }\n\n    clearSelection = () => {\n        this.update([])\n        defer(this.applySelection)\n    }\n\n    applySelection = () => {\n        const { selectedOrgUnits } = this.state\n        const { confirmSelection } = this.props\n        confirmSelection(selectedOrgUnits)\n    }\n\n    render() {\n        const {\n            selectedOrgUnits,\n            initiallyExpanded,\n            orgUnitFilter,\n        } = this.state\n        const {\n            roots,\n            confirmSelection,\n            cancel,\n            orgUnitType,\n            headerText,\n            wrapperStyle,\n            errorText,\n        } = this.props\n        const selected = selectedOrgUnits.map(unit => unit.path)\n        const autoCompleteProps = {\n            floatingLabelText: i18n.t('Search'),\n            hintText: i18n.t('Enter search term'),\n            fullWidth: true,\n        }\n        const headerStyle = errorText\n            ? { ...styles.header, ...styles.headerError }\n            : styles.header\n\n        return (\n            <div style={{ ...styles.wrapper, ...wrapperStyle }}>\n                {headerText ? (\n                    <Heading level={4} style={headerStyle}>\n                        {headerText}\n                        {errorText && (\n                            <span style={styles.errorText}>{errorText}</span>\n                        )}\n                    </Heading>\n                ) : null}\n                <AsyncAutoComplete\n                    autoCompleteProps={autoCompleteProps}\n                    query={api.queryOrgUnits}\n                    queryParam={orgUnitType}\n                    minCharLength={2}\n                    queryDebounceTime={375}\n                    selectHandler={this.selectAndShowFilteredOrgUnit}\n                />\n                <Paper style={styles.scrollBox}>\n                    {!roots ? (\n                        <CircularProgress style={styles.loader} />\n                    ) : (\n                        <OrgUnitTreeMultipleRoots\n                            roots={roots}\n                            onSelectClick={this.toggleSelectedOrgUnits}\n                            selected={selected}\n                            initiallyExpanded={initiallyExpanded}\n                            orgUnitsPathsToInclude={orgUnitFilter}\n                        />\n                    )}\n                </Paper>\n                {confirmSelection ? (\n                    <div style={styles.buttonStrip}>\n                        <RaisedButton\n                            label={i18n.t('Apply')}\n                            primary={true}\n                            style={styles.buttonMargin}\n                            onClick={this.applySelection}\n                            disabled={!roots}\n                        />\n                        <RaisedButton\n                            label={i18n.t('Clear all')}\n                            secondary={true}\n                            style={styles.buttonMargin}\n                            onClick={this.clearSelection}\n                            disabled={!roots}\n                        />\n                        <RaisedButton\n                            onClick={cancel}\n                            label={i18n.t('Cancel')}\n                        />\n                    </div>\n                ) : null}\n            </div>\n        )\n    }\n}\n\nSearchableOrgUnitTree.propTypes = {\n    roots: PropTypes.array,\n    selectedOrgUnits: PropTypes.array.isRequired,\n    orgUnitType: PropTypes.string.isRequired,\n    errorText: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    headerText: PropTypes.string,\n    wrapperStyle: PropTypes.object,\n    confirmSelection: PropTypes.func,\n    onChange: PropTypes.func,\n    onBlur: PropTypes.func,\n    cancel: PropTypes.func,\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        roots: orgUnitRootsSelector(props.orgUnitType, state.currentUser),\n    }\n}\n\nexport default connect(mapStateToProps)(SearchableOrgUnitTree)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { TextField, Checkbox } from 'material-ui'\n\n/**\n * Renders a TextField and Checkbox above the AuthoritySections.\n * The actual filtering is being done in the FilteredAuthoritySections component which uses `utils/filterAuthorities`\n * However, this is done via the AuthorityEditor component\n */\nclass AuthorityFilter extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            searchStr: '',\n            selectedOnly: false,\n        }\n    }\n\n    onSelectedOnlyChange = (_, value) => {\n        this.setState({ selectedOnly: value })\n        this.props.onFilterChange(this.state.searchStr, value)\n    }\n\n    onSearchStrChange = event => {\n        const value = event.target.value\n        this.setState({ searchStr: value })\n        this.props.onFilterChange(value, this.state.selectedOnly)\n    }\n\n    render() {\n        return (\n            <div className=\"authority-editor__filterbar\">\n                <TextField\n                    className=\"authority-editor__filter-text-input search-input\"\n                    floatingLabelText={i18n.t('Search')}\n                    onChange={this.onSearchStrChange}\n                    type=\"search\"\n                />\n                <Checkbox\n                    className=\"authority-editor__filter-checkbox\"\n                    label={i18n.t('Selected authorities only')}\n                    checked={this.state.selectedOnly}\n                    onCheck={this.onSelectedOnlyChange}\n                    style={{ width: '300px' }}\n                />\n            </div>\n        )\n    }\n}\n\nAuthorityFilter.propTypes = {\n    onFilterChange: PropTypes.func.isRequired,\n}\n\nexport default AuthorityFilter\n","/* eslint-disable max-params */\n\n/** @module AuthorityEditor/utils/filterAuthorities */\n\nconst matchesSearchStr = (item, searchChunks) => {\n    if (!searchChunks) {\n        return true\n    }\n    const strToMatch = item.name.toLowerCase()\n\n    return searchChunks.some(chunk => {\n        // Ignore single characters when there are multiple chunks\n        // because this makes the results list grow like crazy\n        // i.e. this would be like the user typing \"analytics t\" and\n        // this function returning true for all matches on \"t\"\n        if (chunk.length <= 1 && searchChunks.length > 1) {\n            return false\n        }\n        return strToMatch.indexOf(chunk) > -1\n    })\n}\n\nconst matchesSelectedSetting = (item, selectedOnly, lookup) => {\n    if (!selectedOnly) {\n        return true\n    }\n\n    if (item.items && item.items.length) {\n        return item.items.some(subItem => lookup.get(subItem.id))\n    } else {\n        return Boolean(lookup.get(item.id))\n    }\n}\n\n/**\n * Filters a list of all available authorities based on a search chunks and a selectedOnly flag\n * @param {Object} allAuthorities - A nested object in which all authorities have been grouped in a logical way\n * @param {Object} selectedItemsLookup - A lookup Map that can be used for quickly filtering selected authorities\n * @param {Array} searchChunks - A search string that has been split into an array by spaces\n * @param {Boolean} selectedOnly - Flag for only allowing selected items\n * @returns {Object} An object with the same structure as `allAuthorities` but containing filtered arrays of authorities\n */\nconst filterAuthorities = (\n    allAuthorities,\n    selectedItemsLookup,\n    searchChunks,\n    selectedOnly\n) => {\n    if (!searchChunks && !selectedOnly) {\n        return allAuthorities\n    }\n    return Object.keys(allAuthorities).reduce((filtered, key) => {\n        const section = allAuthorities[key]\n        const filteredItems = section.items.filter(item => {\n            const allowedBySearchStr = matchesSearchStr(item, searchChunks)\n            const allowedBySelectedSetting = matchesSelectedSetting(\n                item,\n                selectedOnly,\n                selectedItemsLookup\n            )\n            return allowedBySearchStr && allowedBySelectedSetting\n        })\n        filtered[key] = { ...section, items: filteredItems }\n        return filtered\n    }, {})\n}\n\nexport default filterAuthorities\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Highlighter from 'react-highlight-words'\n\n/**\n * Will return either a string or a nested element with spans and marks that are highlighted\n * depending on the presence of searchChunks\n * @param {Object} props - The component props\n * @param {String} props.text - The text to display\n * @param {Array} props.searchChunks - The searchChunks to highlight in the text\n * @class\n */\nconst HighlightableText = ({ text, searchChunks }) => {\n    // If there is nothing to highlight, return the label text as it is\n    if (!searchChunks) {\n        return text\n    }\n\n    // Otherwise return a highlighted label text\n    return (\n        <Highlighter\n            highlightClassName=\"authority-editor__search-highlight\"\n            searchWords={searchChunks}\n            autoEscape={true}\n            textToHighlight={text}\n        />\n    )\n}\n\nHighlightableText.propTypes = {\n    text: PropTypes.string,\n    searchChunks: PropTypes.array,\n}\n\nexport default HighlightableText\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Checkbox } from 'material-ui'\nimport HighlightableText from './HighlightableText'\n\n/**\n * Renders a single authority cell. This can be an empty cell, or a checkbox with or without a label.\n * If label and searchChunks are present, the label text will be highlighted.\n * Depending on state this checkbox can be disabled or selected.\n */\nclass AuthorityItem extends Component {\n    onChecked = (_, value) => {\n        const {\n            authSubject: { id },\n            onCheckedCallBack,\n        } = this.props\n        onCheckedCallBack([id], value)\n    }\n\n    render() {\n        const { authSubject, withLabel, disabled } = this.props\n        const { searchChunks } = this.context\n        const { name, empty, implicit } = authSubject\n        const baseClassName = 'authority-editor__auth-checkbox'\n        const className = withLabel\n            ? baseClassName\n            : `${baseClassName}--without-label`\n        const label = withLabel ? (\n            <HighlightableText text={name} searchChunks={searchChunks} />\n        ) : (\n            ''\n        )\n\n        return (\n            <td>\n                {!empty ? (\n                    <Checkbox\n                        onCheck={this.onChecked}\n                        label={label}\n                        className={className}\n                        checked={this.props.selected || Boolean(implicit)}\n                        disabled={implicit || disabled}\n                    />\n                ) : (\n                    <div className=\"authority-editor__empty-cell\" />\n                )}\n            </td>\n        )\n    }\n}\n\nAuthorityItem.propTypes = {\n    authSubject: PropTypes.shape({\n        name: PropTypes.string,\n        id: PropTypes.string,\n        empty: PropTypes.bool,\n        implicit: PropTypes.bool,\n    }).isRequired,\n    withLabel: PropTypes.bool.isRequired,\n    onCheckedCallBack: PropTypes.func.isRequired,\n    selected: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool,\n}\n\nAuthorityItem.contextTypes = {\n    searchChunks: PropTypes.array,\n}\n\nexport default AuthorityItem\n","import i18n from '@dhis2/d2-i18n'\n\nconst createNameLookup = () => {\n    return new Map([\n        ['ALL', i18n.t('All (Full authority)')],\n        ['F_ANALYTICSTABLEHOOK', i18n.t('Analytics Table Hook')],\n        ['F_ATTRIBUTE', i18n.t('Attribute')],\n        ['F_CATEGORY_COMBO', i18n.t('Category Combo')],\n        ['F_CATEGORY', i18n.t('Category')],\n        ['F_CATEGORY_OPTION', i18n.t('Category Option')],\n        ['F_CATEGORY_OPTION_GROUP', i18n.t('Category Option Group')],\n        ['F_CATEGORY_OPTION_GROUP_SET', i18n.t('Category Option Group Set')],\n        ['F_COLOR_SET', i18n.t('Color Set')],\n        ['F_CONSTANT', i18n.t('Constant')],\n        ['F_DASHBOARD', i18n.t('Dashboard')],\n        ['F_DATAELEMENTGROUPSET', i18n.t('Data Element Group Sets')],\n        ['F_DATAELEMENTGROUP', i18n.t('Data Element Groups')],\n        ['F_DATAELEMENT', i18n.t('Data Element')],\n        ['F_DATAELEMENT_MINMAX', i18n.t('Min/max rule')],\n        ['F_DATASET', i18n.t('Data Set')],\n        ['F_DATAVALUE', i18n.t('Data Value')],\n        ['F_DOCUMENT', i18n.t('Document')],\n        ['F_EVENTCHART', i18n.t('Event Chart')],\n        ['F_EVENTREPORT', i18n.t('Event Report')],\n        ['F_EXTERNAL_MAP_LAYER', i18n.t('External Map Layer')],\n        ['F_INDICATORGROUPSET', i18n.t('Indicator Group Sets')],\n        ['F_INDICATORGROUP', i18n.t('Indicator Group')],\n        ['F_INDICATORTYPE', i18n.t('Indicator Type')],\n        ['F_INDICATOR', i18n.t('Indicator')],\n        ['F_LEGEND_SET', i18n.t('Legend Set')],\n        ['F_MAP', i18n.t('Map')],\n        ['F_MINMAX_DATAELEMENT', i18n.t('Min-Max Data Element')],\n        ['F_OPTIONGROUPSET', i18n.t('Option Group Set')],\n        ['F_OPTIONGROUP', i18n.t('Option Group')],\n        ['F_OPTIONSET', i18n.t('Option Set')],\n        ['F_ORGANISATIONUNIT', i18n.t('Organisation Unit')],\n        ['F_ORGUNITGROUPSET', i18n.t('Organisation Unit Group Set')],\n        ['F_ORGUNITGROUP', i18n.t('Organisation Unit Group')],\n        ['F_PREDICTOR', i18n.t('Predictor')],\n        ['F_PROGRAMSTAGE', i18n.t('Program Stage')],\n        ['F_PROGRAM', i18n.t('Program')],\n        ['F_PROGRAM_INDICATOR', i18n.t('Program Indicator')],\n        ['F_PROGRAM_INDICATOR_GROUP', i18n.t('Program Indicator Group')],\n        ['F_PROGRAM_RULE', i18n.t('Program Rule')],\n        [\n            'F_PROGRAM_TRACKED_ENTITY_ATTRIBUTE_GROUP',\n            i18n.t('Program Tracked Entity Attribute Group'),\n        ],\n        ['F_PUSH_ANALYSIS', i18n.t('Push Analysis')],\n        ['F_RELATIONSHIPTYPE', i18n.t('Relationship Type')],\n        ['F_REPORT', i18n.t('Report')],\n        ['F_SECTION', i18n.t('Section')],\n        ['F_SQLVIEW', i18n.t('SQL View')],\n        ['F_TRACKED_ENTITY', i18n.t('Tracked Entity')],\n        ['F_TRACKED_ENTITY_ATTRIBUTE', i18n.t('Tracked Entity Attribute')],\n        ['F_TRACKED_ENTITY_DATAVALUE', i18n.t('Tracked Entity Data Value')],\n        ['F_TRACKED_ENTITY_INSTANCE', i18n.t('Tracked Entity Instance')],\n        ['F_USERGROUP', i18n.t('User Group')],\n        ['F_USERROLE', i18n.t('User Role')],\n        ['F_USER', i18n.t('User')],\n        ['F_VALIDATIONRULEGROUP', i18n.t('Validation Rule Group')],\n        ['F_VALIDATIONRULE', i18n.t('Validation Rule')],\n        ['F_PREDICTORGROUP', i18n.t('Data predictor group')],\n        ['F_SKIP_DATA_IMPORT_AUDIT', i18n.t('Skip data import audit')],\n        ['F_VISUALIZATION', i18n.t('Visualization')],\n    ])\n}\n\n// returns cached results after first call\nexport default (() => {\n    let map = null\n    return () => {\n        if (!map) {\n            map = createNameLookup()\n        }\n        return map\n    }\n})()\n","/** @module AuthorityEditor/utils/groupAuthorities */\nimport i18n from '@dhis2/d2-i18n'\nimport startsWith from 'lodash.startswith'\nimport endsWith from 'lodash.endswith'\nimport sortBy from 'lodash.sortby'\nimport getNameLookup from './authorityGroupNames'\n\nconst createEmptyGroupedAuthorities = () => ({\n    metadata: {\n        name: 'Metadata',\n        items: null,\n        headers: [\n            'Name',\n            'Add/Update Public',\n            'Add/Update Private',\n            'Delete',\n            'External access',\n        ],\n    },\n    apps: {\n        name: i18n.t('Apps'),\n        items: null,\n        headers: ['Name'],\n    },\n    tracker: {\n        name: i18n.t('Tracker'),\n        items: null,\n        headers: ['Name'],\n    },\n    importExport: {\n        name: i18n.t('Import-Export'),\n        items: null,\n        headers: ['Name'],\n    },\n    system: {\n        name: i18n.t('System'),\n        items: null,\n        headers: ['Name'],\n    },\n})\n\n// The next 3 constants are exported so they can be used by the AuthorityEditor component\n\n// The target object to which the allAuths array will be mapped\nexport const getEmptyGroupedAuthorities = (() => {\n    let emptyGroupedAuthorities = null\n    return () => {\n        if (!emptyGroupedAuthorities) {\n            emptyGroupedAuthorities = createEmptyGroupedAuthorities()\n        }\n        return emptyGroupedAuthorities\n    }\n})()\n\n// Suffixes and prefixes\nexport const PUBLIC_ADD_SUFFIX = '_PUBLIC_ADD'\nexport const PRIVATE_ADD_SUFFIX = '_PRIVATE_ADD'\n\nconst ADD_SUFFIX = '_ADD'\nconst DELETE_SUFFIX = '_DELETE'\nconst EXTERNAL_ACCESS_SUFFIX = '_EXTERNAL'\nconst APP_AUTH_PREFIX = 'M_'\n\n// Suffix groups for lookups and group construction\nconst ALL_METADATA_SUFFIXES = [\n    PUBLIC_ADD_SUFFIX,\n    PRIVATE_ADD_SUFFIX,\n    ADD_SUFFIX,\n    DELETE_SUFFIX,\n    EXTERNAL_ACCESS_SUFFIX,\n]\n\n// Blueprints for creating implicit options and empty cells\nconst EMPTY_GROUP_ITEM = {\n    id: null,\n    empty: true,\n}\nconst IMPLICIT_GROUP_ITEM = {\n    implicit: true,\n}\n\n// Metadata with implicit add and delete\nconst AUTHS_WITH_IMPLICIT_ADD_PRIVATE_AND_DELETE = new Set([\n    'F_DASHBOARD_PUBLIC_ADD',\n    'F_EVENTCHART_PUBLIC_ADD',\n    'F_EVENTREPORT_PUBLIC_ADD',\n    'F_MAP_PUBLIC_ADD',\n    'F_VISUALIZATION_PUBLIC_ADD',\n])\n\nconst AUTHORITY_GROUPS = {\n    tracker: new Set([\n        'F_PROGRAM_DASHBOARD_CONFIG_ADMIN',\n        'F_PROGRAM_ENROLLMENT',\n        'F_PROGRAM_ENROLLMENT_READ',\n        'F_PROGRAM_UNENROLLMENT',\n        'F_TEI_CASCADE_DELETE',\n        'F_TRACKED_ENTITY_DATAVALUE_READ',\n        'F_TRACKED_ENTITY_INSTANCE_SEARCH',\n        'F_TRACKED_ENTITY_INSTANCE_SEARCH_IN_ALL_ORGUNITS',\n        'F_TRACKED_ENTITY_UPDATE',\n        'F_UNCOMPLETE_EVENT',\n        'F_VIEW_EVENT_ANALYTICS',\n        'F_PROGRAM_RULE_MANAGEMENT',\n        'F_ENROLLMENT_CASCADE_DELETE',\n    ]),\n    importExport: new Set([\n        'F_EXPORT_DATA',\n        'F_EXPORT_EVENTS',\n        'F_IMPORT_DATA',\n        'F_IMPORT_EVENTS',\n        'F_IMPORT_GML',\n        'F_METADATA_EXPORT',\n        'F_METADATA_IMPORT',\n        'F_METADATA_MANAGE',\n        'F_SKIP_DATA_IMPORT_AUDIT',\n    ]),\n    system: new Set([\n        'ALL',\n        'F_APPROVE_DATA',\n        'F_APPROVE_DATA_LOWER_LEVELS',\n        'F_ACCEPT_DATA_LOWER_LEVELS',\n        'F_VIEW_UNAPPROVED_DATA',\n        'F_ORGANISATIONUNIT_MOVE',\n        'F_ORGANISATIONUNITLEVEL_UPDATE',\n        'F_RUN_VALIDATION',\n        'F_REPLICATE_USER',\n        'F_USER_VIEW',\n        'F_USERGROUP_MANAGING_RELATIONSHIPS_ADD',\n        'F_USERGROUP_MANAGING_RELATIONSHIPS_VIEW',\n        'F_PERFORM_MAINTENANCE',\n        'F_SCHEDULING_ADMIN',\n        'F_GENERATE_MIN_MAX_VALUES',\n        'F_PREDICTOR_RUN',\n        'F_INSERT_CUSTOM_JS_CSS',\n        'F_SYSTEM_SETTING',\n        'F_SEND_EMAIL',\n        'F_MOBILE_SETTINGS',\n        'F_MOBILE_SENDSMS',\n        'F_OAUTH2_CLIENT_MANAGE',\n    ]),\n}\n\n/**\n * This function receives an array of authorities and reduces this into an object that is grouped into\n * logical sections. This is done in a semi dynamic way by using pre- and suffixes in tandem\n * with hard-coded group definitions\n * @param {Object[]} authorities - The list of authorities that will be transformed\n * @param {string} authorities[].id - The identifier of an authority using UPPER_SNAKE_CASE containing patterns that can be used for grouping.\n * @param {string} authorities[].name - The display name of an authority.\n * @returns {Object} - The grouped authorities object\n */\nconst groupAuthorities = authorities => {\n    // A lookup map that can be used to verify the existence of a particular authority ID in linear time\n    const lookup = authorities.reduce((lookup, auth) => {\n        lookup.set(auth.id, auth)\n        return lookup\n    }, new Map())\n\n    // The initial state of items in emptyGroupedAuthorities is null, which makes the authority sections render a loader\n    // but the accumulator object passed into the reduce function below expects items to be empty arrays\n    const emptyGroupedAuthorities = Object.keys(\n        getEmptyGroupedAuthorities()\n    ).reduce((groupedBase, key) => {\n        groupedBase[key] = { ...getEmptyGroupedAuthorities()[key], items: [] }\n        return groupedBase\n    }, {})\n\n    // Append items to the groupedAuthorities accumulator and return the accumulated object\n    const groupedAuthories = authorities.reduce((groupedAuthorities, auth) => {\n        if (startsWith(auth.id, APP_AUTH_PREFIX)) {\n            // Group under apps\n            groupedAuthorities.apps.items.push(auth)\n            lookup.delete(auth.id)\n        } else if (hasNoGroupSuffix(auth)) {\n            // Group under specified key-value section\n            addToAuthoritySection(auth, groupedAuthorities, lookup)\n        } else {\n            const metadataGroup = createMetadataGroup(auth, lookup)\n\n            if (metadataGroup) {\n                // If any type of metadata group was created add it to the metadata items list\n                groupedAuthorities.metadata.items.push(metadataGroup)\n            } else if (lookup.get(auth.id)) {\n                // If no metadata group was created, we are dealing with and authority which had a metadata suffix,\n                // but actually was not a metadata authority\n                addToAuthoritySection(auth, groupedAuthorities, lookup)\n            }\n        }\n        return groupedAuthorities\n    }, emptyGroupedAuthorities)\n\n    return sortGroupedAuthorities(groupedAuthories)\n}\n\nconst sortGroupedAuthorities = groupedAuthories => {\n    Object.keys(groupedAuthories).forEach(key => {\n        const group = groupedAuthories[key]\n        group.items = sortBy(group.items, 'name')\n    })\n    return groupedAuthories\n}\n\n/**\n * Checks if a given authority contains any group suffixes\n * @param {Object} auth - The authority which ID could contain a group suffix\n * @return {Boolean} - True if no group suffix was found in the auth id\n */\nconst hasNoGroupSuffix = auth => {\n    return !ALL_METADATA_SUFFIXES.some(suffix => endsWith(auth.id, suffix))\n}\n\n/**\n * Receives an authority item and creates an authority metadata group based on suffixes\n * @param {Object} auth - The authority to group\n * @param {Object} suffixes - The list of authority suffixes to check against\n * @param {Object} lookup - The authority lookup map\n * @return {Object} group - A metadata authority group\n */\nconst createMetadataGroup = (auth, lookup) => {\n    // Exit if authority is no longer in the lookup\n    if (!lookup.get(auth.id)) {\n        return null\n    }\n\n    // The suffix of the the incoming authority, i.e. \"F_CATEGORY_COMBO_DELETE\" => \"_DELETE\"\n    const authSuffix = ALL_METADATA_SUFFIXES.find(suffix =>\n        endsWith(auth.id, suffix)\n    )\n    // The authority baseName, i.e. \"F_CATEGORY_COMBO_DELETE\" => \"F_CATEGORY_COMBO\"\n    const baseName = auth.id.replace(authSuffix, '')\n\n    // Some metadata authorities distinguish between PUBLIC_ADD and PRIVATE_ADD\n    // Others only have a _ADD version which equates to PUBLIC_ADD and PRIVATE_ADD may be left empty\n    const genericAdd = lookup.get(baseName + ADD_SUFFIX)\n\n    // Some metadata authorities have an external access authority version. If not present this may be left empty\n    const externalAccess = lookup.get(baseName + EXTERNAL_ACCESS_SUFFIX)\n\n    // Some authorities do not have _ADD_PRIVATE and _DELETE siblings in the authority list\n    // however, they do belong to the metadata section. If a role is granted ADD_PUBLIC rights it is also allowed\n    // to ADD_PRIVATE and DELETE implicitly\n    const hasImplicitAddPrivateAndDelete = AUTHS_WITH_IMPLICIT_ADD_PRIVATE_AND_DELETE.has(\n        baseName + PUBLIC_ADD_SUFFIX\n    )\n\n    // Set each authority item for the current authority group\n    const publicAddAuth = genericAdd || lookup.get(baseName + PUBLIC_ADD_SUFFIX)\n    const privateAddAuth = genericAdd\n        ? EMPTY_GROUP_ITEM\n        : hasImplicitAddPrivateAndDelete\n        ? IMPLICIT_GROUP_ITEM\n        : lookup.get(baseName + PRIVATE_ADD_SUFFIX)\n    const deleteAuth = hasImplicitAddPrivateAndDelete\n        ? IMPLICIT_GROUP_ITEM\n        : lookup.get(baseName + DELETE_SUFFIX)\n    const externalAccessAuth = externalAccess || EMPTY_GROUP_ITEM\n\n    // If any of these variable are undefined, the authority in question has an ID with a metadata suffix,\n    // but is not actually a metadata authority. I.e. \"F_ENROLLMENT_CASCADE_DELETE\"\n    if (!publicAddAuth || !privateAddAuth || !deleteAuth) {\n        return null\n    }\n\n    // Delete from lookup to prevent double entries\n    ALL_METADATA_SUFFIXES.forEach(suffix => lookup.delete(baseName + suffix))\n\n    return {\n        name: getNameLookup().get(baseName) || baseName,\n        items: [publicAddAuth, privateAddAuth, deleteAuth, externalAccessAuth],\n    }\n}\n\n/**\n * Assigns non-app, non-metadata authorities to the correct section. If it cannot find a correct section it will be assigned to 'system'\n * @param {Object} auth - The authority to assign to a section\n * @param {Object} groupedAuthorities - The object to assign to\n * @param {Object} lookup - The authority lookup map\n */\nconst addToAuthoritySection = (auth, groupedAuthorities, lookup) => {\n    const groupKey =\n        Object.keys(AUTHORITY_GROUPS).find(groupKey =>\n            AUTHORITY_GROUPS[groupKey].has(auth.id)\n        ) || 'system'\n\n    if (auth.id === 'ALL') {\n        auth.name = getNameLookup().get(auth.id)\n    }\n\n    groupedAuthorities[groupKey].items.push(auth)\n    lookup.delete(auth.id)\n}\n\nexport default groupAuthorities\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport endsWith from 'lodash.endswith'\n\nimport AuthorityItem from './AuthorityItem'\nimport HighlightableText from './HighlightableText'\nimport { PUBLIC_ADD_SUFFIX, PRIVATE_ADD_SUFFIX } from './utils/groupAuthorities'\n\n/**\n * A metadata authority group, which renders an array of 5 table cells.\n * The first cell contains the authority name and subsequent cells are authority-types corresponding to this name\n */\nclass AuthorityGroup extends Component {\n    onAuthGroupChanged = (id, value) => {\n        this.context.onAuthChange(id, value)\n\n        if (this.isPublicAdd(id)) {\n            // Force rerender on entire group when public add changes\n            this.forceUpdate()\n        }\n    }\n\n    isPublicAdd(id) {\n        return endsWith(id, PUBLIC_ADD_SUFFIX)\n    }\n\n    isPrivateAdd(id) {\n        return endsWith(id, PRIVATE_ADD_SUFFIX)\n    }\n\n    render() {\n        const { name, items } = this.props\n        const { shouldSelect, searchChunks } = this.context\n        let publicAddSelected\n\n        return items.reduce(\n            (authGroup, authSubject, index) => {\n                const isPublicAdd = this.isPublicAdd(authSubject.id)\n                const isPrivateAdd = this.isPrivateAdd(authSubject.id)\n                const implicitSelect = Boolean(\n                    publicAddSelected && isPrivateAdd\n                )\n                const selected = shouldSelect(authSubject.id) || implicitSelect\n\n                if (isPublicAdd) {\n                    publicAddSelected = selected\n                }\n\n                authGroup.push(\n                    <AuthorityItem\n                        key={`authitem-${index}`}\n                        authSubject={authSubject}\n                        withLabel={false}\n                        selected={selected}\n                        disabled={implicitSelect}\n                        onCheckedCallBack={this.onAuthGroupChanged}\n                    />\n                )\n                return authGroup\n            },\n            [\n                <td key={'group-label'}>\n                    <HighlightableText\n                        text={name}\n                        searchChunks={searchChunks}\n                    />\n                </td>,\n            ]\n        )\n    }\n}\n\nAuthorityGroup.propTypes = {\n    items: PropTypes.array.isRequired,\n    name: PropTypes.string.isRequired,\n}\n\nAuthorityGroup.contextTypes = {\n    shouldSelect: PropTypes.func.isRequired,\n    onAuthChange: PropTypes.func.isRequired,\n    searchChunks: PropTypes.array,\n}\n\nexport default AuthorityGroup\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Paper, CircularProgress, Checkbox } from 'material-ui'\nimport i18n from '@dhis2/d2-i18n'\nimport Heading from 'd2-ui/lib/headings/Heading.component'\nimport AuthorityGroup from './AuthorityGroup'\nimport AuthorityItem from './AuthorityItem'\n\n/**\n * Renders a logical authority section. Within the section it can either render rows with `AuthorityGroups` for metadata,\n */\nclass AuthoritySection extends Component {\n    onTableHeadCheck = (_event, value) => {\n        const ids = this.props.authSection.items.map(({ id }) => id)\n        this.context.onAuthChange(ids, value)\n    }\n\n    renderAuthRow = (authSubject, index) => {\n        const { shouldSelect, onAuthChange } = this.context\n        return (\n            <tr key={`row-${index}`}>\n                {authSubject.items ? (\n                    <AuthorityGroup\n                        items={authSubject.items}\n                        name={authSubject.name}\n                    />\n                ) : (\n                    <AuthorityItem\n                        authSubject={authSubject}\n                        withLabel={true}\n                        selected={shouldSelect(authSubject.id)}\n                        onCheckedCallBack={onAuthChange}\n                    />\n                )}\n            </tr>\n        )\n    }\n\n    renderLoaderRow() {\n        return (\n            <tr>\n                <td className=\"authority-editor__placeholder-cell\">\n                    <CircularProgress size={24} />\n                </td>\n            </tr>\n        )\n    }\n\n    renderInfoRow(errorMsg) {\n        let className = 'authority-editor__placeholder-cell'\n        let msg = i18n.t('No matches found')\n\n        if (errorMsg) {\n            className += '--error'\n            msg = errorMsg\n        }\n\n        return (\n            <tr>\n                <td className={className}>{msg}</td>\n            </tr>\n        )\n    }\n\n    renderContent(authSection) {\n        if (!authSection.items) {\n            return this.renderLoaderRow()\n        }\n\n        if (typeof authSection.items === 'string') {\n            return this.renderInfoRow(authSection.items)\n        }\n\n        if (authSection.items.length === 0) {\n            return this.renderInfoRow()\n        }\n\n        return authSection.items.map(this.renderAuthRow)\n    }\n\n    renderTableHead({ headers, name, items }) {\n        const allItemsSelected =\n            name !== 'Metadata' &&\n            Array.isArray(items) &&\n            items.length > 0 &&\n            items.every(({ id }) => this.context.shouldSelect(id))\n\n        return (\n            <thead>\n                <tr>\n                    {headers.map((header, index) => (\n                        <th key={`header-${index}`}>\n                            {name !== 'Metadata' && index === 0 ? (\n                                <Checkbox\n                                    className=\"authority-editor__auth-checkbox\"\n                                    label={header}\n                                    onCheck={this.onTableHeadCheck}\n                                    checked={allItemsSelected}\n                                />\n                            ) : (\n                                header\n                            )}\n                        </th>\n                    ))}\n                </tr>\n            </thead>\n        )\n    }\n\n    render() {\n        const { sectionKey, authSection } = this.props\n        let wrapperClassName = `authority-editor__auth-group ${sectionKey}`\n        if (authSection.items && authSection.items.length > 11) {\n            wrapperClassName += ' scrollable'\n        }\n\n        let tableClassName = 'authority-editor__auth-group-table'\n        tableClassName += ` columns-${authSection.headers.length}`\n\n        return (\n            <Paper className={wrapperClassName}>\n                <Heading\n                    level={6}\n                    className=\"authority-editor__auth-group-header\"\n                >\n                    {authSection.name}\n                </Heading>\n                <table className={tableClassName}>\n                    {this.renderTableHead(authSection)}\n                    <tbody>{this.renderContent(authSection)}</tbody>\n                </table>\n            </Paper>\n        )\n    }\n}\n\nAuthoritySection.propTypes = {\n    sectionKey: PropTypes.string.isRequired,\n    authSection: PropTypes.object.isRequired,\n}\n\nAuthoritySection.contextTypes = {\n    shouldSelect: PropTypes.func.isRequired,\n    onAuthChange: PropTypes.func.isRequired,\n}\n\nexport default AuthoritySection\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport debounce from 'lodash.debounce'\nimport filterAuthorities from './utils/filterAuthorities'\nimport AuthoritySection from './AuthoritySection'\n\n/**\n * Component responsible for providing the `AuthoritySections` with filtered authority lists.\n */\nclass FilteredAuthoritySections extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            filteredAuthorities: props.allGroupedAuthorities,\n            searchChunks: null,\n        }\n        this.updateFilter = debounce(this.updateFilter, 375)\n    }\n\n    getChildContext() {\n        return {\n            searchChunks: this.state.searchChunks,\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.updateFilteredAuthorities(\n            nextProps.allGroupedAuthorities,\n            null,\n            null\n        )\n    }\n\n    updateFilter(searchStr, selectedOnly) {\n        const { allGroupedAuthorities } = this.props\n        this.updateFilteredAuthorities(\n            allGroupedAuthorities,\n            searchStr,\n            selectedOnly\n        )\n    }\n\n    updateFilteredAuthorities(all, searchStr, selectedOnly) {\n        const { selectedItemsLookup } = this.context\n        const searchChunks = searchStr\n            ? searchStr.toLowerCase().split(' ')\n            : null\n        this.setState({\n            filteredAuthorities: filterAuthorities(\n                all,\n                selectedItemsLookup,\n                searchChunks,\n                selectedOnly\n            ),\n            searchChunks,\n        })\n    }\n\n    render() {\n        const { filteredAuthorities } = this.state\n\n        return (\n            <div className=\"authority-editor__auth-group-wrap\">\n                {Object.keys(filteredAuthorities).map(key => {\n                    return (\n                        <AuthoritySection\n                            key={key}\n                            sectionKey={key}\n                            authSection={filteredAuthorities[key]}\n                        />\n                    )\n                })}\n            </div>\n        )\n    }\n}\n\nFilteredAuthoritySections.propTypes = {\n    allGroupedAuthorities: PropTypes.object,\n}\n\nFilteredAuthoritySections.contextTypes = {\n    shouldSelect: PropTypes.func.isRequired,\n    onAuthChange: PropTypes.func.isRequired,\n    selectedItemsLookup: PropTypes.object.isRequired,\n}\nFilteredAuthoritySections.childContextTypes = {\n    searchChunks: PropTypes.array,\n}\n\nexport default FilteredAuthoritySections\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport './style.css'\nimport Heading from 'd2-ui/lib/headings/Heading.component'\nimport makeTrashable from 'trashable'\nimport createHumanErrorMessage from '../../utils/createHumanErrorMessage'\nimport api from '../../api'\nimport AuthorityFilter from './AuthorityFilter'\nimport FilteredAuthoritySections from './FilteredAuthoritySections'\nimport { getEmptyGroupedAuthorities } from './utils/groupAuthorities'\n\n/**\n * This is the parent component of the authorities section in the RoleForm.\n * It has been made compliant with redux-form.\n */\nclass AuthorityEditor extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            allGroupedAuthorities: getEmptyGroupedAuthorities(),\n        }\n        // This lookup may be updated without triggering re-renders\n        this.selectedItemsLookup = props.initiallySelected.reduce(\n            (lookup, item) => lookup.set(item, true),\n            new Map()\n        )\n        this.groupedAuthoritiesPromise = null\n    }\n\n    getChildContext() {\n        return {\n            shouldSelect: this.shouldSelect,\n            onAuthChange: this.onAuthChange,\n            selectedItemsLookup: this.selectedItemsLookup,\n        }\n    }\n\n    async componentDidMount() {\n        this.groupedAuthoritiesPromise = makeTrashable(\n            api.getGroupedAuthorities()\n        )\n        try {\n            const allGroupedAuthorities = await this.groupedAuthoritiesPromise\n            this.setState({ allGroupedAuthorities })\n        } catch (error) {\n            this.handleAuthorityFetchError(error)\n        }\n    }\n\n    componentWillUnmount() {\n        this.groupedAuthoritiesPromise.trash()\n    }\n\n    handleAuthorityFetchError(error) {\n        const errorMsg = createHumanErrorMessage(\n            error,\n            i18n.t('There was a problem retreiving the available authorities.')\n        )\n        const allGroupedAuthorities = Object.keys(\n            getEmptyGroupedAuthorities()\n        ).reduce((total, key) => {\n            total[key] = {\n                ...getEmptyGroupedAuthorities()[key],\n                items: errorMsg,\n            }\n            return total\n        }, {})\n        this.setState({ allGroupedAuthorities })\n    }\n\n    onFilterChange = (searchStr, selectedOnly) => {\n        // Here we directly call a method on a child component instead of\n        // letting state changes trigger full re-render. This is to prevent the TextField\n        // from being blocked whilst typing.\n        this.filteredAuthSections.updateFilter(searchStr, selectedOnly)\n    }\n\n    /**\n     * Responds to checkbox changes for individual authorities and section headers. Will also notify redux-form Field components if onChange and onBlur handlers were passed\n     * @param {Array<string>} ids - The IDs of the authorities that were toggled\n     * @param {boolean} value - Checkbox was toggled to checked (true) or unchecked (false)\n     * @method\n     */\n    onAuthChange = (ids, value) => {\n        const { reduxFormOnChange } = this.props\n        const authorityIds = []\n\n        ids.forEach(id => {\n            this.selectedItemsLookup.set(id, value)\n        })\n\n        this.selectedItemsLookup.forEach((value, key) => {\n            if (value) {\n                authorityIds.push(key)\n            }\n        })\n\n        reduxFormOnChange && reduxFormOnChange(authorityIds)\n    }\n\n    shouldSelect = id => {\n        return Boolean(this.selectedItemsLookup.get(id))\n    }\n\n    render() {\n        const { allGroupedAuthorities } = this.state\n\n        return (\n            <div className=\"authority-editor\">\n                <Heading level={4} className=\"authority-editor__header\">\n                    {i18n.t('Authorities')}\n                </Heading>\n                <AuthorityFilter onFilterChange={this.onFilterChange} />\n                <FilteredAuthoritySections\n                    ref={comp => {\n                        this.filteredAuthSections = comp\n                    }}\n                    allGroupedAuthorities={allGroupedAuthorities}\n                />\n            </div>\n        )\n    }\n}\n\nAuthorityEditor.propTypes = {\n    initiallySelected: PropTypes.array,\n    reduxFormOnChange: PropTypes.func,\n    reduxFormOnBlur: PropTypes.func,\n}\n\nAuthorityEditor.defaultProps = {\n    initiallySelected: [],\n}\n\nAuthorityEditor.childContextTypes = {\n    shouldSelect: PropTypes.func.isRequired,\n    onAuthChange: PropTypes.func.isRequired,\n    selectedItemsLookup: PropTypes.object.isRequired,\n}\n\nexport default AuthorityEditor\n","import AuthorityEditor from './AuthorityEditor'\nexport default AuthorityEditor\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport TextField from 'material-ui/TextField/TextField'\nimport Checkbox from 'material-ui/Checkbox/Checkbox'\nimport SelectField from 'material-ui/SelectField/SelectField'\nimport MenuItem from 'material-ui/MenuItem'\nimport SearchableGroupEditor from '../components/SearchableGroupEditor'\nimport SearchableOrgUnitTree from '../components/SearchableOrgUnitTree'\nimport { orange500 } from 'material-ui/styles/colors'\nimport AuthorityEditor from '../components/AuthorityEditor'\n\nconst styles = {\n    checkbox: {\n        marginTop: '32px',\n        fontSize: '16px',\n    },\n    warning: {\n        color: orange500,\n    },\n}\n\n/**\n * Helper functions used as \"component\" props for redux-form Field components.\n * @name fieldRenderers\n * @memberof module:utils\n */\nexport const renderTextField = ({\n    input,\n    label,\n    meta: { touched, error, asyncValidating },\n    ...other\n}) => {\n    const errorText = asyncValidating\n        ? i18n.t('Validating...')\n        : touched && error\n\n    if (asyncValidating) {\n        other.errorStyle = styles.warning\n    }\n\n    return (\n        <TextField\n            floatingLabelText={label}\n            hintText={label}\n            fullWidth={true}\n            errorText={errorText}\n            {...other}\n            {...input}\n        />\n    )\n}\n\nexport const renderAuthorityEditor = ({ input }) => {\n    const initiallySelected = input.value === '' ? [] : input.value\n    return (\n        <AuthorityEditor\n            initiallySelected={initiallySelected}\n            reduxFormOnChange={input.onChange}\n            reduxFormOnBlur={input.onBlur}\n        />\n    )\n}\n\nexport const renderCheckbox = ({ input, label }) => {\n    return (\n        <Checkbox\n            checked={Boolean(input.value)}\n            onCheck={input.onChange}\n            label={label}\n            {...input}\n            style={styles.checkbox}\n        />\n    )\n}\n\nexport const renderSelectField = ({\n    input,\n    label,\n    meta: { touched, error, asyncValidating },\n    options,\n    style,\n}) => {\n    const errorText = asyncValidating\n        ? i18n.t('Validating...')\n        : touched && error\n    const errorStyle = asyncValidating ? styles.warning : undefined\n\n    return (\n        <SelectField\n            floatingLabelText={label}\n            fullWidth={true}\n            value={input.value}\n            name={input.name}\n            onChange={(event, index, value) => {\n                input.onChange(value)\n                // Trigger onBlur after a value is selected, in order to trigger\n                // a validator to run if the SelectField is in the asyncBlurFields list\n                setTimeout(() => input.onBlur(value), 1)\n            }}\n            style={style}\n            errorText={errorText}\n            errorStyle={errorStyle}\n        >\n            {options.map(({ id, label }, i) => (\n                <MenuItem key={`option_${i}`} value={id} primaryText={label} />\n            ))}\n        </SelectField>\n    )\n}\n\nexport const renderSearchableGroupEditor = ({\n    input,\n    meta: { touched, error },\n    availableItemsQuery,\n    availableItemsLabel,\n    assignedItemsLabel,\n    initialValues,\n    ...other\n}) => {\n    return (\n        <SearchableGroupEditor\n            initiallyAssignedItems={initialValues}\n            onChange={input.onChange}\n            onBlur={input.onBlur}\n            availableItemsQuery={availableItemsQuery}\n            availableItemsHeader={availableItemsLabel}\n            assignedItemsHeader={assignedItemsLabel}\n            errorText={touched && error}\n            {...other}\n        />\n    )\n}\n\nexport const renderSearchableOrgUnitTree = ({\n    input,\n    meta: { touched, error },\n    label,\n    wrapperStyle,\n    initialValues,\n    orgUnitType,\n}) => {\n    return (\n        <SearchableOrgUnitTree\n            selectedOrgUnits={initialValues}\n            onChange={input.onChange}\n            wrapperStyle={wrapperStyle}\n            headerText={label}\n            orgUnitType={orgUnitType}\n            errorText={touched && error}\n            onBlur={input.onBlur}\n        />\n    )\n}\n\nexport const renderText = ({ name, label, style }) => {\n    return (\n        <p key={name} style={style}>\n            {label}\n        </p>\n    )\n}\n\nconst sharedPropTypes = {\n    input: PropTypes.object.isRequired,\n    label: PropTypes.string,\n    meta: PropTypes.shape({\n        touched: PropTypes.bool.isRequired,\n        error: PropTypes.string,\n    }),\n}\n\nrenderTextField.propTypes = sharedPropTypes\n\nrenderCheckbox.propTypes = sharedPropTypes\n\nrenderSelectField.propTypes = {\n    ...sharedPropTypes,\n    options: PropTypes.array.isRequired,\n}\n\nrenderSearchableGroupEditor.propTypes = {\n    ...sharedPropTypes,\n    availableItemsQuery: PropTypes.func.isRequired,\n    availableItemsLabel: PropTypes.string,\n    assignedItemsLabel: PropTypes.string,\n    initialValues: PropTypes.array.isRequired,\n}\n\nrenderSearchableOrgUnitTree.propTypes = {\n    ...sharedPropTypes,\n    wrapperStyle: PropTypes.object,\n    initialValues: PropTypes.array.isRequired,\n}\n\nrenderAuthorityEditor.propTypes = {\n    ...sharedPropTypes,\n    initialValues: PropTypes.array,\n}\n\nrenderText.propTypes = {\n    label: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    style: PropTypes.object.isRequired,\n}\n","import {\n    renderText,\n    renderTextField,\n    renderSearchableGroupEditor,\n} from '../../utils/fieldRenderers'\nimport asArray from '../../utils/asArray'\nimport i18n from '@dhis2/d2-i18n'\n\nexport const FORM_NAME = 'groupForm'\nexport const NAME = 'name'\nexport const CODE = 'code'\nexport const MANAGED_GROUPS = 'managedGroups'\n\nexport const GROUP_PROPS = [NAME, CODE, MANAGED_GROUPS]\n\nexport const STYLES = {\n    loaderWrap: {\n        paddingTop: '2rem',\n        textAlign: 'center',\n    },\n}\n\nexport const getFields = () => [\n    {\n        name: NAME,\n        label: i18n.t('Name'),\n        fieldRenderer: renderTextField,\n        isRequiredField: true,\n    },\n    {\n        name: CODE,\n        label: i18n.t('Code'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: 'manage_users_info',\n        fieldRenderer: renderText,\n        label: i18n.t(\n            'To add a user to this group, go to the User section and edit the user group settings for a specific user.'\n        ),\n        style: {\n            border: '1px solid #bdbdbd',\n            backgroundColor: '#e5e5e5',\n            padding: 12,\n        },\n    },\n    {\n        name: MANAGED_GROUPS,\n        fieldRenderer: renderSearchableGroupEditor,\n        initialItemsSelector: group => asArray(group[MANAGED_GROUPS]),\n        availableItemsQuery: 'getAvailableUserGroups',\n        availableItemsLabel: i18n.t('Available user groups'),\n        assignedItemsLabel: i18n.t('Managed user groups'),\n    },\n]\n","/**\n * A collection of selector functions that return derived state slices. Results are memoized where possible.\n * @module selectors\n */\nimport memoize from 'lodash.memoize'\nimport isUndefined from 'lodash.isundefined'\nimport i18n from '@dhis2/d2-i18n'\nimport {\n    USER_PROPS,\n    USER_CRED_PROPS,\n    INTERFACE_LANGUAGE,\n    DATABASE_LANGUAGE,\n    INVITE,\n    INVITE_USER,\n    DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS,\n    DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS,\n    SET_PASSWORD,\n} from '../containers/UserForm/config'\nimport { getFields as getUserGroupFields } from '../containers/GroupForm/config'\nimport asArray from '../utils/asArray'\nimport getNestedProp from '../utils/getNestedProp'\n\n/**\n * @param {Object} pager - A d2 Pager instance\n * @returns {Object} The d2 Pager instance with an appended 'currentlyShown' property\n * @function\n */\nexport const pagerSelector = memoize(pager => {\n    if (pager === null) {\n        return pager\n    }\n    const {\n        total,\n        pageCount,\n        page,\n        query: { pageSize },\n    } = pager\n    const pageCalculationValue =\n        total - (total - (pageCount - (pageCount - page)) * pageSize)\n    const startItem = 1 + pageCalculationValue - pageSize\n    const endItem = pageCalculationValue\n\n    pager.currentlyShown = `${startItem} - ${endItem > total ? total : endItem}`\n    return pager\n})\n\n/**\n * @param {Object} list - A d2 list ModelCollection instance\n * @param {Object} [groupMemberships] - An array of groupMembership IDs (userGroup only)\n * @returns {Array} An array of d2 model instances with properties appended for use in the List component\n * @function\n */\nexport const listSelector = (list, groupMemberships) => {\n    if (!list || typeof list === 'string') {\n        return list\n    }\n\n    const listType = list.modelDefinition.name\n    return list\n        .toArray()\n        .map(item => listMappings[listType](item, groupMemberships))\n}\n\nconst listMappings = {\n    user: item => {\n        item.userName = item.userCredentials.username\n        item.disabled = item.userCredentials.disabled\n        item.lastLogin = item.userCredentials.lastLogin\n        return item\n    },\n    userRole: item => item,\n    userGroup: (item, groupMemberships) => {\n        item.currentUserIsMember = groupMemberships.includes(item.id)\n        return item\n    },\n}\n\n/**\n * @param {Object} orgUnits - an array of d2 organisation unit instances\n * @returns {String} Either a comma delimited list of organisation unit names, or a count of selected organisation units phrase\n * @function\n */\nexport const orgUnitsAsStringSelector = memoize(orgUnits => {\n    return orgUnits.length < 3\n        ? orgUnits.map(unit => unit.displayName).join(', ')\n        : i18n.t('{{count}} selected', { count: orgUnits.length })\n})\n\nconst addInitialValueFrom = (sourceObject, initialValues, propName) => {\n    if (propName === DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS) {\n        initialValues[propName] = [\n            ...sourceObject.catDimensionConstraints,\n            ...sourceObject.cogsDimensionConstraints,\n        ]\n    } else if (\n        (sourceObject[propName] && !isUndefined(sourceObject[propName].size)) ||\n        Array.isArray(sourceObject[propName])\n    ) {\n        initialValues[propName] = asArray(sourceObject[propName]).map(\n            ({ id }) => id\n        )\n    } else {\n        initialValues[propName] = sourceObject[propName]\n    }\n}\n\n/**\n * Produces initial values for redux form\n * @param {Object} user - A d2 user model instance (state.currentItem)\n * @param {Object} locales - Contains available and selected locales for the UI and DB\n * @returns {Object} Initial values for the redux form wrapping the UserForm component\n * @function\n */\nexport const userFormInitialValuesSelector = memoize(\n    (user, locales, attributeFields) => {\n        const initialValues = {\n            [INVITE]: SET_PASSWORD,\n        }\n\n        if (user.id) {\n            USER_PROPS.forEach(propName => {\n                addInitialValueFrom(user, initialValues, propName)\n            })\n\n            USER_CRED_PROPS.forEach(propName => {\n                addInitialValueFrom(\n                    user.userCredentials,\n                    initialValues,\n                    propName\n                )\n            })\n\n            attributeFields.forEach(\n                field => (initialValues[field.name] = field.value)\n            )\n        }\n\n        // 'en' is a fallback for systems that have no default system UI locale specified\n        initialValues[INTERFACE_LANGUAGE] = locales.ui.selected || 'en'\n        initialValues[DATABASE_LANGUAGE] = locales.db.selected\n\n        return initialValues\n    }\n)\n\nexport const userGroupFormInitialValuesSelector = memoize(\n    (userGroup, attributeFields) => {\n        const initialValues = {}\n\n        getUserGroupFields().forEach(field => {\n            addInitialValueFrom(userGroup, initialValues, field.name)\n        })\n\n        attributeFields.forEach(\n            field => (initialValues[field.name] = field.value)\n        )\n\n        return initialValues\n    }\n)\n\n/**\n * Used to combine cat and cog dimension restrictions into a single array\n * @param {Object} user - A d2 user model instance (state.currentItem)\n * @returns {Object} An array of cat and cog IDs\n * @function\n */\nexport const analyticsDimensionsRestrictionsSelector = memoize(user => {\n    const catConstraints = asArray(\n        getNestedProp('userCredentials.catDimensionConstraints', user)\n    )\n    const cogsConstraints = asArray(\n        getNestedProp('userCredentials.cogsDimensionConstraints', user)\n    )\n    return [...catConstraints, ...cogsConstraints]\n})\n\n/**\n * A short item is a basic version of state.currentItem, derived from a list.\n * It is used to display basic information in a FormLoader or DetailSummary component\n * while the full version of the currentItem is being fetched.\n * @param {String} id - The id of the model selected in a list\n * @param {Object} list - A d2  model collection instance instance (state.list)\n * @returns {Object} A d2 model instance containing only a few basic properties\n * @function\n */\nexport const shortItemSelector = memoize((id, list) => {\n    if (!list || !id) {\n        return null\n    }\n    return list.get(id)\n})\n\n/**\n * Organisation unit trees should have different roots depending on the context.\n * @param {String} orgUnitType - The type orgUnits to return\n * @param {Object} currentUser - state.currentUser\n * @returns {Array|null} The roots of the organisation unit tree to be displayed\n * @function\n */\nexport const orgUnitRootsSelector = (orgUnitType, currentUser) => {\n    const systemOrgRoots = currentUser.systemOrganisationUnitRoots\n    const requestedOrgUnitRoots = currentUser[orgUnitType]\n    const fallBackOrgUnitRoots =\n        currentUser[DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS]\n\n    let orgUnitRoots = null\n    if (currentUser.authorities.has('ALL')) {\n        orgUnitRoots = systemOrgRoots\n    } else if (requestedOrgUnitRoots.size === 0) {\n        orgUnitRoots = fallBackOrgUnitRoots.toArray()\n    } else if (fallBackOrgUnitRoots.size > 0) {\n        orgUnitRoots = fallBackOrgUnitRoots.toArray()\n    }\n\n    return orgUnitRoots\n}\n\n/**\n * The redux form `formValueSelector` was returning incorrect values,\n * so this selector was born.\n * @param {Object} formState - state.form.userForm\n * @returns {Boolean} - True if select box was switched to 'Invite user'\n * @function\n */\nexport const inviteUserValueSelector = formState => {\n    const fields = formState && formState.registeredFields\n    const values = formState && formState.values\n    const isRenderedField = Boolean(fields && fields[INVITE])\n    const fieldValue = isRenderedField && values && values[INVITE]\n\n    return fieldValue === INVITE_USER\n}\n","import { blue600 } from 'material-ui/styles/colors'\nimport asArray from '../../utils/asArray'\nimport i18n from '@dhis2/d2-i18n'\nimport getNestedProp from '../../utils/getNestedProp'\nimport { analyticsDimensionsRestrictionsSelector } from '../../selectors'\nimport {\n    renderTextField,\n    renderCheckbox,\n    renderSelectField,\n    renderSearchableGroupEditor,\n    renderSearchableOrgUnitTree,\n    renderText,\n} from '../../utils/fieldRenderers'\n\nexport const STYLES = {\n    loaderWrap: {\n        paddingTop: '2rem',\n        textAlign: 'center',\n    },\n    toggler: {\n        color: blue600,\n    },\n    orgUnitTree: {\n        width: 'calc(50% - 60px)',\n        float: 'left',\n        minHeight: '100px',\n        maxHeight: '1200px',\n    },\n    togglerWrap: {\n        clear: 'both',\n        paddingTop: '1.2rem',\n        marginBottom: '1.5rem',\n    },\n    additionalFieldsWrap: {\n        clear: 'both',\n        paddingTop: '1.5rem',\n    },\n}\n\nexport const FORM_NAME = 'userForm'\nexport const USERNAME = 'username'\nexport const EMAIL = 'email'\nexport const DISABLED = 'disabled'\nexport const INVITE = 'inviteUser'\nexport const EXTERNAL_AUTH = 'externalAuth'\nexport const PASSWORD = 'password'\nexport const REPEAT_PASSWORD = 'repeatPassword'\nexport const SURNAME = 'surname'\nexport const FIRST_NAME = 'firstName'\nexport const OPEN_ID = 'openId'\nexport const LDAP_ID = 'ldapId'\nexport const PHONE_NUMBER = 'phoneNumber'\nexport const INTERFACE_LANGUAGE = 'interfaceLanguage'\nexport const DATABASE_LANGUAGE = 'databaseLanguage'\nexport const ASSIGNED_ROLES = 'userRoles'\nexport const DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS = 'organisationUnits'\nexport const DATA_OUTPUT_AND_ANALYTICS_ORG_UNITS = 'dataViewOrganisationUnits'\nexport const TEI_SEARCH_ORG_UNITS = 'teiSearchOrganisationUnits'\nexport const ASSIGNED_USER_GROUPS = 'userGroups'\nexport const DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS =\n    'catCogsDimensionConstraints'\nexport const WHATS_APP = 'whatsApp'\nexport const FACEBOOK_MESSENGER = 'facebookMessenger'\nexport const SKYPE = 'skype'\nexport const TELEGRAM = 'telegram'\nexport const TWITTER = 'twitter'\n\nexport const USER_PROPS = [\n    SURNAME,\n    FIRST_NAME,\n    EMAIL,\n    PHONE_NUMBER,\n    WHATS_APP,\n    FACEBOOK_MESSENGER,\n    SKYPE,\n    TELEGRAM,\n    TWITTER,\n    DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS,\n    DATA_OUTPUT_AND_ANALYTICS_ORG_UNITS,\n    ASSIGNED_USER_GROUPS,\n    TEI_SEARCH_ORG_UNITS,\n]\n\nexport const USER_CRED_PROPS = [\n    USERNAME,\n    DISABLED,\n    EXTERNAL_AUTH,\n    PASSWORD,\n    OPEN_ID,\n    LDAP_ID,\n    ASSIGNED_ROLES,\n    DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS,\n]\n\nexport const ALWAYS_REQUIRED = 'ALWAYS_REQUIRED'\nexport const INVITE_REQUIRED = 'INVITE_REQUIRED'\nexport const CREATE_REQUIRED = 'CREATE_REQUIRED'\n\nexport const USE_DB_LOCALE = 'use_db_locale'\n\nexport const SET_PASSWORD = 'SET_PASSWORD'\nexport const INVITE_USER = 'INVITE_USER'\n\nconst getBaseCaption = () => ({\n    label: i18n.t(\n        'Selecting an organisation unit provides access to all units in the sub-hierarchy'\n    ),\n    fieldRenderer: renderText,\n    style: {\n        clear: 'both',\n        paddingTop: '0.8rem',\n        fontStyle: 'italic',\n        fontSize: '0.9rem',\n    },\n})\n\nexport const getInviteFields = () => [\n    {\n        name: INVITE,\n        label: i18n.t('Create account or email invitation'),\n        fieldRenderer: renderSelectField,\n        options: [\n            {\n                id: SET_PASSWORD,\n                label: i18n.t('Create account with user details'),\n            },\n            {\n                id: INVITE_USER,\n                label: i18n.t('Email invitation to create account'),\n            },\n        ],\n        props: {\n            style: {\n                // backgroundColor: 'rgb(110,188,253)',\n            },\n        },\n    },\n]\n\nexport const getBaseFields = () => [\n    {\n        name: USERNAME,\n        label: i18n.t('Username'),\n        fieldRenderer: renderTextField,\n        isRequiredField: CREATE_REQUIRED,\n    },\n    {\n        name: EMAIL,\n        label: i18n.t('E-mail'),\n        fieldRenderer: renderTextField,\n        isRequiredField: INVITE_REQUIRED,\n    },\n    {\n        name: EXTERNAL_AUTH,\n        label: i18n.t('External authentication only (OpenID or LDAP)'),\n        fieldRenderer: renderCheckbox,\n    },\n    {\n        name: DISABLED,\n        label: i18n.t('Disabled'),\n        fieldRenderer: renderCheckbox,\n    },\n    {\n        name: PASSWORD,\n        label: i18n.t('Password'),\n        fieldRenderer: renderTextField,\n        isRequiredField: CREATE_REQUIRED,\n        props: {\n            type: 'password',\n            autoComplete: 'new-password',\n        },\n    },\n    {\n        name: REPEAT_PASSWORD,\n        label: i18n.t('Retype password'),\n        fieldRenderer: renderTextField,\n        isRequiredField: CREATE_REQUIRED,\n        props: {\n            type: 'password',\n            autoComplete: 'new-password',\n        },\n    },\n    {\n        name: SURNAME,\n        label: i18n.t('Surname'),\n        isRequiredField: ALWAYS_REQUIRED,\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: FIRST_NAME,\n        label: i18n.t('First name'),\n        isRequiredField: ALWAYS_REQUIRED,\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: OPEN_ID,\n        label: i18n.t('OpenID'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: LDAP_ID,\n        label: i18n.t('LDAP identifier'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: PHONE_NUMBER,\n        label: i18n.t('Mobile phone number'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: WHATS_APP,\n        label: i18n.t('WhatsApp'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: FACEBOOK_MESSENGER,\n        label: i18n.t('Facebook Messenger'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: SKYPE,\n        label: i18n.t('Skype'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: TELEGRAM,\n        label: i18n.t('Telegram'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: TWITTER,\n        label: i18n.t('Twitter'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: INTERFACE_LANGUAGE,\n        label: i18n.t('Interface language'),\n        fieldRenderer: renderSelectField,\n        optionsSelector: 'locales.ui.available',\n        isRequiredField: ALWAYS_REQUIRED,\n    },\n    {\n        name: DATABASE_LANGUAGE,\n        label: i18n.t('Database language'),\n        fieldRenderer: renderSelectField,\n        optionsSelector: 'locales.db.available',\n        isRequiredField: ALWAYS_REQUIRED,\n    },\n    {\n        name: ASSIGNED_ROLES,\n        fieldRenderer: renderSearchableGroupEditor,\n        isRequiredField: ALWAYS_REQUIRED,\n        initialItemsSelector: user =>\n            asArray(getNestedProp('userCredentials.userRoles', user) || []),\n        availableItemsQuery: 'getAvailableUserRoles',\n        availableItemsLabel: i18n.t('Available roles'),\n        assignedItemsLabel: i18n.t('Selected roles'),\n    },\n    {\n        name: DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS,\n        label: i18n.t('Data capture and maintenance organisation units'),\n        isRequiredField: ALWAYS_REQUIRED,\n        orgUnitType: DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS,\n        fieldRenderer: renderSearchableOrgUnitTree,\n        wrapperStyle: { ...STYLES.orgUnitTree, paddingRight: '60px' },\n    },\n    {\n        name: DATA_OUTPUT_AND_ANALYTICS_ORG_UNITS,\n        label: i18n.t('Data output and analytic organisation units'),\n        orgUnitType: DATA_OUTPUT_AND_ANALYTICS_ORG_UNITS,\n        fieldRenderer: renderSearchableOrgUnitTree,\n        wrapperStyle: { ...STYLES.orgUnitTree, paddingLeft: '60px' },\n    },\n    {\n        ...getBaseCaption(),\n        name: 'org_unit_info_1',\n    },\n]\n\nexport const getAdditionalFields = () => [\n    {\n        name: TEI_SEARCH_ORG_UNITS,\n        label: i18n.t('Search Organisation Units'),\n        orgUnitType: TEI_SEARCH_ORG_UNITS,\n        fieldRenderer: renderSearchableOrgUnitTree,\n        wrapperStyle: { ...STYLES.orgUnitTree, paddingRight: '60px' },\n    },\n    {\n        ...getBaseCaption(),\n        name: 'org_unit_info_2',\n    },\n    {\n        name: ASSIGNED_USER_GROUPS,\n        fieldRenderer: renderSearchableGroupEditor,\n        initialItemsSelector: user => asArray(user.userGroups) || [],\n        availableItemsQuery: 'getAvailableUserGroups',\n        availableItemsLabel: i18n.t('Available user groups'),\n        assignedItemsLabel: i18n.t('Selected user groups'),\n    },\n    {\n        name: DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS,\n        fieldRenderer: renderSearchableGroupEditor,\n        initialItemsSelector: user =>\n            analyticsDimensionsRestrictionsSelector(user),\n        availableItemsQuery: 'getAvailableDataAnalyticsDimensionRestrictions',\n        availableItemsLabel: i18n.t(\n            'Available dimension restrictions for data analytics'\n        ),\n        assignedItemsLabel: i18n.t(\n            'Selected dimension restrictions for data analytics'\n        ),\n        returnModelsOnUpdate: true,\n    },\n]\n","export const USER = 'user'\nexport const USER_ROLE = 'userRole'\nexport const USER_GROUP = 'userGroup'\n","import i18n from '@dhis2/d2-i18n'\nimport { PASSWORD, REPEAT_PASSWORD } from '../containers/UserForm/config'\n\n// Same as used in @dhis2/ui-forms\nconst EMAIL_ADDRESS_PATTERN = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/i\nconst INTERNATIONAL_PHONE_NUMBER_PATTERN = /^\\+(?:[0-9].?){4,14}[0-9]$/\nconst DATE_PATTERN = /[0-9]{4}-[0-9]{2}-[0-9]{2}/\nconst LOWER_CASE_PATTERN = /^(?=.*[a-z]).+$/\nconst UPPER_CASE_PATTERN = /^(?=.*[A-Z]).+$/\nconst DIGIT_PATTERN = /^(?=.*[0-9]).+$/\n// Using this regex to match all non-alphanumeric characters to match server-side implementation\n// https://github.com/dhis2/dhis2-core/blob/master/dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/user/SpecialCharacterValidationRule.java#L39\nconst SPECIAL_CHARACTER_PATTERN = /[^a-zA-Z0-9]/\n\n// validators (ordered alphabetically)\nexport function code(value) {\n    if (hasValue(value) && value.length > 50) {\n        return i18n.t('Exceeds maximum character limit of 50')\n    }\n}\n\nexport function date(value) {\n    if (hasValue(value) && !DATE_PATTERN.test(value)) {\n        return i18n.t(\n            'Please enter a valid date with the following format yyyy-mm-dd'\n        )\n    }\n}\n\nexport function email(value) {\n    if (hasValue(value) && !EMAIL_ADDRESS_PATTERN.test(value.toLowerCase())) {\n        return i18n.t('Please provide a valid email address')\n    }\n}\n\nexport function integer(value) {\n    if (hasValue(value) && !isInteger(value)) {\n        return i18n.t('Value should be an integer')\n    }\n}\n\nexport function negativeInteger(value) {\n    if (hasValue(value) && (!isInteger(value) || parseInt(value, 10) >= 0)) {\n        return i18n.t('Value should be a nagative integer')\n    }\n}\n\nexport function number(value) {\n    if (hasValue(value) && isNaN(value)) {\n        return i18n.t('Value should be a number')\n    }\n}\n\nexport function password(value, allValues, props) {\n    if (!shouldValidatePassword(allValues, props)) {\n        return undefined\n    }\n    const passwordError = checkPasswordForErrors(allValues[PASSWORD])\n    if (passwordError) {\n        return passwordError\n    }\n}\n\nexport function positiveInteger(value) {\n    if (hasValue(value) && (!isInteger(value) || parseInt(value, 10) <= 0)) {\n        return i18n.t('Value should be a positive integer')\n    }\n}\n\nexport function repeatPassword(value, allValues) {\n    if (allValues[REPEAT_PASSWORD] !== allValues[PASSWORD]) {\n        return i18n.t('Passwords do not match')\n    }\n}\n\nexport function required(value) {\n    return !hasValue(value) ? i18n.t('This field is required') : undefined\n}\n\nexport function requiredArray(value) {\n    if (!(Array.isArray(value) && value.length > 0)) {\n        return i18n.t('This field is required. Please select at least one')\n    }\n}\n\nexport function username(value) {\n    if (hasValue(value) && value.length < 2) {\n        return i18n.t('A username should be at least 2 characters long')\n    }\n\n    if (hasValue(value) && value.length > 140) {\n        return i18n.t('Username may not exceed 140 characters')\n    }\n}\n\nexport function whatsApp(value) {\n    if (hasValue(value) && !INTERNATIONAL_PHONE_NUMBER_PATTERN.test(value)) {\n        return i18n.t(\n            'Please provide a valid international phone number (+0123456789)'\n        )\n    }\n}\n\n// Helpers\n/**\n * Tests if a given password is compliant with the password restrictions. This function checks all restrictions below, but returns when the first violation was found:\n * - At least 8 characters\n * - No more than 34 characters\n * - Contains at least 1 lowercase character\n * - Contains at least 1 UPPERCASE character\n * - Contains at least 1 number\n * - Contains at least 1 special character\n * @param {String} password\n * @return {null|String} Null if password is OK, otherwise an error message\n * @memberof module:utils\n * @function\n */\nfunction checkPasswordForErrors(password) {\n    if (!hasValue(password)) {\n        return i18n.t('This field is required')\n    }\n    if (password.length < 8) {\n        return i18n.t('Password should be at least 8 characters long')\n    }\n    if (password.length > 35) {\n        return i18n.t('Password should be no longer than 34 characters')\n    }\n    if (!LOWER_CASE_PATTERN.test(password)) {\n        return i18n.t('Password should contain at least one lowercase letter')\n    }\n    if (!UPPER_CASE_PATTERN.test(password)) {\n        return i18n.t('Password should contain at least one UPPERCASE letter')\n    }\n    if (!DIGIT_PATTERN.test(password)) {\n        return i18n.t('Password should contain at least one number')\n    }\n    if (!SPECIAL_CHARACTER_PATTERN.test(password)) {\n        return i18n.t('Password should have at least one special character')\n    }\n\n    return null\n}\n\nfunction isInteger(value) {\n    if (isNaN(value)) {\n        return false\n    }\n    const x = parseFloat(value)\n    return (x | 0) === x\n}\n\nfunction shouldValidatePassword(allValues, props) {\n    if (props.inviteUser) {\n        return false\n    }\n\n    const isEditingUser = Boolean(props.user.id)\n    const isEmptyOnEdit =\n        isEditingUser && !allValues[PASSWORD] && !allValues[REPEAT_PASSWORD]\n\n    return isEmptyOnEdit ? false : true\n}\n\nfunction hasValue(value) {\n    return typeof value !== 'undefined' && value !== null && value !== ''\n}\n","const notADateValue = 'not-a-date'\nlet hasDateInputSupport\n\nexport default function browserHasDateInputSupport() {\n    // Return cached result if available\n    if (typeof hasDateInputSupport !== 'undefined') {\n        return hasDateInputSupport\n    }\n\n    let input = document.createElement('input')\n    input.setAttribute('type', 'date')\n    input.setAttribute('value', notADateValue)\n    // Cache result\n    hasDateInputSupport = input.value !== notADateValue\n    input = null\n    return hasDateInputSupport\n}\n","import i18n from '@dhis2/d2-i18n'\nimport {\n    renderTextField,\n    renderCheckbox,\n    renderSelectField,\n} from './fieldRenderers'\nimport {\n    number,\n    integer,\n    positiveInteger,\n    negativeInteger,\n    date,\n} from './validators'\nimport browserHasDateInputSupport from './browserHasDateInputSupport'\n\nexport const USER_ATTRIBUTE_FIELD_PREFIX = 'userAttibute_'\nexport const NO_VALUE_OPTION = 'no_value'\n/**************************************************************************\n    Attributes can be either based on an optionSet, or based on a valueType.\n    Attributes based on optionSets are supported.\n    Attributes based on valueTypes are partially supported, see below:\n        [X] TEXT\n        [X] LONG_TEXT\n        [ ] LETTER\n        [ ] PHONE_NUMBER\n        [ ] EMAIL\n        [X] BOOLEAN\n        [X] TRUE_ONLY\n        [X] DATE\n        [ ] DATETIME\n        [ ] TIME\n        [X] NUMBER\n        [ ] UNIT_INTERVAL\n        [ ] PERCENTAGE\n        [X] INTEGER\n        [X] INTEGER_POSITIVE\n        [X] INTEGER_NEGATIVE\n        [ ] INTEGER_ZERO_OR_POSITIVE\n        [ ] TRACKER_ASSOCIATE\n        [ ] USERNAME\n        [ ] COORDINATE\n        [ ] ORGANISATION_UNIT\n        [ ] AGE\n        [ ] URL\n        [ ] FILE_RESOURCE\n        [ ] IMAGE\n****************************************************************************/\n\nexport function generateAttributeFields(attributes, userAttributeValues) {\n    return attributes.map(attribute =>\n        generateAttributeField(attribute, userAttributeValues)\n    )\n}\n\nexport function addUniqueAttributesToAsyncBlurFields(\n    attributeFields,\n    asyncBlurFields\n) {\n    attributeFields.forEach(({ shouldBeUnique, name }) => {\n        if (shouldBeUnique) {\n            // It seems hacky to push to props, but seems to be the way to do it:\n            // https://github.com/erikras/redux-form/issues/708#issuecomment-191446641\n            asyncBlurFields.push(name)\n        }\n    })\n}\n\nexport function parseAttributeValues(values, attributeFields) {\n    const fieldTypeLookup = attributeFields.reduce(\n        (lookup, { attributeId, valueType }) => {\n            lookup[attributeId] = valueType\n            return lookup\n        },\n        {}\n    )\n\n    return Object.keys(values).reduce((attributeValues, key) => {\n        const isUserAttribute = key.indexOf(USER_ATTRIBUTE_FIELD_PREFIX) !== -1\n\n        if (isUserAttribute) {\n            const id = key.replace(USER_ATTRIBUTE_FIELD_PREFIX, '')\n            const value = values[key]\n            const isClearedTrueOnlyField =\n                fieldTypeLookup[id] === 'TRUE_ONLY' && !value\n            const isClearedOptionalDropDown = value === NO_VALUE_OPTION\n\n            if (!isClearedTrueOnlyField && !isClearedOptionalDropDown) {\n                attributeValues.push({\n                    value: value,\n                    attribute: {\n                        id: id,\n                    },\n                })\n            }\n        }\n        return attributeValues\n    }, [])\n}\n\nconst createValueTypeMapping = () => ({\n    OPTION_SET: {\n        fieldRenderer: renderSelectField,\n    },\n    TEXT: {\n        fieldRenderer: renderTextField,\n    },\n    LONG_TEXT: {\n        fieldRenderer: renderTextField,\n        props: {\n            multiLine: true,\n            rows: 3,\n            rowsMax: 6,\n        },\n    },\n    DATE: {\n        fieldRenderer: renderTextField,\n        props: {\n            type: 'date',\n            // If browser supports <input type=\"date\"/>, the label should always float above the input\n            // because the date input has some text that overlaps with the hintText\n            floatingLabelFixed: browserHasDateInputSupport(),\n            hintText: null,\n        },\n        fieldValidators: [date],\n    },\n    BOOLEAN: {\n        fieldRenderer: renderSelectField,\n        props: {\n            options: [\n                { id: 'true', label: i18n.t('Yes') },\n                { id: 'false', label: i18n.t('No') },\n            ],\n        },\n    },\n    TRUE_ONLY: {\n        fieldRenderer: renderCheckbox,\n    },\n    NUMBER: {\n        fieldRenderer: renderTextField,\n        fieldValidators: [number],\n    },\n    INTEGER: {\n        fieldRenderer: renderTextField,\n        fieldValidators: [integer],\n    },\n    INTEGER_POSITIVE: {\n        fieldRenderer: renderTextField,\n        fieldValidators: [positiveInteger],\n    },\n    INTEGER_NEGATIVE: {\n        fieldRenderer: renderTextField,\n        fieldValidators: [negativeInteger],\n    },\n})\n\nconst getValueTypeMapping = (() => {\n    let valueTypeMapping = null\n    return () => {\n        if (!valueTypeMapping) {\n            valueTypeMapping = createValueTypeMapping()\n        }\n        return valueTypeMapping\n    }\n})()\n\nfunction generateAttributeField(\n    { id, valueType, displayName, mandatory, unique, optionSet },\n    userAttributeValues\n) {\n    const userAttribute =\n        userAttributeValues &&\n        userAttributeValues.find(\n            attributeValue => attributeValue.attribute.id === id\n        )\n\n    const valueTypeProps = getValueTypeProps(valueType, optionSet, mandatory)\n\n    return {\n        name: USER_ATTRIBUTE_FIELD_PREFIX + id,\n        isAttributeField: true,\n        label: displayName,\n        isRequiredField: mandatory,\n        shouldBeUnique: unique,\n        attributeId: id,\n        value: (userAttribute && userAttribute.value) || null,\n        valueType,\n        ...valueTypeProps,\n    }\n}\n\nfunction getValueTypeProps(valueType, optionSet, mandatory) {\n    const valueTypeMapping = getValueTypeMapping()\n    // Attributes based on an option-set have TEXT as their valueType but need to render a select/dropdown with the options\n    const valueTypeProps = optionSet\n        ? {\n              ...valueTypeMapping.OPTION_SET,\n              props: {\n                  options: optionSet.options.map(option => ({\n                      id: option.id,\n                      label: option.displayName,\n                  })),\n              },\n          }\n        : // Use valueTypeMapping.TEXT as fallback field renderer.\n          // This way all attributes will always be editable, albeit not necesarrily enforcing the correct formatting\n          valueTypeMapping[valueType] || valueTypeMapping.TEXT\n\n    // Optional dropdown fields need a way to be cleared, so we create an empty option\n    if (\n        valueTypeProps.fieldRenderer === renderSelectField &&\n        !mandatory &&\n        valueTypeProps.props.options[0].id !== NO_VALUE_OPTION\n    ) {\n        valueTypeProps.props.options = [\n            {\n                id: NO_VALUE_OPTION,\n                label: i18n.t('<No value>'),\n            },\n            ...valueTypeProps.props.options,\n        ]\n    }\n\n    return valueTypeProps\n}\n","/* eslint-disable max-params */\n\n/**\n * This module includes helper functions used by the API class\n * @module Api/utils\n */\n\nimport { generateUid } from 'd2/lib/uid'\nimport snakeCase from 'lodash.snakecase'\nimport isUndefined from 'lodash.isundefined'\nimport store from '../store'\nimport {\n    PAGE as DEFAULT_PAGE,\n    PAGE_SIZE as DEFAULT_PAGE_SIZE,\n} from '../constants/defaults'\n\nimport FIELDS from '../constants/queryFields'\n\nimport {\n    USER_PROPS,\n    USER_CRED_PROPS,\n    DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS,\n    DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS,\n    PASSWORD,\n    REPEAT_PASSWORD,\n    EXTERNAL_AUTH,\n} from '../containers/UserForm/config'\n\nimport { USER } from '../constants/entityTypes'\nimport { parseAttributeValues } from '../utils/attributeFieldHelpers'\n\n/**\n * Helper function that produces a \"fields\" array used in the api request payload\n * @param {String} entityName - \"user\" \"userRole\" or \"userGroup\"\n * @param {Boolean} detailFields - Should be true if caller want to get field\n * @return {Array} An array of fields/properties that should be included in the api response\n * @function\n */\nexport const getQueryFields = (entityName, detailFields) => {\n    const formattedEntityName = snakeCase(entityName).toUpperCase()\n    const varName = detailFields\n        ? `${formattedEntityName}_DETAILS`\n        : `${formattedEntityName}_LIST`\n\n    return FIELDS[varName]\n}\n\n/**\n * Helper function that prepares the request payload for a getList api call.\n * Combines the\n * @param {Number} page - The page number that should be requested\n * @param {Object} filter - Parameters to filter the result set with on the server\n * @param {Array} fields - Properties that should be returned for each object\n * @returns {Object} A valid request payload for api list calls\n * @function\n */\nexport const createListRequestData = (\n    page = DEFAULT_PAGE,\n    filter,\n    fields,\n    entityName,\n    currentUser\n) => {\n    const {\n        query,\n        inactiveMonths,\n        selfRegistered,\n        invitationStatus,\n        organisationUnits,\n    } = filter\n\n    const requestData = {\n        pageSize: DEFAULT_PAGE_SIZE,\n        fields,\n        page,\n        order:\n            entityName === USER ? ['firstName:asc', 'surname:asc'] : 'name:asc',\n    }\n\n    if (entityName === USER && !isSuperUser(currentUser)) {\n        requestData.userOrgUnits = true\n        requestData.includeChildren = true\n    }\n\n    if (query) requestData.query = query\n    if (inactiveMonths) requestData.inactiveMonths = inactiveMonths\n    if (selfRegistered) requestData.selfRegistered = selfRegistered\n    if (invitationStatus) requestData.invitationStatus = invitationStatus\n\n    if (organisationUnits.length) {\n        const ids = organisationUnits.map(unit => unit.id).join()\n        requestData.filter = `organisationUnits.id:in:[${ids}]`\n    }\n\n    return requestData\n}\n\nconst isSuperUser = ({ authorities }) => authorities.has('ALL')\n\nconst addValueAsProp = (data, value, propName) => {\n    if (!isUndefined(value)) {\n        data[propName] = Array.isArray(value)\n            ? value.map(id => ({ id }))\n            : value\n    }\n}\n\n/**\n * This function prepares a the payload object used for saving a user\n * @param {Object} values - Key-value with form values produced by redux-form\n * @param {Object} user - D2 user model instance\n * @returns {Object}  Object that may be PUT/POSTed to the server to save a user\n * @function\n */\nexport const parseUserSaveData = (\n    values,\n    user,\n    inviteUser,\n    attributeFields\n) => {\n    const isNewUser = !user.id\n    const userId = user.id || generateUid()\n    const userCredId =\n        (user.userCredentials && user.userCredentials.id) || generateUid()\n    const userModelOwnedProperties = user.modelDefinition.getOwnedPropertyNames()\n    const data = {\n        id: userId,\n        userCredentials: {\n            id: userCredId,\n            userInfo: { id: userId },\n            cogsDimensionConstraints: [],\n            catDimensionConstraints: [],\n        },\n    }\n    const cred = data.userCredentials\n\n    // catCogsDimensionConstraints are combined into a single input component,\n    // but need to be stored separately\n    if (Array.isArray(values.catCogsDimensionConstraints)) {\n        values.catCogsDimensionConstraints.forEach(constraint => {\n            if (constraint.dimensionType === 'CATEGORY_OPTION_GROUP_SET') {\n                cred.cogsDimensionConstraints.push({ id: constraint.id })\n            } else {\n                cred.catDimensionConstraints.push({ id: constraint.id })\n            }\n        })\n    }\n\n    USER_PROPS.forEach(propName =>\n        addValueAsProp(data, values[propName], propName)\n    )\n    USER_CRED_PROPS.forEach(propName =>\n        addValueAsProp(cred, values[propName], propName)\n    )\n\n    data.attributeValues = parseAttributeValues(values, attributeFields)\n\n    // This property was appended to the model by hand but needs to be removed before saving the user\n    delete cred[DIMENSION_RESTRICTIONS_FOR_DATA_ANALYTICS]\n\n    if (inviteUser || values[EXTERNAL_AUTH]) {\n        delete cred[PASSWORD]\n        delete cred[REPEAT_PASSWORD]\n    }\n\n    // Because the data object is used as the payload of a PUT request, properties that are omitted will be removed\n    // To prevent this, all remaining owned properties are copied from the user to the data object\n    // This is only required when editing users, because new users can't have such properties\n    if (!isNewUser) {\n        for (const ownedPropName of userModelOwnedProperties) {\n            if (user[ownedPropName] && !(ownedPropName in data)) {\n                data[ownedPropName] = user[ownedPropName]\n            }\n        }\n    }\n\n    return data\n}\n\nexport const parseLocaleUrl = (type, username, val) => {\n    return `/userSettings/key${type}Locale?user=${username}&value=${val}`\n}\n\nexport const mapLocale = ({ locale, name }) => {\n    return {\n        id: locale,\n        label: name,\n    }\n}\n\n/**\n * When querying the server for organisation units that match a certain query string, the server returns all units from the system root.\n * However, the current user should only be able to see organisation units that he has access to.\n * @param {Object} orgUnits - A d2 ModelCollection instance of organisation units which has been filtered on the server by a query string\n * @param {*} orgUnitType - The type of organisation unit that should be used to restrict the results by\n * @returns {Array} - An filtered array of d2 models only including organisation units that the current user has access to\n * @function\n */\nexport const getRestrictedOrgUnits = (orgUnits, orgUnitType) => {\n    const { currentUser } = store.getState()\n\n    // Superuser can always see all org units\n    if (currentUser.authorities.has('ALL')) {\n        return orgUnits.toArray()\n    }\n\n    // Try the requested orgUnitType first and use currentUser.organisationUnits as fallback\n    const availableOrgUnits =\n        currentUser[orgUnitType].size > 0\n            ? currentUser[orgUnitType]\n            : currentUser[DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS]\n\n    return orgUnits.toArray().filter(unit => {\n        const isAvailableUnit = Boolean(availableOrgUnits.get(unit.id))\n        const hasAvailableAncestor =\n            !isAvailableUnit &&\n            unit.ancestors\n                .toArray()\n                .some(ancestor => Boolean(availableOrgUnits.get(ancestor.id)))\n\n        return isAvailableUnit || hasAvailableAncestor\n    })\n}\n\nexport const appendUsernameToDisplayName = userModelCollection => {\n    userModelCollection.forEach(user => {\n        user.displayName += ` (${user.userCredentials.username})`\n    })\n    return userModelCollection\n}\n\nexport const parse200Error = response => {\n    const messages = []\n    for (const typeReport of response.typeReports) {\n        for (const objectReport of typeReport.objectReports) {\n            for (const errorReport of objectReport.errorReports) {\n                messages.push({ message: errorReport.message })\n            }\n        }\n    }\n    return { messages }\n}\n\nexport const getAttributesWithValueAndId = (\n    userCollection,\n    value,\n    attributeId\n) =>\n    userCollection\n        .toArray()\n        .reduce(\n            (list, user) =>\n                list.concat(\n                    user.attributeValues.filter(\n                        attributeValue =>\n                            value === attributeValue.value &&\n                            attributeId === attributeValue.attribute.id\n                    )\n                ),\n            []\n        )\n","/* eslint-disable max-params */\n\nimport { getInstance } from 'd2/lib/d2'\nimport i18n from '@dhis2/d2-i18n'\nimport {\n    getQueryFields,\n    createListRequestData,\n    parseUserSaveData,\n    parseLocaleUrl,\n    getRestrictedOrgUnits,\n    mapLocale,\n    appendUsernameToDisplayName,\n    parse200Error,\n    getAttributesWithValueAndId,\n} from './utils'\n\nimport groupAuthorities from '../components/AuthorityEditor/utils/groupAuthorities'\n\nimport {\n    ORG_UNITS_QUERY_CONFIG,\n    CURRENT_USER_ORG_UNITS_FIELDS,\n} from '../constants/queryFields'\n\nimport {\n    INTERFACE_LANGUAGE,\n    DATABASE_LANGUAGE,\n    USE_DB_LOCALE,\n} from '../containers/UserForm/config'\n\n/**\n * The Api class exposes all necessary functions to get the required data from the DHIS2 web api.\n */\nclass Api {\n    /**\n     * On instantiation d2 and the d2-api instance are attached to the this scope, so they are easily accessible by its members.\n     * @constructor\n     */\n    constructor() {\n        getInstance().then(d2 => {\n            this.d2 = d2\n            this.d2Api = d2.Api.getApi()\n            // In development you can access d2 and d2Api via the console\n            if (process.env.NODE_ENV === 'development') {\n                window.d2 = this.d2\n                window.d2Api = this.d2Api\n            }\n        })\n    }\n\n    /**************************\n     ********* GENERIC ********\n     **************************/\n\n    getD2 = () => {\n        return this.d2\n    }\n\n    getContextPath = () => {\n        return this.d2.system.systemInfo.contextPath\n    }\n\n    getList = (entityName, page, filter) => {\n        const fields = getQueryFields(entityName)\n        const requestData = createListRequestData(\n            page,\n            filter,\n            fields,\n            entityName,\n            this.getCurrentUser()\n        )\n        return this.d2.models[entityName].list(requestData)\n    }\n\n    getItem = (entityName, id) => {\n        const data = { fields: getQueryFields(entityName, true) }\n        return this.d2.models[entityName].get(id, data)\n    }\n\n    genericFind = (entityName, propertyName, value) => {\n        return this.d2.models[entityName]\n            .filter()\n            .on(propertyName)\n            .equals(value)\n            .list({ fields: ['id'] })\n    }\n\n    /**************************\n     ********* USERS **********\n     **************************/\n\n    replicateUser = (id, username, password) => {\n        const url = `/users/${id}/replica`\n        const data = { username, password }\n        return this.d2Api.post(url, data)\n    }\n\n    /**\n     * Fetches organisation units matching the query string from the server.\n     * Once the results are returned they are filtered client-side\n     * to only contain organisation units available to the current user.\n     * Used by SearchableOrgUnitTree in UserForm and UserList.\n     * @param {String} query - They search string to let the server query on\n     * @param {String} orgUnitType - The type of organisation unit to use for client side filtering\n     * @returns {Array} A filtered array of organisation units\n     */\n    queryOrgUnits = (query, orgUnitType) => {\n        const listConfig = {\n            ...ORG_UNITS_QUERY_CONFIG,\n            query,\n        }\n        return this.d2.models.organisationUnits\n            .list(listConfig)\n            .then(orgUnits => getRestrictedOrgUnits(orgUnits, orgUnitType))\n    }\n\n    getAvailableUserRoles = () => {\n        const data = {\n            canIssue: true,\n            fields: ['id', 'displayName'],\n            paging: false,\n        }\n        return this.d2.models.userRoles.list(data)\n    }\n\n    getAvailableDataAnalyticsDimensionRestrictions = () => {\n        const url = '/dimensions/constraints'\n        const data = { fields: ['id', 'name', 'dimensionType'], paging: false }\n        return this.d2Api.get(url, data).then(({ dimensions }) => dimensions)\n    }\n\n    updateDisabledState = (id, disabled) => {\n        const url = `/users/${id}`\n        const data = { userCredentials: { disabled: disabled } }\n        return this.d2Api.patch(url, data)\n    }\n\n    disable2FA = id => {\n        const url = `/users/${id}`\n        const data = { userCredentials: { twoFA: false } }\n        return this.d2Api.patch(url, data)\n    }\n\n    getSelectedAndAvailableLocales = username => {\n        username = username ? encodeURIComponent(username) : null\n\n        const useDbLocaleOption = {\n            id: USE_DB_LOCALE,\n            label: i18n.t('Use database locale / no translation'),\n        }\n\n        const dbLocales = this.d2Api.get('/locales/db')\n        const uiLocales = this.d2Api.get('/locales/ui')\n\n        const uiLocale = username\n            ? this.d2Api.get(`/userSettings/keyUiLocale?user=${username}`)\n            : this.d2.system.settings.get('keyUiLocale')\n\n        const dbLocale = username\n            ? this.d2Api.get(`/userSettings/keyDbLocale?user=${username}`)\n            : Promise.resolve(USE_DB_LOCALE)\n\n        return Promise.all([dbLocales, uiLocales, dbLocale, uiLocale]).then(\n            ([dbLocales, uiLocales, dbLocale, uiLocale]) => ({\n                db: {\n                    available: [useDbLocaleOption, ...dbLocales.map(mapLocale)],\n                    selected: dbLocale || USE_DB_LOCALE,\n                },\n                ui: {\n                    available: uiLocales.map(mapLocale),\n                    selected: uiLocale,\n                },\n            })\n        )\n    }\n\n    getAttributes(entityType) {\n        return this.d2Api\n            .get('attributes', {\n                fields: [\n                    'id',\n                    'displayName',\n                    'mandatory',\n                    'unique',\n                    'valueType',\n                    'optionSet[options[id,displayName]]',\n                ],\n                filter: `${entityType}Attribute:eq:true`,\n                paging: false,\n            })\n            .then(resp => resp.attributes)\n    }\n\n    isAttributeUnique(entityType, modelId, attributeId, value) {\n        return (\n            this.d2.models[entityType]\n                // All users/userGroups but current\n                .filter()\n                .on('id')\n                .notEqual(modelId)\n                // Attribute id being validated\n                // NB: this only means we are filtering users that have ANY value\n                // on the current attributeId\n                .filter()\n                .on('attributeValues.attribute.id')\n                .equals(attributeId)\n                // Value on form\n                .filter()\n                .on('attributeValues.value')\n                .equals(value)\n                .list({\n                    paging: false,\n                    fields: ['id', 'attributeValues[value, attribute[id]]'],\n                })\n                .then(userCollection => {\n                    // If no users are found at this point, the attribute value is definitely unique\n                    if (userCollection.size === 0) {\n                        return true\n                    }\n\n                    // If users are returned, this can still include records with the SAME value\n                    // on ANOTHER attribute. So we have to filter on the current value and attributeId\n                    const attributesWithValueAndId = getAttributesWithValueAndId(\n                        userCollection,\n                        value,\n                        attributeId\n                    )\n\n                    return attributesWithValueAndId.length === 0\n                })\n        )\n    }\n\n    /**\n     * Will first execute a create/update user request, and if any locale values have been set will add subsequent request to update these too.\n     * @param {Object} values - Form data produced by redux-form\n     * @param {Object} user - A d2 user model instance\n     * @param {String} initialUiLocale - Locale string for the UI, i.e. 'en'\n     * @param {String} initialDbLocale - Locale string for the DB, i.e. 'fr'\n     * @returns {Promise} Promise object for the combined ajax calls to save a user\n     * @method\n     */\n    saveOrInviteUser = (\n        values,\n        user,\n        inviteUser,\n        initialUiLocale,\n        initialDbLocale,\n        attributeFields\n    ) => {\n        const userData = parseUserSaveData(\n            values,\n            user,\n            inviteUser,\n            attributeFields\n        )\n        const postUrl = inviteUser ? '/users/invite' : '/users'\n        const saveUserPromise = user.id\n            ? this.d2Api.update(`/users/${user.id}`, userData)\n            : this.d2Api.post(postUrl, userData)\n\n        return saveUserPromise.then(response => {\n            if (response.status === 'ERROR') {\n                return Promise.reject(parse200Error(response))\n            }\n\n            const localePromises = []\n            const username = encodeURIComponent(values.username)\n\n            // Add follow-up request for setting uiLocale if needed\n            const uiLocale = values[INTERFACE_LANGUAGE]\n            if (uiLocale !== initialUiLocale) {\n                localePromises.push(\n                    this.d2Api.post(parseLocaleUrl('Ui', username, uiLocale))\n                )\n            }\n\n            // Add follow-up request for setting dbLocale if needed\n            const dbLocale = values[DATABASE_LANGUAGE]\n            if (dbLocale !== initialDbLocale) {\n                const dbLocalePromise =\n                    dbLocale === USE_DB_LOCALE\n                        ? this.d2Api.delete(\n                              `/userSettings/keyDbLocale?user=${username}`\n                          )\n                        : this.d2Api.post(\n                              parseLocaleUrl('Db', username, dbLocale)\n                          )\n                localePromises.push(dbLocalePromise)\n            }\n\n            // Dummy follow-up request to prevent Promise.all error\n            // if neither locale fields need updating\n            if (localePromises.length === 0) {\n                localePromises.push(\n                    Promise.resolve('No locale changes detected')\n                )\n            }\n            // Updating locales after user in case the user is new\n            return Promise.all(localePromises)\n        })\n    }\n\n    /**************************\n     ***** USER GROUPS ********\n     **************************/\n\n    saveUserGroup(data) {\n        if (data.id) {\n            return this.d2Api.update(\n                `/userGroups/${data.id}?mergeMode=MERGE`,\n                data\n            )\n        }\n        return this.d2Api.post('/userGroups', data)\n    }\n\n    getManagedUsers = () => {\n        const data = {\n            fields: ['id', 'displayName', 'userCredentials[username]'],\n            paging: false,\n        }\n        return this.d2.models.user.list(data).then(appendUsernameToDisplayName)\n    }\n\n    // Also used by GroupForm\n    getAvailableUserGroups = () => {\n        const data = { fields: ['id', 'displayName'], paging: false }\n        return this.d2.models.userGroups.list(data)\n    }\n\n    /**************************\n     ****** USER ROLES ********\n     **************************/\n\n    // TODO: A proper API endpoint will be made available for this call once ALL struts apps\n    // have been ported to React. Once this is done we need to update this method.\n    getGroupedAuthorities = () => {\n        if (this.groupedAuths) {\n            // Return cached version if available\n            return Promise.resolve(this.groupedAuths)\n        }\n        const url = `${this.getContextPath()}/dhis-web-commons/security/getSystemAuthorities.action`\n        return this.d2Api.request('GET', url).then(({ systemAuthorities }) => {\n            // Store on instance for subsequent requests\n            return (this.groupedAuths = groupAuthorities(systemAuthorities))\n        })\n    }\n\n    // Calling role.save() would result in an error in d2 because d2 expects you always want to\n    // save { id: <ID> } objects but authorities should be saved as a plain JSON array\n    saveRole(data) {\n        if (data.id) {\n            return this.d2Api.update(`/userRoles/${data.id}`, data)\n        } else {\n            return this.d2Api.post('/userRoles/', data)\n        }\n    }\n\n    /**************************\n     ****** CURRENT USER ******\n     **************************/\n\n    getCurrentUser = () => {\n        return this.d2.currentUser\n    }\n\n    getCurrentUserGroupsAndRoles = () => {\n        return this.d2Api\n            .get('me', {\n                fields: 'userGroups[id],userCredentials[userRoles[id]]',\n            })\n            .then(res => ({\n                userGroupIds: res.userGroups.map(({ id }) => id),\n                userRoleIds: res.userCredentials.userRoles.map(({ id }) => id),\n            }))\n    }\n\n    initCurrentUser = () => {\n        return Promise.all([\n            this.getCurrentUserGroupsAndRoles(),\n            this.getCurrentUserOrgUnits(),\n            this.getSystemOrgUnitRoots(),\n        ]).then(\n            ([\n                { userGroupIds, userRoleIds },\n                {\n                    organisationUnits,\n                    dataViewOrganisationUnits,\n                    teiSearchOrganisationUnits,\n                },\n                systemOrganisationUnitRoots,\n            ]) => {\n                return Object.assign(this.d2.currentUser, {\n                    userGroupIds,\n                    userRoleIds,\n                    organisationUnits,\n                    dataViewOrganisationUnits,\n                    teiSearchOrganisationUnits,\n                    systemOrganisationUnitRoots,\n                })\n            }\n        )\n    }\n\n    refreshCurrentUser = () => {\n        const CurrentUserClass = Object.getPrototypeOf(this.d2.currentUser)\n            .constructor\n        const meFields = [\n            ':all',\n            '!userGroups',\n            '!organisationUnits',\n            'userCredentials[:all,!user,!userRoles]',\n        ]\n        const models = this.d2.models\n\n        return Promise.all([\n            this.d2Api.get('me', { fields: meFields }),\n            this.d2Api.get('me/authorization'),\n            this.d2Api.get('userSettings'),\n        ]).then(([me, authorities, userSettings]) => {\n            this.d2.currentUser = CurrentUserClass.create(\n                me,\n                authorities,\n                models,\n                userSettings\n            )\n            return this.initCurrentUser()\n        })\n    }\n\n    getCurrentUserOrgUnits = () => {\n        return this.d2.models.users.get(\n            this.d2.currentUser.id,\n            CURRENT_USER_ORG_UNITS_FIELDS\n        )\n    }\n\n    getSystemOrgUnitRoots = () => {\n        return this.d2.models.organisationUnits\n            .list({\n                paging: false,\n                level: 1,\n                fields: 'id,path,displayName,children::isNotEmpty',\n            })\n            .then(modelCollection => {\n                return modelCollection.toArray()\n            })\n    }\n\n    updateCurrentUserGroupMembership = (groupId, deleteMembership) => {\n        const method = deleteMembership ? 'delete' : 'post'\n        const url = `/users/${this.d2.currentUser.id}/userGroups/${groupId}`\n        return this.d2Api[method](url)\n    }\n}\nconst api = new Api()\nexport default api\n","/* eslint-disable max-params */\n\n/**\n * This module contains the actions that may be dispatched to reducers. Only functions that are out of the ordinary have been documented.\n * @module actions\n */\n\nimport * as ACTIONS from '../constants/actionTypes'\nimport { PAGE as DEFAULT_PAGE } from '../constants/defaults'\nimport api from '../api'\n\n/**\n * Convenience function for creating a redux action\n * @param {String} type - The action type\n * @param {any} payload - The action payload\n * @return {Object} - An action object with type and payload property\n * @function\n */\nconst createAction = (type, payload) => ({ type, payload })\n\n/**********\n * THUNKS *\n **********/\n\n/**\n * Helper function for fetching lists. Used by getList, incrementPage and decrementPage.\n * @param {Function} dispatch - Redux helper function that can dispatch an action\n * @param {Object} promise - The promise to await\n * @param {String} type - The type of list that was requested\n * @param {Boolean} silent - Flag by which dispatching the LIST_REQUESTED action can be skipped\n * @function\n */\nconst createListActionSequence = async (dispatch, promise, type, silent) => {\n    if (!silent) dispatch(createAction(ACTIONS.LIST_REQUESTED, type))\n\n    try {\n        const items = await promise\n        dispatch(createAction(ACTIONS.LIST_RECEIVED, { type, items }))\n    } catch (error) {\n        dispatch(createAction(ACTIONS.LIST_ERRORED, { type, error }))\n    }\n}\n\nexport const getList = (entityName, silent) => (dispatch, getState) => {\n    const { filter, pager } = getState()\n    const page = pager ? pager.page : DEFAULT_PAGE\n    const promise = api.getList(entityName, page, filter)\n    createListActionSequence(dispatch, promise, entityName, silent)\n}\n\nexport const incrementPage = pager => (dispatch, getState) => {\n    const {\n        list: { type },\n    } = getState()\n    createListActionSequence(dispatch, pager.getNextPage(), type)\n}\n\nexport const decrementPage = pager => (dispatch, getState) => {\n    const {\n        list: { type },\n    } = getState()\n    createListActionSequence(dispatch, pager.getPreviousPage(), type)\n}\n\n/**\n * Helper function for general fetch scenarios. Used by `getItem`, `initCurrentUser` and `refreshCurrentUser`.\n * @param {Object} actions - The action types to dispatch\n * @param {String} actions.requested - The name of the action to dispatch when initializing the request\n * @param {String} actions.received - The name of the action to dispatch on successfull response\n * @param {String} actions.errored - The name of the action to dispatch when request failed\n * @param {Object} promise - The promise to await\n * @param {Function} dispatch - Redux helper function that can dispatch an action\n * @function\n */\nconst createAsyncActionSequence = async (actionTypes, promise, dispatch) => {\n    dispatch(createAction(actionTypes.requested))\n\n    try {\n        const payload = await promise\n        dispatch(createAction(actionTypes.received, payload))\n    } catch (error) {\n        dispatch(createAction(actionTypes.errored, error))\n    }\n}\n/**\n * Gets an item of a specified type and dispatches actions on request, response and error\n * @param {String} entityName - The type of item to fetch, i.e. user / userRole / userGroup\n * @param {String} id - The item ID\n * @function\n */\nexport const getItem = (entityName, id) => dispatch => {\n    createAsyncActionSequence(\n        {\n            requested: ACTIONS.ITEM_REQUESTED,\n            received: ACTIONS.ITEM_RECEIVED,\n            errored: ACTIONS.ITEM_ERRORED,\n        },\n        api.getItem(entityName, id),\n        dispatch\n    )\n}\n\nconst currentUserActions = {\n    requested: ACTIONS.CURRENT_USER_REQUESTED,\n    received: ACTIONS.CURRENT_USER_RECEIVED,\n    errored: ACTIONS.CURRENT_USER_ERRORED,\n}\n\nexport const initCurrentUser = () => dispatch => {\n    createAsyncActionSequence(\n        currentUserActions,\n        api.initCurrentUser(),\n        dispatch\n    )\n}\n\nexport const refreshCurrentUser = () => dispatch => {\n    createAsyncActionSequence(\n        currentUserActions,\n        api.refreshCurrentUser(),\n        dispatch\n    )\n}\n\n/*****************\n * PLAIN ACTIONS *\n *****************/\nexport const initNewItem = entityType => {\n    const newItem = api.getD2().models[entityType].create()\n    return createAction(ACTIONS.INIT_NEW_ITEM, newItem)\n}\n\nexport const clearItem = () => {\n    return createAction(ACTIONS.CLEAR_ITEM)\n}\n\nexport const updateFilter = (updateKey, updateValue) => {\n    return createAction(ACTIONS.FILTER_UPDATED, {\n        updateKey,\n        updateValue,\n    })\n}\n\nexport const resetFilter = () => {\n    return createAction(ACTIONS.FILTER_RESET)\n}\n\nexport const resetPager = () => {\n    return createAction(ACTIONS.PAGER_RESET)\n}\n\nexport const showSnackbar = props => {\n    return createAction(ACTIONS.SHOW_SNACKBAR, props)\n}\n\nexport const hideSnackbar = () => {\n    return createAction(ACTIONS.HIDE_SNACKBAR)\n}\n\nexport const showDialog = (content, props) => {\n    return createAction(ACTIONS.SHOW_DIALOG, { content, props })\n}\n\nexport const hideDialog = () => {\n    return createAction(ACTIONS.HIDE_DIALOG)\n}\n\nexport const showSharingDialog = (id, type) => {\n    return createAction(ACTIONS.SHOW_SHARING_DIALOG, { id, type })\n}\n\nexport const hideSharingDialog = () => {\n    return createAction(ACTIONS.HIDE_SHARING_DIALOG)\n}\n","import history from './history'\n/**\n * Pushed new routes to the hashHistory object.\n * Can be used to imperatively trigger route changes in the Router.\n * @param {String} path - Route path to navigate to\n * @memberof module:utils\n * @function\n */\nconst navigateTo = path => {\n    history.push(path)\n}\n\nexport default navigateTo\n","/**\n * If you import this module into a component that renders a DataTable,\n * it will render MaterialUI checkboxes for TRUE values and keep FALSE values empty.\n * @module List/booleanValueRenderer\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport CheckIcon from 'material-ui/svg-icons/navigation/check'\nimport { addValueRenderer } from 'd2-ui/lib/data-table/data-value/valueRenderers'\n\n/**\n * Defines behavior for the DataTable when receiving boolean values\n * @param {Object} DataTableCell - A DataTableCell containing a value property\n * @param {Boolean} DataTableCell.value - The cell value\n * @returns Either a CheckIcon or null\n */\nconst BooleanCellField = ({ value }) =>\n    value ? (\n        <div style={{ width: '40px' }}>\n            <CheckIcon />\n        </div>\n    ) : null\n\nBooleanCellField.propTypes = { value: PropTypes.bool }\n\naddValueRenderer(({ value }) => typeof value === 'boolean', BooleanCellField)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { connect } from 'react-redux'\nimport FloatingActionButton from 'material-ui/FloatingActionButton'\nimport ContentAdd from 'material-ui/svg-icons/content/add'\nimport DataTable from 'd2-ui/lib/data-table/DataTable.component'\nimport Pagination from 'd2-ui/lib/pagination/Pagination.component'\nimport LoadingMask from 'd2-ui/lib/loading-mask/LoadingMask.component'\nimport Heading from 'd2-ui/lib/headings/Heading.component'\nimport 'd2-ui/lib/css/DataTable.css'\nimport 'd2-ui/lib/css/Pagination.css'\nimport navigateTo from '../../utils/navigateTo'\nimport { listSelector, pagerSelector } from '../../selectors'\nimport {\n    getList,\n    resetFilter,\n    resetPager,\n    incrementPage,\n    decrementPage,\n    showSnackbar,\n    hideSnackbar,\n} from '../../actions'\nimport ErrorMessage from '../ErrorMessage'\nimport './booleanValueRenderer'\n\nconst styles = {\n    dataTableWrap: {\n        flex: 1,\n        marginBottom: '4rem',\n    },\n    clearBoth: {\n        clear: 'both',\n    },\n    filterBar: {\n        display: 'table',\n        marginBottom: '1rem',\n        width: '100%',\n    },\n    headerBarPagination: {\n        float: 'right',\n        marginTop: '14px',\n    },\n    headerBarFilterWrap: {\n        display: 'table',\n        marginRight: '230px',\n    },\n    pagination: {\n        userSelect: 'none',\n    },\n}\n\n/**\n * Generic component that fetches list data, and displays this in a DataTable with paging and filtering\n */\nclass List extends Component {\n    componentDidMount() {\n        const {\n            items,\n            getList,\n            resetFilter,\n            resetPager,\n            entityType,\n            listType,\n        } = this.props\n\n        // Only fetch when there is no suitable list available\n        if (items === null || listType !== entityType) {\n            // If list type is defined but doesn't match current entity\n            // this means the user has switched section so pager and filter must be reset\n            if (listType !== entityType) {\n                resetFilter()\n                resetPager()\n            }\n            getList(entityType)\n        }\n    }\n\n    executeEditIfAllowed = model => {\n        const {\n            isContextActionAllowed,\n            primaryAction,\n            showSnackbar,\n            hideSnackbar,\n        } = this.props\n        if (isContextActionAllowed(model, 'edit')) {\n            primaryAction(model)\n        } else {\n            showSnackbar({\n                message: `${i18n.t('You are not allowed to edit')} ${\n                    model.displayName\n                }`,\n                action: i18n.t('Confirm'),\n                autoHideDuration: null,\n                onActionClick: hideSnackbar,\n            })\n        }\n    }\n\n    getPagerConfig(pager) {\n        if (!pager) {\n            return {\n                page: null,\n                pageCount: null,\n                total: null,\n                currentlyShown: null,\n            }\n        }\n        return pager\n    }\n\n    renderPagination() {\n        const { pager, items, incrementPage, decrementPage } = this.props\n        const { page, pageCount, total, currentlyShown } = this.getPagerConfig(\n            pager\n        )\n        const shouldHide =\n            !items || items.length === 0 || typeof items === 'string'\n        const style = shouldHide\n            ? { ...styles.pagination, visibility: 'hidden' }\n            : styles.pagination\n        const paginationProps = {\n            hasNextPage: () =>\n                page && items && items.length && page < pageCount,\n            hasPreviousPage: () => page && items && items.length && page > 1,\n            onNextPageClick: () => {\n                incrementPage(pager)\n            },\n            onPreviousPageClick: () => {\n                decrementPage(pager)\n            },\n            total,\n            currentlyShown,\n            style,\n        }\n\n        return (\n            <div style={style}>\n                <Pagination {...paginationProps} />\n            </div>\n        )\n    }\n\n    renderHeaderBar() {\n        const { FilterComponent, entityType } = this.props\n        return (\n            <div className=\"data-table__filter-bar\" style={styles.filterBar}>\n                <div style={styles.headerBarPagination}>\n                    {this.renderPagination()}\n                </div>\n                <div style={styles.headerBarFilterWrap}>\n                    <FilterComponent entityType={entityType} />\n                </div>\n            </div>\n        )\n    }\n\n    renderDataTable() {\n        const {\n            items,\n            columns,\n            contextMenuActions,\n            contextMenuIcons,\n            isContextActionAllowed,\n        } = this.props\n\n        if (typeof items === 'string') {\n            const introText = i18n.t('There was an error fetching the list')\n            return <ErrorMessage introText={introText} errorMessage={items} />\n        }\n\n        if (items === null) {\n            return <LoadingMask />\n        }\n\n        if (items.length === 0) {\n            return <div style={styles.clearBoth}>No results found.</div>\n        }\n        return (\n            <DataTable\n                rows={items}\n                columns={columns}\n                primaryAction={this.executeEditIfAllowed}\n                contextMenuActions={contextMenuActions}\n                contextMenuIcons={contextMenuIcons}\n                isContextActionAllowed={isContextActionAllowed}\n            />\n        )\n    }\n\n    render() {\n        const { sectionName, newItemPath, className } = this.props\n        return (\n            <div style={styles.dataTableWrap} className={className}>\n                <Heading>{sectionName}</Heading>\n                {this.renderHeaderBar()}\n                {this.renderDataTable()}\n                {this.renderPagination()}\n                <FloatingActionButton\n                    className=\"entity-list__add-new-entity\"\n                    onClick={() => navigateTo(newItemPath)}\n                >\n                    <ContentAdd />\n                </FloatingActionButton>\n            </div>\n        )\n    }\n}\n\nList.propTypes = {\n    items: PropTypes.oneOfType([PropTypes.array, PropTypes.string]),\n    pager: PropTypes.object,\n    sectionName: PropTypes.string.isRequired,\n    getList: PropTypes.func.isRequired,\n    incrementPage: PropTypes.func.isRequired,\n    decrementPage: PropTypes.func.isRequired,\n    resetPager: PropTypes.func.isRequired,\n    resetFilter: PropTypes.func.isRequired,\n    showSnackbar: PropTypes.func.isRequired,\n    hideSnackbar: PropTypes.func.isRequired,\n    entityType: PropTypes.string.isRequired,\n    newItemPath: PropTypes.string.isRequired,\n    listType: PropTypes.string,\n    FilterComponent: PropTypes.func.isRequired,\n    columns: PropTypes.arrayOf(String).isRequired,\n    primaryAction: PropTypes.func.isRequired,\n    contextMenuActions: PropTypes.object.isRequired,\n    contextMenuIcons: PropTypes.object.isRequired,\n    isContextActionAllowed: PropTypes.func.isRequired,\n    className: PropTypes.string,\n}\n\nList.defaultProps = {\n    className: 'paged-filterable-data-table',\n}\n\nconst mapStateToProps = state => {\n    return {\n        listType: state.list.type,\n        items: listSelector(state.list.items, state.currentUser.userGroupIds),\n        pager: pagerSelector(state.pager),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    {\n        getList,\n        resetFilter,\n        resetPager,\n        incrementPage,\n        decrementPage,\n        showSnackbar,\n        hideSnackbar,\n    }\n)(List)\n","import List from './List'\nexport default List\n","import store from '../store'\nimport api from '../api'\nimport { refreshCurrentUser as refresh } from '../actions'\nimport { USER, USER_ROLE, USER_GROUP } from '../constants/entityTypes'\n\n/**\n * This function can be called after users/ userRoles/ urserGroups have been updated or deleted.\n * It will determine if these changes impact the current user.\n * If so, an action is dispatched that will trigger the currentUser state to be refreshed.\n * Or, in case a currentUser was disabled or removed it will trigger a page refresh\n * Currently this function is used by:\n * - `UserForm.saveGroup`\n * - `GroupForm.saveGroup`\n * - `RoleForm.saveRole`\n * - `onRemoveConfirm` in `sharedActions`\n * - `updateDisabledState` in `UserContextMenuActions`\n *\n * @param {String} entityType - The type of object that was changed\n * @param {Object} model - A d2 model or POJO that provides at least the ID of the entity that was changed\n * @param {String} [changeType] - The type of change that happened\n * @memberof module:utils\n * @function\n */\nconst detectCurrentUserChanges = (model, disable) => {\n    const { currentUser } = store.getState()\n    const entityType = model.modelDefinition.name\n\n    if (entityType === USER && model.id === currentUser.id) {\n        disable ? logout() : refreshCurrentUser()\n    }\n\n    if (\n        entityType === USER_ROLE &&\n        currentUser.userRoleIds.includes(model.id)\n    ) {\n        refreshCurrentUser()\n    }\n\n    if (\n        entityType === USER_GROUP &&\n        currentUser.userGroupIds.includes(model.id)\n    ) {\n        refreshCurrentUser()\n    }\n}\n\nconst refreshCurrentUser = () => {\n    store.dispatch(refresh())\n}\n\nconst logout = () => {\n    const contextPath = api.getContextPath()\n    const logoutSuffix = '/dhis-web-commons-security/logout.action'\n    const logoutUrl = contextPath + logoutSuffix\n    window.location.assign(logoutUrl)\n}\n\nexport default detectCurrentUserChanges\n","/* eslint-disable max-params */\n\nimport store from '../store'\nimport {\n    getList,\n    showSnackbar,\n    hideSnackbar,\n    showSharingDialog,\n} from '../actions'\nimport createHumanErrorMessage from './createHumanErrorMessage'\nimport detectCurrentUserChanges from './detectCurrentUserChanges'\nimport i18n from '@dhis2/d2-i18n'\n\nexport const deleteModel = ({ model, entityType }) => {\n    const interpolator = {\n        type: model.modelDefinition.displayName,\n        displayName: model.displayName,\n    }\n    const confirmMsg = i18n.t(\n        'Are you sure you want to remove the {{type}} \"{{displayName}}\"?',\n        interpolator\n    )\n    const successMsg = i18n.t(\n        '{{type}} \"{{displayName}}\" removed successfully',\n        interpolator\n    )\n    const errorMsg = i18n.t(\n        'There was a problem removing {{type}} \"{{displayName}}\"?',\n        interpolator\n    )\n    const snackbarProps = {\n        message: confirmMsg,\n        action: i18n.t('Confirm'),\n        autoHideDuration: null,\n        onActionClick: () =>\n            onRemoveConfirm(model, successMsg, errorMsg, entityType),\n    }\n\n    store.dispatch(showSnackbar(snackbarProps))\n}\n\nconst onRemoveConfirm = async (model, successMsg, errorMsg, entityType) => {\n    store.dispatch(hideSnackbar())\n\n    try {\n        await model.delete()\n        store.dispatch(showSnackbar({ message: successMsg }))\n        store.dispatch(getList(entityType))\n        detectCurrentUserChanges(model)\n    } catch (error) {\n        const msg = createHumanErrorMessage(error, errorMsg)\n        store.dispatch(showSnackbar({ message: msg }))\n    }\n}\n\nexport const openSharingSettings = ({ data: model }) => {\n    store.dispatch(showSharingDialog(model.id, model.modelDefinition.name))\n}\n","/* eslint-disable max-params */\n\nimport i18n from '@dhis2/d2-i18n'\nimport capitalize from 'lodash.capitalize'\nimport api from '../api'\nimport { USER, USER_GROUP } from '../constants/entityTypes'\nimport { USER_ATTRIBUTE_FIELD_PREFIX } from './attributeFieldHelpers'\nimport { USERNAME, FORM_NAME as USER_FORM } from '../containers/UserForm/config'\nimport {\n    CODE,\n    NAME,\n    FORM_NAME as GROUP_FORM,\n} from '../containers/GroupForm/config'\nimport { FORM_NAME as REPLICATE_USER_FORM } from '../components/ReplicateUserForm'\nimport createHumanErrorMessage from './createHumanErrorMessage'\n\nexport async function asyncValidatorSwitch(values, _, props, blurredField) {\n    const priorErrors = props.asyncErrors\n    // Skip aSync validation when submitting the form because all fields have been\n    // validated on blur anyway, and the server will reject them\n    if (!blurredField && !priorErrors) {\n        return Promise.resolve()\n    }\n\n    let newError\n    if (props.form === USER_FORM && blurredField === USERNAME) {\n        newError = await getUserNameError(values, props)\n    } else if (\n        props.form === GROUP_FORM &&\n        (blurredField === CODE || blurredField === NAME)\n    ) {\n        newError = await getGenericUniquenessError(values, props, blurredField)\n    } else {\n        newError = await getAttributeUniquenessError(\n            values,\n            props,\n            blurredField\n        )\n    }\n\n    const errors =\n        priorErrors || newError ? { ...priorErrors, ...newError } : undefined\n\n    if (errors) {\n        throw errors\n    } else {\n        return Promise.resolve()\n    }\n}\n\nexport async function asyncValidateUsername(values, _, props, blurredField) {\n    return asyncSingleFieldValidator(\n        values,\n        props,\n        blurredField,\n        getUserNameError\n    )\n}\n\nexport async function asyncValidateUniqueness(values, _, props, blurredField) {\n    return asyncSingleFieldValidator(\n        values,\n        props,\n        blurredField,\n        getGenericUniquenessError\n    )\n}\n\nasync function asyncSingleFieldValidator(\n    values,\n    props,\n    blurredField,\n    apiMethod\n) {\n    if (!blurredField) {\n        return Promise.resolve()\n    }\n    const error = await apiMethod(values, props, blurredField)\n    if (error) {\n        throw error\n    } else {\n        return Promise.resolve()\n    }\n}\n\nasync function getUserNameError(values, props) {\n    const newUserName = values[USERNAME]\n    const editingExistingUser =\n        props.form !== REPLICATE_USER_FORM && props.user && props.user.id\n\n    if (!newUserName || editingExistingUser) {\n        return Promise.resolve()\n    }\n\n    try {\n        const modelCollection = await api.genericFind(\n            'users',\n            'userCredentials.username',\n            newUserName\n        )\n        if (modelCollection.size > 0) {\n            return {\n                [USERNAME]: i18n.t('Username already taken'),\n            }\n        }\n    } catch (error) {\n        return {\n            [USERNAME]: i18n.t(\n                'There was a problem whilst checking the availability of this username'\n            ),\n        }\n    }\n}\n\n/**\n * Calls the genericFind method of the Api instance to find out whether a userRole/userGroup model instance with the same property value exists\n * @param {Object} values - redux form values object\n * @param {Object} props - Component properties, containing either a userRole or userGroup model\n * @param {Object} fieldName - The property name to check on uniqueness\n * @returns {Object} errors - Will be empty of the entry was unique. Otherwise will contain error message  for duplicate property values.\n * @memberof module:utils\n * @function\n */\n\nasync function getGenericUniquenessError(values, props, fieldName) {\n    const { group, role } = props\n    const model = role || group\n    const entityName = model.modelDefinition.name\n    const fieldValue = values[fieldName]\n    const fieldDisplayName = capitalize(fieldName)\n\n    if (!fieldValue) {\n        return Promise.resolve()\n    }\n\n    try {\n        const modelCollection = await api.genericFind(\n            entityName,\n            fieldName,\n            fieldValue\n        )\n        if (modelCollection.size > 0) {\n            const foundId = modelCollection.values().next().value.id\n            if (foundId !== model.id) {\n                return {\n                    [fieldName]: i18n.t(\n                        '{{fieldDisplayName}} is already taken',\n                        {\n                            fieldDisplayName,\n                        }\n                    ),\n                }\n            }\n        }\n    } catch (error) {\n        const fallBackMsg = i18n.t(\n            'Could not verify if this {{fieldDisplayName}} is unique',\n            {\n                fieldDisplayName,\n            }\n        )\n\n        return {\n            [fieldName]: createHumanErrorMessage(error, fallBackMsg),\n        }\n    }\n}\n\nasync function getAttributeUniquenessError(values, props, blurredField) {\n    const value = values[blurredField]\n\n    if (!value) {\n        return Promise.resolve()\n    }\n\n    const entityType = props.form === USER_FORM ? USER : USER_GROUP\n    const id =\n        entityType === USER ? props.user.id || '_' : props.group.id || '_'\n    const attributeId = blurredField.replace(USER_ATTRIBUTE_FIELD_PREFIX, '')\n\n    try {\n        const isUnique = await api.isAttributeUnique(\n            entityType,\n            id,\n            attributeId,\n            value\n        )\n        if (!isUnique) {\n            return {\n                [blurredField]: i18n.t(\n                    'Attribute value needs to be unique, value already taken.'\n                ),\n            }\n        }\n    } catch (error) {\n        return {\n            [blurredField]: i18n.t(\n                'There was a problem checking if this attribute value is unique'\n            ),\n        }\n    }\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Field, reduxForm } from 'redux-form'\nimport { RaisedButton } from 'material-ui'\nimport { renderTextField } from '../utils/fieldRenderers'\nimport i18n from '@dhis2/d2-i18n'\nimport api from '../api'\nimport { connect } from 'react-redux'\nimport { USER } from '../constants/entityTypes'\nimport { USERNAME, PASSWORD } from '../containers/UserForm/config'\nimport { username, password } from '../utils/validators'\nimport { asyncValidateUsername } from '../utils/validatorsAsync'\nimport createHumanErrorMessage from '../utils/createHumanErrorMessage'\nimport { getList, hideDialog, showSnackbar, hideSnackbar } from '../actions'\n\nexport const FORM_NAME = 'replicateUserForm'\n\n/**\n * Form component for replicating a using redux-form and displayed in a Dialog\n */\nclass ReplicateUserForm extends Component {\n    replicateUser = async data => {\n        const { user, hideDialog } = this.props\n        const { username, password } = data\n        try {\n            await api.replicateUser(user.id, username, password)\n            this.replicateSuccesHandler(user.displayName)\n        } catch (error) {\n            this.replicateErrorHandler(error)\n        }\n        hideDialog()\n    }\n\n    replicateSuccesHandler = displayName => {\n        const { getList, showSnackbar } = this.props\n        const message = i18n.t(\n            'User \"{{displayName}}\" replicated successfuly',\n            {\n                displayName,\n            }\n        )\n        showSnackbar({ message })\n        getList(USER, true)\n    }\n\n    replicateErrorHandler = error => {\n        const { showSnackbar } = this.props\n        showSnackbar({\n            message: createHumanErrorMessage(\n                error,\n                i18n.t('There was a problem replicating the user')\n            ),\n        })\n    }\n\n    render() {\n        const {\n            submitting,\n            pristine,\n            valid,\n            handleSubmit,\n            hideDialog,\n            asyncValidating,\n        } = this.props\n\n        const disableSubmit = Boolean(\n            submitting || asyncValidating || pristine || !valid\n        )\n\n        return (\n            <form\n                autoComplete=\"off\"\n                onSubmit={handleSubmit(this.replicateUser)}\n            >\n                <Field\n                    name={USERNAME}\n                    component={renderTextField}\n                    label={i18n.t('Username')}\n                    hintText={i18n.t('Username for new user')}\n                    validate={[username]}\n                    autoComplete=\"new-password\"\n                />\n                <Field\n                    name={PASSWORD}\n                    component={renderTextField}\n                    label={i18n.t('Password')}\n                    hintText={i18n.t('Password for new user')}\n                    validate={[password]}\n                    type=\"password\"\n                    autoComplete=\"new-password\"\n                />\n                <div style={{ marginTop: 16 }}>\n                    <RaisedButton\n                        label={i18n.t('Replicate')}\n                        type=\"submit\"\n                        disabled={disableSubmit}\n                        primary={true}\n                    />\n                    <RaisedButton\n                        label={i18n.t('Cancel')}\n                        onClick={hideDialog}\n                        style={{ marginLeft: 8 }}\n                    />\n                </div>\n            </form>\n        )\n    }\n}\n\nReplicateUserForm.propTypes = {\n    user: PropTypes.object.isRequired,\n    hideDialog: PropTypes.func.isRequired,\n    getList: PropTypes.func.isRequired,\n    showSnackbar: PropTypes.func.isRequired,\n    formState: PropTypes.object,\n    asyncValidating: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    pristine: PropTypes.bool.isRequired,\n    submitting: PropTypes.bool.isRequired,\n    valid: PropTypes.bool.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({ formState: state.form[FORM_NAME] })\n\nconst ReduxFormWrapped = reduxForm({\n    form: FORM_NAME,\n    asyncValidate: asyncValidateUsername,\n    asyncBlurFields: [USERNAME],\n})(ReplicateUserForm)\n\nexport default connect(\n    mapStateToProps,\n    {\n        getList,\n        hideDialog,\n        showSnackbar,\n        hideSnackbar,\n    }\n)(ReduxFormWrapped)\n","/**\n * Defines the UserList context menu for current user on a given UserUser model instance.\n * Contains definitions for menu item visibility, individual menu item actions, icons and names.\n * @module containers/UserList/UserContextMenuActions\n */\n\nimport React from 'react'\nimport i18n from '@dhis2/d2-i18n'\nimport Action from 'd2-ui/lib/action/Action'\nimport navigateTo from '../../utils/navigateTo'\nimport store from '../../store'\nimport api from '../../api'\nimport { deleteModel } from '../../utils/sharedActions'\nimport { USER } from '../../constants/entityTypes'\nimport {\n    showDialog,\n    hideDialog,\n    showSnackbar,\n    hideSnackbar,\n    getList,\n} from '../../actions'\nimport ReplicateUserForm from '../../components/ReplicateUserForm'\nimport createHumanErrorMessage from '../../utils/createHumanErrorMessage'\nimport detectCurrentUserChanges from '../../utils/detectCurrentUserChanges'\n\nconst profile = 'profile'\nconst edit = 'edit'\nconst remove = 'remove'\nconst replicate = 'replicate'\nconst disable = 'disable'\nconst enable = 'enable'\nconst disable_2fa = 'disable_2fa'\n\n/**\n * Determines whether a specific user action should be visible for current user and given a User Model instance\n * @param {Object} model - d2 User model instance\n * @param {String} action - Action name\n * @returns {Boolean} - Action visibility\n * @function\n */\nexport const isUserContextActionAllowed = (model, action) => {\n    const { currentUser } = store.getState()\n\n    if (!model) {\n        return false\n    }\n\n    const {\n        access,\n        userCredentials: { disabled, twoFA },\n    } = model\n\n    switch (action) {\n        case profile:\n            return access.read\n        case edit:\n            return access.update\n        case remove:\n            return currentUser.id !== model.id && access.delete\n        case replicate:\n            return (\n                access.update && currentUser.authorities.has('F_REPLICATE_USER')\n            )\n        case disable:\n            return access.update && !disabled\n        case enable:\n            return access.update && disabled\n        case disable_2fa:\n            return access.update && twoFA\n        default:\n            return true\n    }\n}\n\nexport const userContextMenuIcons = {\n    [profile]: 'account_circle',\n    [edit]: 'edit',\n    [remove]: 'delete',\n    [replicate]: 'content_copy',\n    [disable]: 'block',\n    [enable]: 'playlist_add_check',\n    [disable_2fa]: 'phonelink_erase',\n}\n\nexport const userContextMenuActions = Action.createActionsFromNames([\n    profile,\n    edit,\n    remove,\n    replicate,\n    disable,\n    enable,\n    disable_2fa,\n])\n\nuserContextMenuActions.profile.subscribe(({ data: { id } }) => {\n    navigateTo(`/users/view/${id}`)\n})\n\nuserContextMenuActions.edit.subscribe(({ data: { id } }) => {\n    navigateTo(`/users/edit/${id}`)\n})\n\nuserContextMenuActions.remove.subscribe(({ data: user }) => {\n    const params = {\n        model: user,\n        entityType: USER,\n    }\n    deleteModel(params)\n})\n\nuserContextMenuActions.replicate.subscribe(({ data: user }) => {\n    const content = <ReplicateUserForm user={user} />\n    const props = {\n        onRequestClose: () => store.dispatch(hideDialog()),\n        title: i18n.t('Replicate user'),\n    }\n    store.dispatch(showDialog(content, props))\n})\n\nuserContextMenuActions.disable.subscribe(({ data }) => {\n    updateDisabledState(data, true)\n})\n\nuserContextMenuActions.enable.subscribe(({ data }) => {\n    updateDisabledState(data, false)\n})\n\nuserContextMenuActions.disable_2fa.subscribe(({ data }) => {\n    showDisable2FAConfirmation(data)\n})\n\nconst showDisable2FAConfirmation = model => {\n    const baseMsg = i18n.t(\n        'Are you sure you want to disable two factor authentication for'\n    )\n    const snackbarProps = {\n        message: `${baseMsg} ${model.displayName}`,\n        action: i18n.t('Confirm'),\n        autoHideDuration: null,\n        onActionClick: () => onDisable2FAConfirm(model),\n    }\n    store.dispatch(showSnackbar(snackbarProps))\n}\n\nconst onDisable2FAConfirm = async model => {\n    store.dispatch(hideSnackbar())\n\n    const { displayName, id } = model\n    try {\n        await api.disable2FA(id)\n        const baseMsg = i18n.t(\n            'Succesfully disabled two factor authentication for'\n        )\n        store.dispatch(showSnackbar({ message: `${baseMsg} ${displayName}` }))\n        store.dispatch(getList(USER))\n    } catch (error) {\n        store.dispatch(\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t(\n                        'There was a problem updating two factor authentication'\n                    )\n                ),\n            })\n        )\n    }\n}\n\nconst updateDisabledState = (model, shouldDisable) => {\n    const baseMsg = shouldDisable\n        ? i18n.t('Are you sure you want to disable')\n        : i18n.t('Are you sure you want to enable')\n\n    const snackbarProps = {\n        message: `${baseMsg} ${model.displayName}`,\n        action: i18n.t('Confirm'),\n        autoHideDuration: null,\n        onActionClick: () => onDisableConfirm(model, shouldDisable),\n    }\n    store.dispatch(showSnackbar(snackbarProps))\n}\n\nconst onDisableConfirm = async (model, shouldDisable) => {\n    store.dispatch(hideSnackbar())\n\n    const { displayName, id } = model\n    try {\n        await api.updateDisabledState(id, shouldDisable)\n        const baseMsg = shouldDisable\n            ? i18n.t('sucessfully disabled')\n            : i18n.t('successfully enabled')\n        store.dispatch(showSnackbar({ message: `${displayName} ${baseMsg}` }))\n        store.dispatch(getList(USER))\n\n        if (shouldDisable) {\n            detectCurrentUserChanges(model, true)\n        }\n    } catch (error) {\n        store.dispatch(\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t('There was a problem updating the enabled state')\n                ),\n            })\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport isEqual from 'lodash.isequal'\nimport { USER } from '../constants/entityTypes'\nimport { connect } from 'react-redux'\nimport { updateFilter, hideDialog, getList } from '../actions'\nimport SearchableOrgUnitTree from '../components/SearchableOrgUnitTree'\nimport {\n    DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS,\n    TEI_SEARCH_ORG_UNITS,\n} from '../containers/UserForm/config'\n\n/**\n * Displayed inside of a Dialog and displayed by clicking the OrganisationUnitInput.\n * This component renders a SearchableOrgUnitTree and lets a user select one or more organisation units.\n * When this selection is applied the filter state is updated.\n */\nclass OrganisationUnitFilter extends Component {\n    applyFilter = newSelectedOrgUnits => {\n        const {\n            updateFilter,\n            hideDialog,\n            getList,\n            selectedOrgUnits,\n        } = this.props\n\n        if (!isEqual(newSelectedOrgUnits, selectedOrgUnits)) {\n            updateFilter('organisationUnits', newSelectedOrgUnits)\n            getList(USER)\n        }\n\n        hideDialog()\n    }\n\n    render() {\n        const { selectedOrgUnits, hideDialog } = this.props\n        return (\n            <SearchableOrgUnitTree\n                orgUnitType={TEI_SEARCH_ORG_UNITS}\n                selectedOrgUnits={selectedOrgUnits}\n                confirmSelection={this.applyFilter}\n                cancel={hideDialog}\n            />\n        )\n    }\n}\n\nOrganisationUnitFilter.propTypes = {\n    selectedOrgUnits: PropTypes.array.isRequired,\n    updateFilter: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired,\n    getList: PropTypes.func.isRequired,\n    fallbackOrgUnits: PropTypes.object,\n}\n\nconst mapStateToProps = state => ({\n    selectedOrgUnits: state.filter.organisationUnits,\n    fallbackOrgUnits: state.currentUser[DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS],\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n        updateFilter,\n        hideDialog,\n        getList,\n    }\n)(OrganisationUnitFilter)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport TextField from 'material-ui/TextField'\nimport ActionOpenInNew from 'material-ui/svg-icons/action/open-in-new'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { showDialog, hideDialog } from '../actions'\nimport OrganisationUnitFilter from './OrganisationUnitFilter'\nimport { orgUnitsAsStringSelector } from '../selectors'\n\nconst styles = {\n    wrap: {\n        position: 'relative',\n        lineHeight: '24px',\n        height: '72px',\n        cursor: 'pointer',\n        float: 'left',\n        marginRight: '1rem',\n    },\n    icon: {\n        position: 'absolute',\n        right: 0,\n        top: 38,\n        width: 20,\n        height: 20,\n        color: 'rgba(0, 0, 0, 0.3)',\n        cursor: 'pointer',\n    },\n    textField: {\n        cursor: 'pointer',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        width: '152px',\n    },\n    input: {\n        width: 'calc(100% - 20px)',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n}\n\n/**\n * Part of the UserFilter. This component renders the displayNames of the organisation units that have been set in the filter state.\n * If 3 or more units are selected in the filter, only the length of this array will be displayed.\n */\nclass OrganisationUnitInput extends Component {\n    focusOrgUnitInput = () => {\n        this.refs.orgUnitInput.focus()\n    }\n\n    showOrgTreeInDialog = () => {\n        const { showDialog, hideDialog } = this.props\n        const content = <OrganisationUnitFilter />\n        const props = {\n            onRequestClose: hideDialog,\n            title: i18n.t('Select an organisation unit'),\n            contentStyle: {\n                // This doesn't actually influence the height of the dialogue\n                // but it will force it upwards, enabling it to have more height\n                // The actual height is determined by a scrollbox inside the filter component\n                minHeight: '100vh',\n            },\n        }\n        showDialog(content, props)\n    }\n\n    render() {\n        const { organisationUnits } = this.props\n        return (\n            <div style={styles.wrap} onClick={this.focusOrgUnitInput}>\n                <ActionOpenInNew style={styles.icon} />\n                <TextField\n                    ref=\"orgUnitInput\"\n                    style={styles.textField}\n                    floatingLabelText={i18n.t('Organisation unit')}\n                    onFocus={this.showOrgTreeInDialog}\n                    value={organisationUnits}\n                    inputStyle={styles.input}\n                />\n            </div>\n        )\n    }\n}\n\nOrganisationUnitInput.propTypes = {\n    organisationUnits: PropTypes.string.isRequired,\n    showDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n    organisationUnits: orgUnitsAsStringSelector(state.filter.organisationUnits),\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n        showDialog,\n        hideDialog,\n    }\n)(OrganisationUnitInput)\n","export const QUERY = 'query'\nexport const INACTIVE_MONTHS = 'inactiveMonths'\nexport const INVITATION_STATUS = 'invitationStatus'\nexport const SELF_REGISTERED = 'selfRegistered'\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport i18n from '@dhis2/d2-i18n'\nimport TextField from 'material-ui/TextField/TextField'\nimport debounce from 'lodash.debounce'\nimport { updateFilter, getList } from '../actions'\nimport { QUERY } from '../constants/filterFieldNames'\n\nconst style = {\n    float: 'left',\n    marginRight: '1rem',\n    width: '236px',\n}\n\n/**\n * Generic search filter component that is used by the RoleList and the GroupList\n */\nclass SearchFilter extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            localQueryStr: props.filter.query,\n        }\n        this.updateSearchFilter = debounce(this.updateSearchFilter, 375)\n    }\n\n    updateSearchFilter = newValue => {\n        const { getList, entityType, updateFilter } = this.props\n        updateFilter(QUERY, newValue)\n        getList(entityType)\n    }\n\n    onQueryStrChange = event => {\n        const value = event.target.value\n        this.setState({ localQueryStr: value })\n        this.updateSearchFilter(value)\n    }\n\n    render() {\n        const { localQueryStr } = this.state\n        return (\n            <TextField\n                className=\"search-input\"\n                floatingLabelText={i18n.t('Search by name')}\n                style={style}\n                hintText={''}\n                value={localQueryStr}\n                type=\"search\"\n                onChange={this.onQueryStrChange}\n            />\n        )\n    }\n}\n\nSearchFilter.propTypes = {\n    filter: PropTypes.object.isRequired,\n    getList: PropTypes.func.isRequired,\n    entityType: PropTypes.string.isRequired,\n    updateFilter: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => {\n    return {\n        filter: state.filter,\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    {\n        getList,\n        updateFilter,\n    }\n)(SearchFilter)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport i18n from '@dhis2/d2-i18n'\nimport { Checkbox } from 'material-ui'\nimport DropDown from 'd2-ui/lib/form-fields/DropDown.component'\nimport { updateFilter, getList } from '../../actions'\nimport OrganisationUnitInput from '../../components/OrganisationUnitInput'\nimport SearchFilter from '../../components/SearchFilter'\nimport {\n    INACTIVE_MONTHS,\n    INVITATION_STATUS,\n    SELF_REGISTERED,\n} from '../../constants/filterFieldNames'\n\nconst style = {\n    float: 'left',\n    marginRight: '1rem',\n}\n\nconst selfRegisteredStyle = {\n    ...style,\n    display: 'inline-block',\n    float: 'left',\n    width: '182px',\n    paddingTop: '37px',\n    height: '35px',\n}\n\n/**\n * Renders a SearchFilter, OrganisationUnitInput, dropdowns for inactive months and invitation status, and a checkbox for self registration.\n * Controlled by the filter state and updates this on change.\n */\nclass UserFilter extends Component {\n    onFilterChange = (fieldName, newValue) => {\n        const { getList, entityType, updateFilter, filter } = this.props\n\n        if (filter[fieldName] === newValue) {\n            return\n        }\n\n        updateFilter(fieldName, newValue)\n        getList(entityType)\n    }\n\n    createInactiveMonthsOptions() {\n        const month = i18n.t('month')\n        const months = i18n.t('months')\n        return Array(12)\n            .fill()\n            .map((_, index) => {\n                const id = index + 1\n                const displayName =\n                    id === 1 ? `${id} ${month}` : `${id} ${months}`\n                return { id, displayName }\n            })\n    }\n\n    renderDropDown(config) {\n        const mergedConfig = {\n            ...config,\n            includeEmpty: true,\n            emptyLabel: i18n.t('<No value>'),\n        }\n        return <DropDown {...mergedConfig} />\n    }\n\n    renderInactiveMonthsFilter() {\n        const dropDownConfig = {\n            menuItems: this.createInactiveMonthsOptions(),\n            floatingLabelText: i18n.t('Inactivity'),\n            value: this.props.filter.inactiveMonths,\n            onChange: event =>\n                this.onFilterChange(INACTIVE_MONTHS, event.target.value),\n            style: { ...style, width: '132px' },\n        }\n\n        return this.renderDropDown(dropDownConfig)\n    }\n\n    renderInvitationStatusFilter() {\n        const dropDownConfig = {\n            menuItems: [\n                { id: 'all', displayName: i18n.t('All invitations') },\n                { id: 'expired', displayName: i18n.t('Expired invitations') },\n            ],\n            floatingLabelText: i18n.t('Invitations'),\n            value: this.props.filter.invitationStatus,\n            onChange: event =>\n                this.onFilterChange(INVITATION_STATUS, event.target.value),\n            style: { ...style, width: '172px' },\n        }\n\n        return this.renderDropDown(dropDownConfig)\n    }\n\n    renderSelfRegisteredFilter() {\n        const value = this.props.filter.selfRegistered\n        const baseClassName = 'data-table__filter-bar__checkbox'\n        const checkedClassName = `${baseClassName}--checked`\n\n        return (\n            <Checkbox\n                value={value}\n                onCheck={(event, value) =>\n                    this.onFilterChange(SELF_REGISTERED, value)\n                }\n                label={i18n.t('Self registrations')}\n                className={value ? checkedClassName : baseClassName}\n                style={selfRegisteredStyle}\n            />\n        )\n    }\n\n    render() {\n        const { entityType } = this.props\n        return (\n            <div>\n                <SearchFilter entityType={entityType} />\n                <OrganisationUnitInput />\n                {this.renderInactiveMonthsFilter()}\n                {this.renderInvitationStatusFilter()}\n                {this.renderSelfRegisteredFilter()}\n            </div>\n        )\n    }\n}\n\nUserFilter.propTypes = {\n    filter: PropTypes.object.isRequired,\n    getList: PropTypes.func.isRequired,\n    updateFilter: PropTypes.func.isRequired,\n    entityType: PropTypes.string.isRequired,\n}\n\nconst mapStateToProps = state => {\n    return {\n        filter: state.filter,\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    {\n        updateFilter,\n        getList,\n    }\n)(UserFilter)\n","import UserList from './UserList'\nexport default UserList\n","import React from 'react'\nimport { USER } from '../../constants/entityTypes'\nimport List from '../../components/List'\nimport i18n from '@dhis2/d2-i18n'\n\nimport {\n    userContextMenuActions,\n    userContextMenuIcons,\n    isUserContextActionAllowed,\n} from './UserContextMenuActions'\nimport UserFilter from './UserFilter'\n\n/**\n * Container component that renders a List component with correct properties for displaying a list of Users\n * @class\n */\nconst UserList = () => (\n    <List\n        entityType={USER}\n        columns={['displayName', 'userName', 'lastLogin', 'disabled']}\n        FilterComponent={UserFilter}\n        primaryAction={userContextMenuActions.edit}\n        contextMenuActions={userContextMenuActions}\n        contextMenuIcons={userContextMenuIcons}\n        isContextActionAllowed={isUserContextActionAllowed}\n        sectionName={i18n.t('User Management')}\n        newItemPath={'/users/new'}\n        className=\"user-list\"\n    />\n)\n\nexport default UserList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport IconButton from 'material-ui/IconButton'\n\n/**\n * A component that renders a React-Router Link with an MUI IconButton inside it\n * @class\n */\nconst IconLink = ({ to, tooltip, icon }) => {\n    const iconButton = (\n        <IconButton iconClassName=\"material-icons\" tooltip={tooltip}>\n            {icon}\n        </IconButton>\n    )\n\n    return to ? <Link to={to}>{iconButton}</Link> : iconButton\n}\n\nIconLink.propTypes = {\n    to: PropTypes.string,\n    tooltip: PropTypes.string.isRequired,\n    icon: PropTypes.string.isRequired,\n}\n\nexport default IconLink\n","import {\n    renderTextField,\n    renderAuthorityEditor,\n} from '../../utils/fieldRenderers'\nimport i18n from '@dhis2/d2-i18n'\n\nexport const NAME = 'name'\nexport const DESCRIPTION = 'description'\nexport const AUTHORITIES = 'authorities'\n\nexport const ROLE_PROPS = [NAME, DESCRIPTION, AUTHORITIES]\n\nexport const getFields = () => [\n    {\n        name: NAME,\n        label: i18n.t('Name'),\n        fieldRenderer: renderTextField,\n        isRequiredField: true,\n    },\n    {\n        name: DESCRIPTION,\n        label: i18n.t('Description'),\n        fieldRenderer: renderTextField,\n    },\n    {\n        name: AUTHORITIES,\n        label: i18n.t('Authorities'),\n        fieldRenderer: renderAuthorityEditor,\n    },\n]\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport i18n from '@dhis2/d2-i18n'\nimport { Field, reduxForm } from 'redux-form'\nimport RaisedButton from 'material-ui/RaisedButton'\nimport api from '../../api'\nimport navigateTo from '../../utils/navigateTo'\nimport { asyncValidateUniqueness } from '../../utils/validatorsAsync'\nimport { required } from '../../utils/validators'\nimport { clearItem, showSnackbar, getList } from '../../actions'\nimport { NAME, DESCRIPTION, AUTHORITIES, getFields } from './config'\nimport { USER_ROLE } from '../../constants/entityTypes'\nimport detectCurrentUserChanges from '../../utils/detectCurrentUserChanges'\nimport createHumanErrorMessage from '../../utils/createHumanErrorMessage'\n\n/**\n * Container component that is controlled by redux-form. It renders an array of fields and validates their input.\n * When valid it will save on submit and show relevant snackbar message.\n */\nclass RoleForm extends Component {\n    fields = getFields()\n\n    saveRole = async (values, _, props) => {\n        const { role, showSnackbar, clearItem, getList } = props\n        const data = {\n            ...role.toJSON(),\n            [NAME]: values[NAME],\n            [DESCRIPTION]: values[DESCRIPTION],\n            [AUTHORITIES]: values[AUTHORITIES],\n        }\n\n        try {\n            await api.saveRole(data)\n            const msg = i18n.t(\n                'User role \"{{displayName}}\" saved successfully',\n                {\n                    displayName: data[NAME],\n                }\n            )\n            showSnackbar({ message: msg })\n            clearItem()\n            getList(USER_ROLE)\n            this.backToList()\n            detectCurrentUserChanges(role)\n        } catch (error) {\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t('There was a problem saving the user role.')\n                ),\n            })\n        }\n    }\n\n    backToList = () => {\n        navigateTo('/user-roles')\n    }\n\n    renderFields() {\n        return this.fields.map(fieldConfig => {\n            const {\n                name,\n                fieldRenderer,\n                label,\n                isRequiredField,\n                ...conf\n            } = fieldConfig\n            const suffix = isRequiredField ? ' *' : ''\n            const labelText = label + suffix\n            const validators = name === NAME ? [required] : []\n\n            return (\n                <Field\n                    name={name}\n                    key={name}\n                    component={fieldRenderer}\n                    label={labelText}\n                    validate={validators}\n                    {...conf}\n                />\n            )\n        })\n    }\n\n    render = () => {\n        const {\n            handleSubmit,\n            submitting,\n            asyncValidating,\n            pristine,\n            valid,\n        } = this.props\n        const disableSubmit = Boolean(\n            submitting || asyncValidating || pristine || !valid\n        )\n        return (\n            <main>\n                <form autoComplete=\"off\" onSubmit={handleSubmit(this.saveRole)}>\n                    {this.renderFields()}\n                    <div style={{ marginTop: '2rem' }}>\n                        <RaisedButton\n                            label={i18n.t('Save')}\n                            type=\"submit\"\n                            primary={true}\n                            disabled={disableSubmit}\n                            style={{ marginRight: '8px' }}\n                        />\n                        <RaisedButton\n                            label={i18n.t('Cancel')}\n                            onClick={this.backToList}\n                        />\n                    </div>\n                </form>\n            </main>\n        )\n    }\n}\n\nRoleForm.propTypes = {\n    showSnackbar: PropTypes.func.isRequired,\n    clearItem: PropTypes.func.isRequired,\n    getList: PropTypes.func.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n    initialValues: PropTypes.object.isRequired,\n    role: PropTypes.object.isRequired,\n    asyncValidating: PropTypes.oneOfType([PropTypes.bool, PropTypes.string])\n        .isRequired,\n    pristine: PropTypes.bool.isRequired,\n    submitting: PropTypes.bool.isRequired,\n    valid: PropTypes.bool.isRequired,\n}\n\nconst mapStateToProps = state => ({\n    role: state.currentItem,\n    initialValues: {\n        [NAME]: state.currentItem[NAME],\n        [DESCRIPTION]: state.currentItem[DESCRIPTION],\n        [AUTHORITIES]: state.currentItem[AUTHORITIES] || [],\n    },\n})\n\nconst ReduxFormWrappedRoleForm = reduxForm({\n    form: 'roleForm',\n    asyncValidate: asyncValidateUniqueness,\n    asyncBlurFields: [NAME],\n})(RoleForm)\n\nexport default connect(\n    mapStateToProps,\n    {\n        clearItem,\n        showSnackbar,\n        getList,\n    }\n)(ReduxFormWrappedRoleForm)\n","import RoleForm from './RoleForm'\nexport default RoleForm\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport i18n from '@dhis2/d2-i18n'\nimport { Field, reduxForm } from 'redux-form'\nimport RaisedButton from 'material-ui/RaisedButton'\nimport CircularProgress from 'material-ui/CircularProgress'\nimport makeTrashable from 'trashable'\nimport navigateTo from '../../utils/navigateTo'\nimport { asyncValidatorSwitch } from '../../utils/validatorsAsync'\nimport {\n    renderSearchableGroupEditor,\n    renderText,\n} from '../../utils/fieldRenderers'\nimport createHumanErrorMessage from '../../utils/createHumanErrorMessage'\nimport { clearItem, showSnackbar, getList } from '../../actions'\nimport { FORM_NAME, NAME, CODE, MANAGED_GROUPS, getFields } from './config'\nimport { userGroupFormInitialValuesSelector } from '../../selectors'\nimport { USER_GROUP } from '../../constants/entityTypes'\nimport detectCurrentUserChanges from '../../utils/detectCurrentUserChanges'\nimport {\n    generateAttributeFields,\n    parseAttributeValues,\n    addUniqueAttributesToAsyncBlurFields,\n} from '../../utils/attributeFieldHelpers'\nimport * as CONFIG from './config'\nimport collectValidators from './collectValidators'\nimport api from '../../api'\n\n/**\n * Container component that is controlled by redux-form. It renders an array of fields and validates their input.\n * When valid it will save on submit and show relevant snackbar message.\n */\nclass GroupForm extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            attributeFields: null,\n        }\n        this.trashableAttributesPromise = null\n        this.fields = getFields()\n    }\n\n    async componentDidMount() {\n        const { group, showSnackbar, initialize } = this.props\n\n        this.trashableAttributesPromise = makeTrashable(\n            api.getAttributes(USER_GROUP)\n        )\n\n        try {\n            const attributes = await this.trashableAttributesPromise\n            const attributeFields = generateAttributeFields(\n                attributes,\n                group.attributeValues\n            )\n            addUniqueAttributesToAsyncBlurFields(\n                attributeFields,\n                this.props.asyncBlurFields\n            )\n            this.setState({ attributeFields })\n            initialize(\n                userGroupFormInitialValuesSelector(group, attributeFields)\n            )\n        } catch (error) {\n            console.error(error)\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t(\n                        'Could not load the user group data. Please refresh the page.'\n                    )\n                ),\n            })\n        }\n    }\n\n    createIdValueObject(value) {\n        return {\n            id: typeof value === 'string' ? value : value.id,\n        }\n    }\n\n    saveGroup = async (values, _, props) => {\n        const { group, showSnackbar, clearItem, getList } = props\n\n        group[NAME] = values[NAME]\n        group[CODE] = values[CODE]\n        group[MANAGED_GROUPS] = values[MANAGED_GROUPS].map(\n            this.createIdValueObject\n        )\n        group.attributeValues = parseAttributeValues(\n            values,\n            this.state.attributeFields\n        )\n\n        try {\n            await api.saveUserGroup(group.toJSON())\n            const msg = i18n.t(\n                'User group \"{{displayName}}\" saved successfully',\n                {\n                    displayName: group.name,\n                }\n            )\n            showSnackbar({ message: msg })\n            clearItem()\n            getList(USER_GROUP)\n            this.backToList()\n            detectCurrentUserChanges(group)\n        } catch (error) {\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t('There was a problem saving the user group.')\n                ),\n            })\n        }\n    }\n\n    backToList = () => {\n        navigateTo('/user-groups')\n    }\n\n    renderFields(fields) {\n        const { group } = this.props\n        return fields.map(fieldConfig => {\n            const {\n                name,\n                fieldRenderer,\n                label,\n                isRequiredField,\n                isAttributeField,\n                shouldBeUnique,\n                attributeId,\n                fieldValidators,\n                valueType,\n                ...conf\n            } = fieldConfig\n            const suffix = isRequiredField ? ' *' : ''\n            const labelText = label + suffix\n            const validators = []\n\n            if (fieldRenderer === renderText) {\n                return renderText(fieldConfig)\n            }\n\n            if (fieldRenderer === renderSearchableGroupEditor) {\n                conf.availableItemsQuery = api[conf.availableItemsQuery]\n                if (isRequiredField) {\n                    conf.assignedItemsLabel += ' *'\n                }\n                conf.initialValues = fieldConfig.initialItemsSelector(group)\n            }\n\n            conf.validate = collectValidators(\n                this.props,\n                name,\n                isRequiredField,\n                isAttributeField,\n                fieldValidators\n            )\n\n            return (\n                <Field\n                    name={name}\n                    key={name}\n                    component={fieldRenderer}\n                    label={labelText}\n                    validate={validators}\n                    {...conf}\n                />\n            )\n        })\n    }\n\n    render() {\n        const {\n            handleSubmit,\n            submitting,\n            asyncValidating,\n            pristine,\n            valid,\n        } = this.props\n        const { attributeFields } = this.state\n        const disableSubmit = Boolean(\n            submitting || asyncValidating || pristine || !valid\n        )\n\n        if (!attributeFields) {\n            return (\n                <div style={CONFIG.STYLES.loaderWrap}>\n                    <CircularProgress />\n                </div>\n            )\n        }\n\n        return (\n            <main>\n                <form\n                    autoComplete=\"off\"\n                    onSubmit={handleSubmit(this.saveGroup)}\n                >\n                    {this.renderFields(this.fields)}\n                    {this.renderFields(attributeFields)}\n                    <div style={{ marginTop: '2rem' }}>\n                        <RaisedButton\n                            label={i18n.t('Save')}\n                            type=\"submit\"\n                            primary={true}\n                            disabled={disableSubmit}\n                            style={{ marginRight: '8px' }}\n                        />\n                        <RaisedButton\n                            label={i18n.t('Cancel')}\n                            onClick={this.backToList}\n                        />\n                    </div>\n                </form>\n            </main>\n        )\n    }\n}\n\nGroupForm.propTypes = {\n    asyncBlurFields: PropTypes.arrayOf(PropTypes.string),\n    showSnackbar: PropTypes.func.isRequired,\n    clearItem: PropTypes.func.isRequired,\n    getList: PropTypes.func.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n    group: PropTypes.object.isRequired,\n    asyncValidating: PropTypes.oneOfType([PropTypes.bool, PropTypes.string])\n        .isRequired,\n    pristine: PropTypes.bool.isRequired,\n    submitting: PropTypes.bool.isRequired,\n    valid: PropTypes.bool.isRequired,\n}\n\nconst mapStateToProps = state => ({\n    group: state.currentItem,\n})\n\nconst ReduxFormWrappedGroupForm = reduxForm({\n    form: FORM_NAME,\n    asyncValidate: asyncValidatorSwitch,\n    asyncBlurFields: [NAME, CODE],\n})(GroupForm)\n\nexport default connect(\n    mapStateToProps,\n    {\n        clearItem,\n        showSnackbar,\n        getList,\n    }\n)(ReduxFormWrappedGroupForm)\n","/* eslint-disable max-params */\n\nimport { required, code } from '../../utils/validators'\nimport { NAME, CODE } from './config'\n\nexport default function collectValidators(\n    props,\n    name,\n    isRequiredField,\n    isAttributeField,\n    fieldValidators\n) {\n    const validatorsToApply = []\n    const isRequiredAttributeField = isAttributeField && isRequiredField\n\n    if (name === NAME) {\n        validatorsToApply.push(required)\n    }\n\n    if (name === CODE) {\n        validatorsToApply.push(code)\n    }\n\n    if (isRequiredAttributeField) {\n        validatorsToApply.push(required)\n    }\n\n    if (isAttributeField && fieldValidators) {\n        validatorsToApply.push(...fieldValidators)\n    }\n\n    return validatorsToApply\n}\n","import GroupForm from './GroupForm'\nexport default GroupForm\n","/* eslint-disable max-params */\n\nimport * as validators from '../../utils/validators'\nimport {\n    USERNAME,\n    PASSWORD,\n    REPEAT_PASSWORD,\n    SURNAME,\n    FIRST_NAME,\n    EMAIL,\n} from './config'\n\n// Use this to make sure validator names match form field names (see const fieldSpecificValidator)\nconst validatorLookup = {\n    ...validators,\n    userRoles: validators.requiredArray,\n    organisationUnits: validators.requiredArray,\n}\n\n// When creating a user, a password is required, because there is no step to create\n// a password, which a user does get when he is invited by email. On the other hand,\n// the email field is optional, because the user can just use his username to login.\n// And for this reason, the username field is required too.\nconst CREATE_REQUIRED_FIELDS = new Set([\n    USERNAME,\n    PASSWORD,\n    REPEAT_PASSWORD,\n    SURNAME,\n    FIRST_NAME,\n])\n\n// When inviting a user, email, firstname and surname is sufficient.\n// The user can setup a username and password when clicking on the invite link.\nconst INVITE_REQUIRED_FIELDS = new Set([EMAIL, SURNAME, FIRST_NAME])\n\n// In edit mode, the username field is disabled, because this is create-only.\n// The password fields are also optional, we just keep the current password\n// if no new values are provided. Only firstname and surname are required,\n// to prevent these fields from being cleared.\nconst EDIT_REQUIRED_FIELDS = new Set([SURNAME, FIRST_NAME])\n\nexport default function collectValidators(\n    props,\n    name,\n    isRequiredField,\n    isAttributeField,\n    fieldValidators\n) {\n    const validatorsToApply = []\n    const isEditingUser = Boolean(props.user.id)\n    const isRequiredAttributeField = isAttributeField && isRequiredField\n    const fieldSpecificValidator = validatorLookup[name]\n    const isRequiredStaticField =\n        !isAttributeField && isEditingUser\n            ? EDIT_REQUIRED_FIELDS.has(name)\n            : props.inviteUser\n            ? INVITE_REQUIRED_FIELDS.has(name)\n            : CREATE_REQUIRED_FIELDS.has(name)\n\n    if (fieldSpecificValidator) {\n        validatorsToApply.push(fieldSpecificValidator)\n    }\n\n    if (isRequiredAttributeField || isRequiredStaticField) {\n        validatorsToApply.push(validators.required)\n    }\n\n    if (isAttributeField && fieldValidators) {\n        validatorsToApply.push(...fieldValidators)\n    }\n\n    return validatorsToApply\n}\n","/* eslint-disable max-params */\n\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Field, reduxForm, formValueSelector } from 'redux-form'\nimport RaisedButton from 'material-ui/RaisedButton'\nimport FlatButton from 'material-ui/FlatButton'\nimport CircularProgress from 'material-ui/CircularProgress'\nimport HardwareKeyboardArrowUp from 'material-ui/svg-icons/hardware/keyboard-arrow-up'\nimport HardwareKeyboardArrowDown from 'material-ui/svg-icons/hardware/keyboard-arrow-down'\nimport i18n from '@dhis2/d2-i18n'\nimport makeTrashable from 'trashable'\nimport navigateTo from '../../utils/navigateTo'\nimport createHumanErrorMessage from '../../utils/createHumanErrorMessage'\nimport detectCurrentUserChanges from '../../utils/detectCurrentUserChanges'\nimport asArray from '../../utils/asArray'\nimport getNestedProp from '../../utils/getNestedProp'\nimport api from '../../api'\nimport { userFormInitialValuesSelector } from '../../selectors'\nimport { clearItem, getList, showSnackbar } from '../../actions'\nimport { USER } from '../../constants/entityTypes'\nimport * as CONFIG from './config'\nimport collectValidators from './collectValidators'\nimport { inviteUserValueSelector } from '../../selectors'\nimport { asyncValidatorSwitch } from '../../utils/validatorsAsync'\nimport {\n    generateAttributeFields,\n    addUniqueAttributesToAsyncBlurFields,\n} from '../../utils/attributeFieldHelpers'\nimport {\n    renderTextField,\n    renderText,\n    renderSearchableOrgUnitTree,\n    renderSearchableGroupEditor,\n    renderSelectField,\n} from '../../utils/fieldRenderers'\n\n/**\n * Container component that is controlled by redux-form. When mounting, it will fetch available and selected locales.\n * Once these are loaded, it renders an array of fields and validates their input.\n * When valid it will save on submit and show relevant snackbar message.\n */\nclass UserForm extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            showMore: false,\n            locales: null,\n            attributeFields: null,\n        }\n        this.trashableAttributesPromise = null\n        this.trashableLocalePromise = null\n        this.inviteFields = CONFIG.getInviteFields()\n        this.baseFields = CONFIG.getBaseFields()\n        this.additionalFields = CONFIG.getAdditionalFields()\n    }\n\n    async componentDidMount() {\n        const { user, showSnackbar, initialize } = this.props\n        const username = user.id ? user.userCredentials.username : null\n\n        this.trashableLocalePromise = makeTrashable(\n            api.getSelectedAndAvailableLocales(username)\n        )\n        this.trashableAttributesPromise = makeTrashable(api.getAttributes(USER))\n\n        try {\n            const locales = await this.trashableLocalePromise\n            const attributes = await this.trashableAttributesPromise\n            const attributeFields = generateAttributeFields(\n                attributes,\n                user.attributeValues\n            )\n            addUniqueAttributesToAsyncBlurFields(\n                attributeFields,\n                this.props.asyncBlurFields\n            )\n            this.setState({ locales, attributeFields })\n            initialize(\n                userFormInitialValuesSelector(user, locales, attributeFields)\n            )\n        } catch (error) {\n            console.error(error)\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t(\n                        'Could not load the user data. Please refresh the page.'\n                    )\n                ),\n            })\n        }\n    }\n\n    componentWillUnmount() {\n        this.trashableLocalePromise.trash()\n        this.trashableAttributesPromise.trash()\n    }\n\n    toggleShowMore = () => {\n        this.setState({\n            showMore: !this.state.showMore,\n        })\n    }\n\n    handleSubmit = async (values, _, props) => {\n        const { user, inviteUser, showSnackbar, clearItem, getList } = props\n        const initialUiLocale = this.state.locales.ui.selected\n        const initialDbLocale = this.state.locales.db.selected\n\n        try {\n            await api.saveOrInviteUser(\n                values,\n                user,\n                inviteUser,\n                initialUiLocale,\n                initialDbLocale,\n                this.state.attributeFields\n            )\n            const msg = i18n.t('User \"{{displayName}}\" saved successfully', {\n                displayName: `${values.firstName} ${values.surname}`,\n            })\n            showSnackbar({ message: msg })\n            clearItem()\n            getList(USER)\n            this.backToList()\n            detectCurrentUserChanges(user)\n        } catch (error) {\n            console.error(error)\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t('There was a problem saving the user.')\n                ),\n            })\n        }\n    }\n\n    backToList = () => {\n        navigateTo('/users')\n    }\n\n    getLabelText(label, user, isRequiredField) {\n        const { inviteUser } = this.props\n        return isRequiredField === CONFIG.ALWAYS_REQUIRED ||\n            (inviteUser && isRequiredField === CONFIG.INVITE_REQUIRED) ||\n            (isRequiredField === CONFIG.CREATE_REQUIRED &&\n                !user.id &&\n                !inviteUser) ||\n            (typeof isRequiredField === 'boolean' && isRequiredField)\n            ? `${label} *`\n            : label\n    }\n\n    prepareGroupEditor(conf, fieldConfig, user, isRequiredField) {\n        conf.assignedItemsLabel = this.getLabelText(\n            conf.assignedItemsLabel,\n            user,\n            isRequiredField\n        )\n        conf.availableItemsQuery = api[conf.availableItemsQuery]\n        conf.initialValues = fieldConfig.initialItemsSelector(user)\n    }\n\n    exludeField(fieldName) {\n        const { user, inviteUser, externalAuthOnly } = this.props\n        const systemCanEmail = this.context.d2.system.systemInfo.emailConfigured\n\n        if ((!systemCanEmail || user.id) && fieldName === CONFIG.INVITE) {\n            return true\n        }\n\n        if (\n            (inviteUser || externalAuthOnly) &&\n            (fieldName === CONFIG.PASSWORD ||\n                fieldName === CONFIG.REPEAT_PASSWORD)\n        ) {\n            return true\n        }\n\n        if (\n            inviteUser &&\n            [CONFIG.EXTERNAL_AUTH, CONFIG.OPEN_ID, CONFIG.LDAP_ID].includes(\n                fieldName\n            )\n        ) {\n            return true\n        }\n\n        return false\n    }\n\n    renderFields(fields) {\n        const { user } = this.props\n\n        return fields.reduce((filteredFields, fieldConfig) => {\n            const {\n                name,\n                fieldRenderer,\n                label,\n                isRequiredField,\n                isAttributeField,\n                shouldBeUnique,\n                attributeId,\n                fieldValidators,\n                valueType,\n                ...conf\n            } = fieldConfig\n            const labelText = this.getLabelText(label, user, isRequiredField)\n\n            if (this.exludeField(name)) {\n                return filteredFields\n            }\n\n            if (fieldRenderer === renderText) {\n                filteredFields.push(renderText(fieldConfig))\n                return filteredFields\n            }\n\n            switch (fieldRenderer) {\n                case renderTextField:\n                    if (!conf.hintText) {\n                        conf.hintText = label\n                    }\n                    conf.disabled = Boolean(name === CONFIG.USERNAME && user.id)\n                    break\n                case renderSearchableOrgUnitTree:\n                    conf.initialValues = asArray(user[fieldConfig.name])\n                    break\n                case renderSearchableGroupEditor:\n                    this.prepareGroupEditor(\n                        conf,\n                        fieldConfig,\n                        user,\n                        isRequiredField\n                    )\n                    break\n                case renderSelectField:\n                    conf.options = fieldConfig.optionsSelector\n                        ? getNestedProp(fieldConfig.optionsSelector, this.state)\n                        : fieldConfig.options\n                    break\n                default:\n                    break\n            }\n\n            conf.validate = collectValidators(\n                this.props,\n                name,\n                isRequiredField,\n                isAttributeField,\n                fieldValidators\n            )\n\n            filteredFields.push(\n                <Field\n                    name={name}\n                    key={name}\n                    component={fieldRenderer}\n                    label={labelText}\n                    {...conf}\n                />\n            )\n            return filteredFields\n        }, [])\n    }\n\n    renderCreateOrInviteField() {\n        return this.renderFields(this.inviteFields)\n    }\n\n    renderAttributeFields() {\n        return this.renderFields(this.state.attributeFields)\n    }\n\n    renderBaseFields() {\n        return this.renderFields(this.baseFields)\n    }\n\n    renderAdditionalFields(showMore) {\n        if (!showMore) {\n            return null\n        }\n        return (\n            <div style={CONFIG.STYLES.additionalFieldsWrap}>\n                {this.renderFields(this.additionalFields)}\n            </div>\n        )\n    }\n\n    renderToggler(showMore) {\n        const togglerText = showMore\n            ? i18n.t('Show fewer options')\n            : i18n.t('Show more options')\n        const icon = showMore ? (\n            <HardwareKeyboardArrowUp />\n        ) : (\n            <HardwareKeyboardArrowDown />\n        )\n\n        return (\n            <div style={CONFIG.STYLES.togglerWrap}>\n                <FlatButton\n                    onClick={this.toggleShowMore}\n                    label={togglerText}\n                    style={CONFIG.STYLES.toggler}\n                    icon={icon}\n                />\n            </div>\n        )\n    }\n\n    render() {\n        const {\n            handleSubmit,\n            submitting,\n            asyncValidating,\n            pristine,\n            valid,\n            inviteUser,\n        } = this.props\n        const { showMore, locales } = this.state\n        const disableSubmit = Boolean(\n            submitting || asyncValidating || pristine || !valid\n        )\n        const submitText =\n            inviteUser === true ? i18n.t('Send invite') : i18n.t('Save')\n\n        if (!locales) {\n            return (\n                <div style={CONFIG.STYLES.loaderWrap}>\n                    <CircularProgress />\n                </div>\n            )\n        }\n\n        return (\n            <main>\n                <form\n                    autoComplete=\"off\"\n                    onSubmit={handleSubmit(this.handleSubmit)}\n                >\n                    {this.renderCreateOrInviteField()}\n                    {this.renderBaseFields()}\n                    {this.renderAttributeFields()}\n                    {this.renderAdditionalFields(showMore)}\n                    {this.renderToggler(showMore)}\n                    <div>\n                        <RaisedButton\n                            label={submitText}\n                            type=\"submit\"\n                            primary={true}\n                            disabled={disableSubmit}\n                            style={{ marginRight: '8px' }}\n                        />\n                        <RaisedButton\n                            label={i18n.t('Cancel')}\n                            onClick={this.backToList}\n                        />\n                    </div>\n                </form>\n            </main>\n        )\n    }\n}\n\nUserForm.propTypes = {\n    user: PropTypes.object.isRequired,\n    getList: PropTypes.func.isRequired,\n    clearItem: PropTypes.func.isRequired,\n    showSnackbar: PropTypes.func.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n    change: PropTypes.func.isRequired,\n    initialize: PropTypes.func.isRequired,\n    asyncValidating: PropTypes.oneOfType([PropTypes.bool, PropTypes.string])\n        .isRequired,\n    pristine: PropTypes.bool.isRequired,\n    submitting: PropTypes.bool.isRequired,\n    valid: PropTypes.bool.isRequired,\n    fallbackOrgUnits: PropTypes.object,\n    inviteUser: PropTypes.bool.isRequired,\n    externalAuthOnly: PropTypes.bool.isRequired,\n    asyncBlurFields: PropTypes.arrayOf(PropTypes.string),\n}\n\nUserForm.contextTypes = {\n    d2: PropTypes.object.isRequired,\n}\n\nconst selector = formValueSelector(CONFIG.FORM_NAME)\nconst mapStateToProps = state => {\n    return {\n        user: state.currentItem,\n        fallbackOrgUnits:\n            state.currentUser[CONFIG.DATA_CAPTURE_AND_MAINTENANCE_ORG_UNITS],\n        inviteUser: inviteUserValueSelector(state.form[CONFIG.FORM_NAME]),\n        externalAuthOnly: Boolean(selector(state, CONFIG.EXTERNAL_AUTH)),\n    }\n}\n\nconst ReduxFormWrappedUserForm = reduxForm({\n    form: CONFIG.FORM_NAME,\n    asyncValidate: asyncValidatorSwitch,\n    asyncBlurFields: [CONFIG.USERNAME],\n})(UserForm)\n\nexport default connect(\n    mapStateToProps,\n    {\n        clearItem,\n        showSnackbar,\n        getList,\n    }\n)(ReduxFormWrappedUserForm)\n","import UserForm from './UserForm'\nexport default UserForm\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Paper, CircularProgress } from 'material-ui'\nimport { connect } from 'react-redux'\nimport { getItem, initNewItem } from '../actions'\nimport { USER, USER_GROUP, USER_ROLE } from '../constants/entityTypes'\nimport Heading from 'd2-ui/lib/headings/Heading.component'\nimport IconLink from './IconLink'\nimport i18n from '@dhis2/d2-i18n'\nimport kebabCase from 'lodash.kebabcase'\nimport capitalize from 'lodash.capitalize'\nimport ErrorMessage from './ErrorMessage'\nimport RoleForm from '../containers/RoleForm'\nimport GroupForm from '../containers/GroupForm'\nimport UserForm from '../containers/UserForm'\nimport { shortItemSelector } from '../selectors'\n\nconst styles = {\n    main: {\n        width: '100%',\n        paddingLeft: '2rem',\n    },\n    heading: {\n        paddingBottom: '1rem',\n    },\n    paper: {\n        padding: '2rem 5rem 4rem',\n    },\n}\n\nclass FormLoader extends Component {\n    componentDidMount() {\n        const {\n            match: {\n                params: { id },\n            },\n            item,\n            getItem,\n            initNewItem,\n            entityType,\n        } = this.props\n        if (id && !(item && item.id === id)) {\n            getItem(entityType, id)\n        } else if (!id) {\n            initNewItem(entityType)\n        }\n        this.formNotFoundErrorMsg = i18n.t(\n            'There was an error getting the form:'\n        )\n    }\n\n    renderForm() {\n        const { entityType } = this.props\n        switch (entityType) {\n            case USER:\n                return <UserForm />\n            case USER_ROLE:\n                return <RoleForm />\n            case USER_GROUP:\n                return <GroupForm />\n            default:\n                return (\n                    <ErrorMessage\n                        introText={this.formNotFoundErrorMsg}\n                        errorMessage={''}\n                    />\n                )\n        }\n    }\n\n    renderHeader() {\n        const {\n            match: {\n                params: { id },\n            },\n            item,\n            shortItem,\n            entityType,\n        } = this.props\n        const baseItem = item && item.id === id ? item : shortItem\n        const entityTxt = baseItem\n            ? baseItem.modelDefinition.displayName\n            : capitalize(entityType)\n        const displayName = baseItem ? baseItem.displayName : ''\n        const updateMsg = `${i18n.t('Update')} ${entityTxt}: ${displayName}`\n        const createMsg = `${i18n.t('Create new')} ${entityTxt}`\n        const msg = id ? updateMsg : createMsg\n        const link = baseItem\n            ? `/${kebabCase(baseItem.modelDefinition.plural)}`\n            : null\n        const linkTooltip = `${i18n.t('Back to')} ${entityTxt}s`\n\n        return (\n            <Heading style={styles.heading}>\n                <IconLink\n                    to={link}\n                    tooltip={linkTooltip}\n                    disabled={Boolean(link)}\n                    icon=\"arrow_back\"\n                />\n                {msg}\n            </Heading>\n        )\n    }\n\n    renderContent() {\n        const {\n            match: {\n                params: { id },\n            },\n            item,\n        } = this.props\n\n        if (typeof item === 'string') {\n            return (\n                <ErrorMessage\n                    introText={this.formNotFoundErrorMsg}\n                    errorMessage={item}\n                />\n            )\n        }\n\n        if (!item || (item && item.id !== id)) {\n            return (\n                <div style={{ textAlign: 'center', paddingTop: '2rem' }}>\n                    <CircularProgress />\n                </div>\n            )\n        }\n\n        return this.renderForm()\n    }\n\n    render() {\n        return (\n            <main style={styles.main}>\n                {this.renderHeader()}\n                <Paper style={styles.paper}>{this.renderContent()}</Paper>\n            </main>\n        )\n    }\n}\n\nFormLoader.propTypes = {\n    match: PropTypes.object.isRequired,\n    entityType: PropTypes.string.isRequired,\n    item: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n    shortItem: PropTypes.object,\n    getItem: PropTypes.func.isRequired,\n    initNewItem: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        item: state.currentItem,\n        // shortItem is available when navigating from a list but not after refesh\n        shortItem: shortItemSelector(props.match.params.id, state.list.items),\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    {\n        getItem,\n        initNewItem,\n    }\n)(FormLoader)\n","import api from '../api'\n\n/**\n * Receives a full UTC data string and return a formatted version according to the user's locale\n * @param {String} utcString - UTC Date String\n * @param {String} includeTime - Include time if true\n * @returns {String} Formatted date string\n * @memberof module:utils\n * @function\n */\nconst parseDateFromUTCString = (utcString, includeTime) => {\n    const d2 = api.getD2()\n    const locale = d2.currentUser.userSettings.settings.keyUiLocale\n    const date = new Date(utcString)\n    const dateOptions = {\n        day: 'numeric',\n        month: 'long',\n        year: 'numeric',\n    }\n    const timeOptions = {\n        hour: '2-digit',\n        minute: '2-digit',\n    }\n    const options = includeTime\n        ? { ...dateOptions, ...timeOptions }\n        : dateOptions\n\n    return new Intl.DateTimeFormat(locale, options).format(date)\n}\n\nexport default parseDateFromUTCString\n","/* eslint-disable max-params */\n\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Paper } from 'material-ui'\nimport kebabCase from 'lodash.kebabcase'\nimport capitalize from 'lodash.capitalize'\nimport api from '../api'\nimport i18n from '@dhis2/d2-i18n'\nimport parseDateFromUTCString from '../utils/parseDateFromUTCString'\nimport LoadingMask from 'd2-ui/lib/loading-mask/LoadingMask.component'\nimport ErrorMessage from './ErrorMessage'\nimport Heading from 'd2-ui/lib/headings/Heading.component'\nimport IconLink from './IconLink'\nimport RaisedButton from 'material-ui/RaisedButton'\nimport ImageEdit from 'material-ui/svg-icons/image/edit'\nimport ContentSend from 'material-ui/svg-icons/content/send'\nimport { Link } from 'react-router-dom'\nimport { USER, USER_GROUP, USER_ROLE } from '../constants/entityTypes'\nimport { connect } from 'react-redux'\nimport { getItem } from '../actions'\n\nconst styles = {\n    main: {\n        width: '100%',\n        paddingLeft: '2rem',\n    },\n    heading: {\n        paddingBottom: '1rem',\n    },\n    raisedButton: {\n        height: '36px',\n        transform: 'translateY(10px)',\n        float: 'right',\n        marginLeft: '1rem',\n    },\n    paper: {\n        padding: '1.4rem',\n    },\n    cell: {\n        fontSize: '1rem',\n        padding: '0.8rem',\n        verticalAlign: 'top',\n    },\n    valueCell: {\n        textAlign: 'right',\n        color: '#757575',\n    },\n}\n/**\n * This component reads specified properties of an object and displays this in a table\n */\nclass DetailSummary extends Component {\n    componentDidMount() {\n        const { baseName, routeId, getItem } = this.props\n        getItem(baseName, routeId)\n    }\n\n    getLabelForEntity(baseName) {\n        switch (baseName) {\n            case USER:\n                return i18n.t('Edit user')\n            case USER_GROUP:\n                return i18n.t('Edit user group')\n            case USER_ROLE:\n                return i18n.t('Edit user role')\n            default:\n                return ''\n        }\n    }\n\n    /**\n     * Renders a button wrapped in a link.\n     * The link points to a location outside of the user-app where a message can be sent to a user with a given id.\n     * @param {string} userId\n     */\n    renderSendMessageBtn(userId) {\n        const url = `${api.getContextPath()}/dhis-web-messaging/#/PRIVATE/create/${userId}`\n        return (\n            <RaisedButton\n                style={styles.raisedButton}\n                label={i18n.t('Send message')}\n                secondary={true}\n                containerElement={<a href={url}> </a>}\n                icon={<ContentSend />}\n            />\n        )\n    }\n\n    renderPropertyFields() {\n        const { summaryObject, config } = this.props\n        const labelCellStyle = { ...styles.cell, ...styles.valueCell }\n\n        return config.map((field, index) => {\n            const {\n                key,\n                removeText,\n                parseDate,\n                parseDateTime,\n                nestedPropselector,\n                parseArrayAsCommaDelimitedString,\n                count,\n            } = field\n            let { label } = field\n\n            label = i18n.t(label)\n            let value = summaryObject[key]\n\n            if (typeof value === 'undefined') {\n                value = ''\n            } else {\n                if (nestedPropselector) {\n                    nestedPropselector.forEach(selector => {\n                        value = value[selector]\n                    })\n                }\n\n                if (parseArrayAsCommaDelimitedString) {\n                    // Some nested lists come through as a modelCollection but others are already arrays\n                    if (typeof value.toArray === 'function') {\n                        value = value.toArray()\n                    }\n                    value = value\n                        .map(item => item[parseArrayAsCommaDelimitedString])\n                        .join(', ')\n                }\n\n                if (removeText) {\n                    value = capitalize(value.replace(removeText, ''))\n                }\n\n                if ((parseDate || parseDateTime) && typeof value === 'string') {\n                    value = parseDateFromUTCString(value, parseDateTime)\n                }\n\n                if (count) {\n                    if (typeof value.size === 'number') {\n                        value = value.size\n                    } else if (typeof value.length === 'number') {\n                        value = value.length\n                    }\n                }\n            }\n\n            return (\n                <tr key={index}>\n                    <td style={labelCellStyle}>{label}</td>\n                    <td style={styles.cell}>{value}</td>\n                </tr>\n            )\n        })\n    }\n\n    render() {\n        const { summaryObject, baseName } = this.props\n\n        if (summaryObject === null) {\n            return <LoadingMask />\n        }\n\n        if (typeof summaryObject === 'string') {\n            const errorText = i18n.t(\n                `There was an error fetching the ${baseName}`\n            )\n            return (\n                <ErrorMessage\n                    introText={errorText}\n                    errorMessage={summaryObject}\n                />\n            )\n        }\n\n        const { id, displayName, access } = summaryObject\n        const plural = `${baseName}s`,\n            baseRoute = `/${kebabCase(plural)}`,\n            backTooltip = i18n.t(`Back to ${plural}`),\n            editLink = `${baseRoute}/edit/${id}`,\n            editLabel = this.getLabelForEntity(baseName)\n\n        return (\n            <main style={styles.main}>\n                <Heading style={styles.heading}>\n                    <IconLink\n                        to={baseRoute}\n                        tooltip={backTooltip}\n                        icon=\"arrow_back\"\n                    />\n                    {displayName}\n\n                    {access.update ? (\n                        <RaisedButton\n                            style={styles.raisedButton}\n                            label={editLabel}\n                            primary={true}\n                            containerElement={<Link to={editLink} />}\n                            icon={<ImageEdit />}\n                        />\n                    ) : null}\n\n                    {baseName === USER ? this.renderSendMessageBtn(id) : null}\n                </Heading>\n                <Paper style={styles.paper}>\n                    <table>\n                        <tbody>{this.renderPropertyFields()}</tbody>\n                    </table>\n                </Paper>\n            </main>\n        )\n    }\n}\n\nDetailSummary.propTypes = {\n    summaryObject: PropTypes.object,\n    routeId: PropTypes.string.isRequired,\n    config: PropTypes.array.isRequired,\n    baseName: PropTypes.string.isRequired,\n    getItem: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n    summaryObject: state.currentItem,\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n        getItem,\n    }\n)(DetailSummary)\n","import i18n from '@dhis2/d2-i18n'\n\nconst getBaseFields = () => [\n    {\n        key: 'displayName',\n        label: i18n.t('Display name'),\n    },\n    {\n        key: 'id',\n        label: i18n.t('ID'),\n    },\n]\n\nexport const getUserProfile = () => [\n    ...getBaseFields(),\n    {\n        key: 'userCredentials',\n        nestedPropselector: ['lastLogin'],\n        label: i18n.t('Last login'),\n        parseDateTime: true,\n    },\n    {\n        key: 'created',\n        label: i18n.t('Created'),\n        parseDate: true,\n    },\n    {\n        key: 'surname',\n        label: i18n.t('Surname'),\n    },\n    {\n        key: 'firstName',\n        label: i18n.t('First name'),\n    },\n    {\n        key: 'introduction',\n        label: i18n.t('Introduction'),\n    },\n    {\n        key: 'jobTitle',\n        label: i18n.t('Job title'),\n    },\n    {\n        key: 'employer',\n        label: i18n.t('Works at'),\n    },\n    {\n        key: 'education',\n        label: i18n.t('Education'),\n    },\n    {\n        key: 'interests',\n        label: i18n.t('Interests'),\n    },\n    {\n        key: 'nationality',\n        label: i18n.t('Nationality'),\n    },\n    {\n        key: 'birthday',\n        label: i18n.t('Birthday'),\n        parseDate: true,\n    },\n    {\n        key: 'gender',\n        label: i18n.t('Gender'),\n        removeText: 'gender_',\n    },\n    {\n        key: 'languages',\n        label: i18n.t('Speaks'),\n    },\n    {\n        key: 'email',\n        label: i18n.t('E-mail'),\n    },\n    {\n        key: 'phoneNumber',\n        label: i18n.t('Mobile phone number'),\n    },\n    {\n        key: 'organisationUnits',\n        label: i18n.t('Organisations units'),\n        parseArrayAsCommaDelimitedString: 'displayName',\n    },\n    {\n        key: 'userCredentials',\n        label: i18n.t('User roles'),\n        nestedPropselector: ['userRoles'],\n        parseArrayAsCommaDelimitedString: 'displayName',\n    },\n]\n\nexport const getUserRoleDetails = () => [\n    ...getBaseFields(),\n    {\n        key: 'users',\n        label: i18n.t('Members'),\n        count: true,\n    },\n]\nexport const getUserGroupDetails = () => [\n    ...getBaseFields(),\n    {\n        key: 'users',\n        label: i18n.t('Number of users'),\n        count: true,\n    },\n]\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { USER } from '../constants/entityTypes'\nimport DetailSummary from '../components/DetailSummary'\nimport { getUserProfile } from '../constants/detailFieldConfigs'\n\n/** Renders a DetailSummary for a User instance\n * @class\n */\nconst UserProfile = ({\n    match: {\n        params: { id },\n    },\n}) => <DetailSummary routeId={id} config={getUserProfile()} baseName={USER} />\n\nUserProfile.propTypes = {\n    match: PropTypes.object.isRequired,\n}\n\nexport default UserProfile\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { Link } from 'react-router-dom'\n\nconst style = {\n    width: '100%',\n    textAlign: 'center',\n    padding: '1.5rem 1.5rem 1rem',\n}\n/**\n * Will display when no matching route was found.\n * Renders text and the pathname that is in the URL after the `/#`\n * @class\n */\nconst PageNotFound = ({ location }) => (\n    <div style={style}>\n        <h1>{i18n.t('Page not found.')}</h1>\n        <h3>\n            {i18n.t('No match for')}\n            <code> {location.pathname}</code>\n        </h3>\n        <Link to=\"/\"> {i18n.t('Go back home')}</Link>\n    </div>\n)\n\nPageNotFound.propTypes = {\n    location: PropTypes.object.isRequired,\n}\n\nexport default PageNotFound\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport Card from 'material-ui/Card/Card'\nimport CardHeader from 'material-ui/Card/CardHeader'\nimport CardText from 'material-ui/Card/CardText'\nimport CardActions from 'material-ui/Card/CardActions'\nimport IconButton from 'material-ui/IconButton/IconButton'\nimport navigateTo from '../utils/navigateTo'\nimport { getSections } from '../constants/routeConfig'\n\nconst cardStyle = {\n    padding: '0',\n    margin: '.5rem',\n    marginTop: '1rem',\n    float: 'left',\n    width: '230px',\n}\n\nconst headerStyle = {\n    padding: '1rem',\n    height: 'auto',\n    borderBottom: '1px solid #ddd',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n}\n\nconst textStyle = {\n    height: '85px',\n    padding: '.5rem 1rem',\n}\n\nconst actionStyle = {\n    textAlign: 'right',\n}\n\n/**\n * Conditionally renders cards representing the different sections present in the user-app\n * Cards will only be displayed if the current user can create or delete a model type.\n */\nclass CardLinks extends Component {\n    renderActionButtons(card, canList, canCreate) {\n        const actionButtons = []\n        const createPath = `${card.path}/new`\n\n        if (canCreate) {\n            actionButtons.push(\n                <IconButton\n                    key=\"add\"\n                    iconClassName=\"material-icons\"\n                    tooltip={i18n.t('Add')}\n                    tooltipPosition=\"top-center\"\n                    onClick={() => navigateTo(createPath)}\n                >\n                    &#xE145;\n                </IconButton>\n            )\n        }\n\n        if (canList) {\n            actionButtons.push(\n                <IconButton\n                    key=\"list\"\n                    iconClassName=\"material-icons\"\n                    tooltip={i18n.t('list')}\n                    tooltipPosition=\"top-center\"\n                    onClick={() => navigateTo(card.path)}\n                >\n                    &#xE8EF;\n                </IconButton>\n            )\n        }\n\n        return actionButtons\n    }\n\n    renderCard = (card, index) => {\n        const { currentUser, models } = this.context.d2\n        // Based on input from Lars:\n        // \"you should hide menu items for which the user has no \"add\" or \"delete\" authority\"\n        const canCreate = currentUser.canCreate(models[card.entityType])\n        const canDelete = currentUser.canDelete(models[card.entityType])\n        const canList = canCreate || canDelete\n\n        if (!canList) {\n            return null\n        }\n\n        return (\n            <Card key={`card-${index}`} style={cardStyle}>\n                <CardHeader\n                    onClick={() => navigateTo(card.path)}\n                    style={headerStyle}\n                    title={card.label}\n                />\n                <CardText style={textStyle}>{card.description}</CardText>\n                <CardActions style={actionStyle}>\n                    {this.renderActionButtons(card, canList, canCreate)}\n                </CardActions>\n            </Card>\n        )\n    }\n\n    render() {\n        const cards = getSections().map(this.renderCard)\n\n        if (cards.length === 0) {\n            return (\n                <div>\n                    {i18n.t(\n                        'You do not have access to any section of the DHIS 2 User Management App'\n                    )}\n                </div>\n            )\n        }\n\n        return cards\n    }\n}\n\nCardLinks.contextTypes = {\n    d2: PropTypes.object,\n}\n\nexport default CardLinks\n","/**\n * Defines the RoleList context menu for current user on a given UserRole model instance.\n * Contains definitions for menu item visibility, individual menu item actions, icons and names.\n * @module containers/RoleList/RoleContextMenuActions\n */\nimport Action from 'd2-ui/lib/action/Action'\nimport navigateTo from '../../utils/navigateTo'\nimport { USER_ROLE } from '../../constants/entityTypes'\nimport { deleteModel, openSharingSettings } from '../../utils/sharedActions'\n\nconst show_details = 'show_details'\nconst sharing_settings = 'sharing_settings'\nconst edit = 'edit'\nconst remove = 'remove'\n\n/**\n * Determines whether a specific user role action should be visible for current user and given UserRole instance\n * @param {Object} model - d2 UserRole model instance\n * @param {String} action - Action name\n * @returns {Boolean} - Action visibility\n * @function\n */\nexport const isRoleContextActionAllowed = (model, action) => {\n    if (!model) {\n        return false\n    }\n\n    const { access } = model\n\n    switch (action) {\n        case show_details:\n            return access.read\n        case sharing_settings:\n            return access.manage\n        case edit:\n            return access.update\n        case remove:\n            return access.delete\n        default:\n            return true\n    }\n}\n\nexport const roleContextMenuIcons = {\n    [show_details]: 'info',\n    [sharing_settings]: 'share',\n    [edit]: 'edit',\n    [remove]: 'delete',\n}\n\nexport const roleContextMenuActions = Action.createActionsFromNames([\n    [show_details],\n    [sharing_settings],\n    [edit],\n    [remove],\n])\n\nroleContextMenuActions.show_details.subscribe(({ data: { id } }) => {\n    navigateTo(`/user-roles/view/${id}`)\n})\n\nroleContextMenuActions.sharing_settings.subscribe(openSharingSettings)\n\nroleContextMenuActions.edit.subscribe(({ data: { id } }) => {\n    navigateTo(`/user-roles/edit/${id}`)\n})\n\nroleContextMenuActions.remove.subscribe(({ data: role }) => {\n    const params = {\n        model: role,\n        entityType: USER_ROLE,\n    }\n    deleteModel(params)\n})\n","import React from 'react'\nimport i18n from '@dhis2/d2-i18n'\nimport { USER_ROLE } from '../../constants/entityTypes'\nimport List from '../../components/List'\nimport {\n    roleContextMenuActions,\n    roleContextMenuIcons,\n    isRoleContextActionAllowed,\n} from './RoleContextMenuActions'\nimport SearchFilter from '../../components/SearchFilter'\n\n/**\n * Container component that renders a List component with correct properties for displaying a list of UserRoles\n * @class\n */\nconst RoleList = () => (\n    <List\n        entityType={USER_ROLE}\n        FilterComponent={SearchFilter}\n        columns={['displayName', 'description']}\n        primaryAction={roleContextMenuActions.edit}\n        contextMenuActions={roleContextMenuActions}\n        contextMenuIcons={roleContextMenuIcons}\n        isContextActionAllowed={isRoleContextActionAllowed}\n        sectionName={i18n.t('User Role Management')}\n        newItemPath={'/user-roles/new'}\n        className={'role-list'}\n    />\n)\n\nexport default RoleList\n","import RoleList from './RoleList'\nexport default RoleList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { USER_ROLE } from '../constants/entityTypes'\nimport DetailSummary from '../components/DetailSummary'\nimport { getUserRoleDetails } from '../constants/detailFieldConfigs'\n\n/** Renders a DetailSummary for a UserRole instance\n * @class\n */\nconst RoleDetails = ({\n    match: {\n        params: { id },\n    },\n}) => (\n    <DetailSummary\n        routeId={id}\n        config={getUserRoleDetails()}\n        baseName={USER_ROLE}\n    />\n)\n\nRoleDetails.propTypes = {\n    match: PropTypes.object.isRequired,\n}\n\nexport default RoleDetails\n","/**\n * Defines the GroupList context menu for current user on a given UserGroup model instance.\n * Contains definitions for menu item visibility, individual menu item actions, icons and names.\n * @module containers/GroupList/GroupContextMenuActions\n */\nimport i18n from '@dhis2/d2-i18n'\nimport Action from 'd2-ui/lib/action/Action'\nimport navigateTo from '../../utils/navigateTo'\nimport api from '../../api'\nimport store from '../../store'\nimport { deleteModel, openSharingSettings } from '../../utils/sharedActions'\nimport { USER_GROUP } from '../../constants/entityTypes'\nimport { showSnackbar, refreshCurrentUser } from '../../actions'\nimport createHumanErrorMessage from '../../utils/createHumanErrorMessage'\nconst show_details = 'show_details'\nconst sharing_settings = 'sharing_settings'\nconst edit = 'edit'\nconst join_group = 'join_group'\nconst leave_group = 'leave_group'\nconst remove = 'remove'\n\n/**\n * Determines whether a specific user group action should be visible for current user and given UserGroup instance\n * @param {Object} model - d2 UserGroup model instance\n * @param {String} action - Action name\n * @returns {Boolean} - Action visibility\n * @function\n */\nexport const isGroupContextActionAllowed = (model, action) => {\n    if (!model) {\n        return false\n    }\n\n    const { access } = model\n\n    switch (action) {\n        case show_details:\n            return access.read\n        case sharing_settings:\n            return access.manage\n        case edit:\n            return access.update\n        case join_group:\n            return access.update && !model.currentUserIsMember\n        case leave_group:\n            return access.update && model.currentUserIsMember\n        case remove:\n            return access.delete\n        default:\n            return true\n    }\n}\n\nexport const groupContextMenuIcons = {\n    [show_details]: 'info',\n    [sharing_settings]: 'share',\n    [edit]: 'edit',\n    [join_group]: 'group_add',\n    [leave_group]: 'exit_to_app',\n    [remove]: 'delete',\n}\n\nexport const groupContextMenuActions = Action.createActionsFromNames([\n    show_details,\n    sharing_settings,\n    edit,\n    join_group,\n    leave_group,\n    remove,\n])\n\nconst updateGroupMembership = async ({ displayName, id }, deleteMembership) => {\n    try {\n        await api.updateCurrentUserGroupMembership(id, deleteMembership)\n        const baseMsg = deleteMembership\n            ? i18n.t('You left group')\n            : i18n.t('You joined group')\n        store.dispatch(showSnackbar({ message: `${baseMsg} ${displayName}` }))\n        store.dispatch(refreshCurrentUser())\n    } catch (error) {\n        store.dispatch(\n            showSnackbar({\n                message: createHumanErrorMessage(\n                    error,\n                    i18n.t('There was a problem updating your group membership')\n                ),\n            })\n        )\n    }\n}\n\ngroupContextMenuActions.show_details.subscribe(({ data: { id } }) => {\n    navigateTo(`/user-groups/view/${id}`)\n})\n\ngroupContextMenuActions.sharing_settings.subscribe(openSharingSettings)\n\ngroupContextMenuActions.edit.subscribe(({ data: { id } }) => {\n    navigateTo(`/user-groups/edit/${id}`)\n})\n\ngroupContextMenuActions.join_group.subscribe(({ data }) => {\n    updateGroupMembership(data, false)\n})\n\ngroupContextMenuActions.leave_group.subscribe(({ data }) => {\n    updateGroupMembership(data, true)\n})\n\ngroupContextMenuActions.remove.subscribe(({ data: group }) => {\n    const params = {\n        model: group,\n        entityType: USER_GROUP,\n    }\n    deleteModel(params)\n})\n","import GroupList from './GroupList'\nexport default GroupList\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport List from '../../components/List'\nimport i18n from '@dhis2/d2-i18n'\nimport {\n    isGroupContextActionAllowed,\n    groupContextMenuIcons,\n    groupContextMenuActions,\n} from './GroupContextMenuActions'\nimport { USER_GROUP } from '../../constants/entityTypes'\nimport SearchFilter from '../../components/SearchFilter'\n\n/**\n * Container component that renders a List component with correct properties for displaying a list of UserGroups\n */\nclass GroupList extends Component {\n    render() {\n        return (\n            <List\n                entityType={USER_GROUP}\n                FilterComponent={SearchFilter}\n                columns={['displayName', 'currentUserIsMember']}\n                primaryAction={groupContextMenuActions.edit}\n                contextMenuActions={groupContextMenuActions}\n                contextMenuIcons={groupContextMenuIcons}\n                isContextActionAllowed={isGroupContextActionAllowed}\n                sectionName={i18n.t('User Group Management')}\n                newItemPath={'/user-groups/new'}\n                className={'group-list'}\n            />\n        )\n    }\n}\n\nGroupList.propTypes = {\n    match: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n    history: PropTypes.object.isRequired,\n}\n\nexport default GroupList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { USER_GROUP } from '../constants/entityTypes'\nimport DetailSummary from '../components/DetailSummary'\nimport { getUserGroupDetails } from '../constants/detailFieldConfigs'\n\n/** Renders a DetailSummary for a UserGroup instance\n * @class\n */\nconst GroupDetails = ({\n    match: {\n        params: { id },\n    },\n}) => (\n    <DetailSummary\n        routeId={id}\n        config={getUserGroupDetails()}\n        baseName={USER_GROUP}\n    />\n)\n\nGroupDetails.propTypes = {\n    match: PropTypes.object.isRequired,\n}\n\nexport default GroupDetails\n","import React from 'react'\nimport i18n from '@dhis2/d2-i18n'\nimport UserList from '../containers/UserList'\nimport FormLoader from '../components/FormLoader'\nimport UserProfile from '../containers/UserProfile'\nimport PageNotFound from '../components/PageNotFound'\nimport CardLinks from '../components/CardLinks'\nimport RoleList from '../containers/RoleList'\nimport RoleDetails from '../containers/RoleDetails'\nimport GroupList from '../containers/GroupList'\nimport GroupDetails from '../containers/GroupDetails'\nimport { USER, USER_ROLE, USER_GROUP } from './entityTypes'\n\nconst getUserSection = () => ({\n    key: 'user_section',\n    label: i18n.t('User'),\n    icon: 'person',\n    path: '/users',\n    description: i18n.t('Create, modify, view and delete Users'),\n    component: UserList,\n    entityType: USER,\n})\nconst getUserRoleSection = () => ({\n    key: 'user_role_section',\n    label: i18n.t('User role'),\n    icon: 'folder_shared',\n    path: '/user-roles',\n    description: i18n.t('Create, modify, view and delete User Roles'),\n    component: RoleList,\n    entityType: USER_ROLE,\n})\nconst getUserGroupSection = () => ({\n    key: 'user_group_section',\n    label: i18n.t('User group'),\n    icon: 'group',\n    path: '/user-groups',\n    description: i18n.t('Create, modify, view and delete User Groups'),\n    component: GroupList,\n    entityType: USER_GROUP,\n})\n\n// Label property is used in sidebar, so routes without a label will be omitted\nconst createRouteConfig = () => [\n    // USER\n    {\n        key: 'user_new_view',\n        path: '/users/new',\n        render: props => <FormLoader entityType={USER} {...props} />,\n        entityType: USER,\n    },\n    {\n        key: 'user_edit_view',\n        path: '/users/edit/:id',\n        render: props => <FormLoader entityType={USER} {...props} />,\n        entityType: USER,\n    },\n    {\n        key: 'user_profile_view',\n        path: '/users/view/:id',\n        component: UserProfile,\n        entityType: USER,\n    },\n    getUserSection(),\n    // ROLE\n    {\n        key: 'user_role_new_view',\n        path: '/user-roles/new',\n        render: props => <FormLoader entityType={USER_ROLE} {...props} />,\n        entityType: USER_ROLE,\n    },\n    {\n        key: 'user_role_edit_view',\n        path: '/user-roles/edit/:id',\n        render: props => <FormLoader entityType={USER_ROLE} {...props} />,\n        entityType: USER_ROLE,\n    },\n    {\n        key: 'user_role_details_view',\n        path: '/user-roles/view/:id',\n        component: RoleDetails,\n        entityType: USER_ROLE,\n    },\n    getUserRoleSection(),\n    // GROUP\n    {\n        key: 'user_group_new_view',\n        path: '/user-groups/new',\n        render: props => <FormLoader entityType={USER_GROUP} {...props} />,\n        entityType: USER_GROUP,\n    },\n    {\n        key: 'user_group_edit_view',\n        path: '/user-groups/edit/:id',\n        render: props => <FormLoader entityType={USER_GROUP} {...props} />,\n        entityType: USER_GROUP,\n    },\n    {\n        key: 'user_group_details_view',\n        path: '/user-groups/view/:id',\n        component: GroupDetails,\n        entityType: USER_GROUP,\n    },\n    getUserGroupSection(),\n    // Other\n    {\n        key: 'landing_page',\n        path: '/',\n        component: CardLinks,\n    },\n    {\n        key: 'not_found',\n        component: PageNotFound,\n    },\n]\n\nexport const getSections = (() => {\n    let sections = null\n    return () => {\n        if (!sections) {\n            sections = [\n                getUserSection(),\n                getUserRoleSection(),\n                getUserGroupSection(),\n            ]\n        }\n        return sections\n    }\n})()\n\nexport default (() => {\n    let routeConfig = null\n    return () => {\n        if (!routeConfig) {\n            routeConfig = createRouteConfig()\n        }\n        return routeConfig\n    }\n})()\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { withRouter } from 'react-router'\nimport Sidebar from 'd2-ui/lib/sidebar/Sidebar.component'\n\nconst style = {\n    display: 'flex',\n    flex: '0 0 320px',\n}\n\n/**\n * Renders the sidebar containing the available sections.\n * If its on a path/route that doesn't match any section it will render null.\n * This is because when a form or the CardLinks are displayed, the sidebar should not show.\n */\nclass SideNav extends Component {\n    changeSectionHandler = key => {\n        const { sections, history } = this.props\n        const section = sections.find(section => section.key === key)\n\n        history.push(section.path)\n    }\n\n    render() {\n        const {\n            sections,\n            location: { pathname },\n        } = this.props\n        const sectionForPath = sections.find(\n            section => section.path === pathname\n        )\n        const onLandingPage = pathname === '/'\n        const sectionKey = sectionForPath ? sectionForPath.key : null\n\n        if (!sectionForPath && !onLandingPage) {\n            return null\n        }\n\n        return (\n            <div style={style}>\n                <Sidebar\n                    sections={sections}\n                    onChangeSection={this.changeSectionHandler}\n                    currentSection={sectionKey}\n                />\n            </div>\n        )\n    }\n}\n\nSideNav.propTypes = {\n    sections: PropTypes.array.isRequired,\n    history: PropTypes.object.isRequired,\n    location: PropTypes.shape({\n        pathname: PropTypes.string.isRequired,\n    }),\n}\n\nexport default withRouter(SideNav)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { connect } from 'react-redux'\nimport { Switch, Route, withRouter } from 'react-router-dom'\nimport { initCurrentUser } from '../actions'\nimport LoadingMask from 'd2-ui/lib/loading-mask/LoadingMask.component'\nimport ErrorMessage from './ErrorMessage'\nimport getRouteConfig from '../constants/routeConfig'\nimport SideNav from './SideNav'\nimport navigateTo from '../utils/navigateTo'\n\nconst style = {\n    display: 'flex',\n    flex: '1 1 0%',\n    paddingRight: '2rem',\n    paddingTop: '1rem',\n}\n\n/**\n * This component prepares the user-app sections and routes based on the current user's authorities\n * The sections will be rendered in the SideNav and the routes within a react-router Switch component\n */\nclass SectionLoader extends Component {\n    componentDidMount() {\n        const { initCurrentUser, currentUser } = this.props\n        if (!currentUser) {\n            initCurrentUser()\n        } else {\n            this.setRouteConfig(currentUser)\n        }\n    }\n\n    componentWillReceiveProps({ currentUser, location: { pathname } }) {\n        this.setRouteConfig(currentUser)\n\n        // Navigate home if the current user has edited a setting that restricts\n        // him from an active section. I.e. adjusting his own user role\n        // so he cannot edit user roles anymore\n        if (\n            currentUser &&\n            currentUser !== this.props.currentUser &&\n            pathname !== '/' &&\n            !this.pathHasAvailableSection(pathname)\n        ) {\n            navigateTo('/')\n        }\n    }\n\n    pathHasAvailableSection(pathname) {\n        if (!this.routeConfig) {\n            return false\n        }\n\n        const { sections } = this.routeConfig\n        return Boolean(\n            sections &&\n                sections.find(section =>\n                    pathname.includes(section.path.split(':')[0])\n                )\n        )\n    }\n\n    setRouteConfig(currentUser) {\n        this.routeConfig = !currentUser\n            ? null\n            : getRouteConfig().reduce(\n                  (routeConfig, configItem) => {\n                      const { routes, sections } = routeConfig\n                      if (this.userHasAuthorities(configItem, currentUser)) {\n                          routes.push(configItem)\n                          if (configItem.label) {\n                              sections.push(configItem)\n                          }\n                      }\n                      return routeConfig\n                  },\n                  { routes: [], sections: [] }\n              )\n    }\n\n    userHasAuthorities({ entityType }, currentUser) {\n        if (!entityType) {\n            return true\n        }\n        const { models } = this.context.d2\n        const canCreate = currentUser.canCreate(models[entityType])\n        const canDelete = currentUser.canDelete(models[entityType])\n        return canCreate || canDelete\n    }\n\n    renderRoutes(routes) {\n        return routes.map(section => <Route exact strict {...section} />)\n    }\n\n    renderContent() {\n        const { currentUser } = this.props\n\n        if (!currentUser) {\n            return <LoadingMask />\n        }\n\n        if (typeof currentUser === 'string') {\n            const introText = i18n.t(\n                'There was an error loading the current user'\n            )\n            return (\n                <ErrorMessage\n                    introText={introText}\n                    errorMessage={currentUser}\n                />\n            )\n        }\n\n        const { routes, sections } = this.routeConfig\n\n        if (sections && sections.length === 0) {\n            const introText = i18n.t(\n                'You do not have authorities to see users, user roles or user groups'\n            )\n            return <ErrorMessage introText={introText} errorMessage=\"\" />\n        }\n\n        return [\n            <SideNav key=\"sidenav\" sections={sections} />,\n            <Switch key=\"routeswitch\">{this.renderRoutes(routes)}</Switch>,\n        ]\n    }\n\n    render() {\n        return <main style={style}>{this.renderContent()}</main>\n    }\n}\n\nSectionLoader.contextTypes = {\n    d2: PropTypes.object,\n}\n\nSectionLoader.propTypes = {\n    initCurrentUser: PropTypes.func.isRequired,\n    currentUser: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n}\n\nconst mapStateToProps = ({ currentUser }) => ({ currentUser })\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        {\n            initCurrentUser,\n        }\n    )(SectionLoader)\n)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Snackbar from 'material-ui/Snackbar'\nimport { hideSnackbar } from '../actions'\n\n/**\n * A small wrapper around the  MUI Snackbar so it can easily be controlled by state\n * @class\n */\nconst SnackbarContainer = ({ open, snackbarProps, hideSnackbar }) => {\n    const defaults = {\n        autoHideDuration: 6000,\n        onRequestClose: hideSnackbar,\n        style: { whiteSpace: 'nowrap' }, // Forces text to stay on one line\n        bodyStyle: { maxWidth: '100%' }, // Overrides the default max-width of 587px\n        contentStyle: { display: 'flex' }, // Forces the confirm button to be on the same line as the text\n    }\n    const finalProps = { ...defaults, ...snackbarProps }\n    return <Snackbar open={open} {...finalProps} />\n}\n\nSnackbarContainer.propTypes = {\n    open: PropTypes.bool.isRequired,\n    snackbarProps: PropTypes.object.isRequired,\n    hideSnackbar: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n    open: state.popups.snackbar.show,\n    snackbarProps: state.popups.snackbar.props,\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n        hideSnackbar,\n    }\n)(SnackbarContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Dialog from 'material-ui/Dialog'\n\n/**\n * A thin wrapper around the MUI Dialog component so it can easily be controlled by redux state\n * @class\n */\nconst DialogContainer = ({ open, dialogProps, content }) => (\n    <Dialog key=\"dialog\" open={open} {...dialogProps}>\n        {content}\n    </Dialog>\n)\n\nDialogContainer.propTypes = {\n    open: PropTypes.bool.isRequired,\n    dialogProps: PropTypes.object.isRequired,\n    content: PropTypes.object,\n}\n\nconst mapStateToProps = state => ({\n    open: state.popups.dialog.show,\n    dialogProps: state.popups.dialog.props,\n    content: state.popups.dialog.content,\n})\n\nexport default connect(mapStateToProps)(DialogContainer)\n","import SharingDialog from '@dhis2/d2-ui-sharing-dialog'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport api from '../api'\nimport { hideSharingDialog } from '../actions'\n\n/**\n * A small wrapper around the d2-ui SharingDialog so it can easily be controlled by state\n * @class\n */\nconst SharingDialogContainer = ({ open, id, type, hideSharingDialog }) => {\n    return (\n        <SharingDialog\n            open={open}\n            id={id}\n            type={type}\n            onRequestClose={hideSharingDialog}\n            d2={api.getD2()}\n        />\n    )\n}\n\nSharingDialogContainer.propTypes = {\n    open: PropTypes.bool.isRequired,\n    id: PropTypes.string,\n    type: PropTypes.string,\n    hideSharingDialog: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n    open: state.popups.sharing.show,\n    id: state.popups.sharing.id,\n    type: state.popups.sharing.type,\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n        hideSharingDialog,\n    }\n)(SharingDialogContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Provider } from 'react-redux'\nimport { Router } from 'react-router-dom'\nimport history from './utils/history'\nimport store from './store'\nimport './styles/styles.css'\nimport AppWithD2ContextAndTheme from './components/AppWithD2ContextAndTheme'\nimport SectionLoader from './components/SectionLoader'\nimport SnackbarContainer from './components/SnackbarContainer'\nimport DialogContainer from './components/DialogContainer'\nimport SharingDialogContainer from './components/SharingDialogContainer'\n\nimport { DataProvider } from '@dhis2/app-runtime'\nimport { HeaderBar } from '@dhis2/ui-widgets'\nimport { CssReset } from '@dhis2/ui-core'\n\nimport i18n from '@dhis2/d2-i18n'\n\nimport 'typeface-roboto'\nimport 'material-design-icons-iconfont/dist/material-design-icons.css'\n\n/**\n * Main Component. Renders a AppWithD2ContextAndTheme wrapped in a Provider containing the HeaderBar,\n * Router, SectionLoader, and various popups\n * @param {Object} props\n * @param {Object} props.d2 - The d2 instance to pass to the Headerbar and AppWithD2ContextAndTheme\n * @param {Object} props.baseUrl - The baseUrl for the server\n * @class\n */\nconst App = ({ d2, baseUrl }) => (\n    <DataProvider baseUrl={baseUrl} apiVersion=\"33\">\n        <Provider store={store}>\n            <AppWithD2ContextAndTheme d2={d2}>\n                <div>\n                    <CssReset />\n                    <HeaderBar appName={i18n.t('User management')} />\n                    <Router history={history} hashType={'noslash'}>\n                        <SectionLoader />\n                    </Router>\n                    <SnackbarContainer />\n                    <DialogContainer />\n                    <SharingDialogContainer />\n                </div>\n            </AppWithD2ContextAndTheme>\n        </Provider>\n    </DataProvider>\n)\n\nApp.propTypes = {\n    d2: PropTypes.object.isRequired,\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n        )\n)\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    )\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            )\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (\n                response.status === 404 ||\n                (contentType != null &&\n                    contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            )\n        })\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister()\n        })\n    }\n}\n","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport moment from 'moment';\nimport 'moment/locale/ar';\nimport 'moment/locale/bn';\nimport 'moment/locale/es';\nimport 'moment/locale/fr';\nimport 'moment/locale/lo';\nimport 'moment/locale/nb';\nimport 'moment/locale/nl';\nimport 'moment/locale/pt';\nimport 'moment/locale/ru';\nimport 'moment/locale/sv';\nimport 'moment/locale/tg';\nimport 'moment/locale/uk';\nimport 'moment/locale/ur';\nimport 'moment/locale/vi';\nimport 'moment/locale/zh-cn';\n\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\n\nconst namespace = 'default';\nmoment.locale('en');\n\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\n\ni18n.setDefaultNamespace(namespace);\ni18n.changeLanguage('en');\n\nexport default i18n;\n","import React from 'react'\nimport { render } from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { config, getUserSettings, init } from 'd2/lib/d2'\nimport i18n from './locales'\n\nconst { REACT_APP_DHIS2_BASE_URL } = process.env\n\n/**\n * @module index\n */\n\n/**\n * Sets baseUrl, schemas and sources on the d2 config object and then initializes d2\n * @function\n */\n\nconst setupD2 = () => {\n    const baseUrl = `${REACT_APP_DHIS2_BASE_URL}/api/`\n    const initConfig = {\n        baseUrl,\n        schemas: [\n            'userRole',\n            'user',\n            'userGroup',\n            'userCredentials',\n            'organisationUnit',\n        ],\n    }\n    config.baseUrl = baseUrl\n\n    return getUserSettings()\n        .then(configI18n)\n        .then(({ i18n }) => init({ ...initConfig, i18n }))\n}\n\n/**\n * Adds translation sources to the d2 config object for deprecated translation methods used by d2-ui\n * And sets language for new i18n module from \"@dhis2/d2-i18n\"\n * @param {Object} userSettings - user settings object returned by the d2 getUserSettings promise\n * @function\n */\n\nconst configI18n = userSettings => {\n    const uiLocale = userSettings.keyUiLocale\n    const sources = config.i18n.sources\n    // Using the old style of translations for the d2-ui components\n    if (uiLocale !== 'en') {\n        sources.add(`i18n/i18n_module_${uiLocale}.properties`)\n    }\n    sources.add('i18n/i18n_module_en.properties')\n    i18n.changeLanguage(uiLocale)\n    return config\n}\n\n/**\n * Renders app into root element\n * @function\n */\nconst renderAppInDOM = d2 => {\n    const rootEl = document.getElementById('root')\n    render(<App d2={d2} baseUrl={REACT_APP_DHIS2_BASE_URL} />, rootEl)\n}\n\nsetupD2().then(renderAppInDOM)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.unregister()\n"],"sourceRoot":""}